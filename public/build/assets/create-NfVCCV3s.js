import{j as q,h as m,D as G,Q as T,R as w,S as o,ac as H,q as t,y as c,a8 as f,u as e,ag as I,O as U,ad as L}from"./vendor-DfCbaU-T.js";import{u as P,i as $}from"./useAbortOnUnmount-D2zdVzb9.js";import{$ as A,T as C,x as V,U as Q}from"./main-Btr01hqQ.js";import{V as Y,r as i,p as z}from"./VForm-D0fBkA3g.js";import{V as D,a as u}from"./VRow-CRn_xzm0.js";import{V as J}from"./VCard-BmPLTxO3.js";import{V as K}from"./VCardText-H2SttjXr.js";import{V as W}from"./VAlert-R8JWKysv.js";import{V as v}from"./VSelect-DhbvR9Z1.js";import{V as y}from"./VTextField-pVQuWnMO.js";import{V as X}from"./VTextarea-DCdZ-5SO.js";import"./vuetify-DGZOXKNZ.js";import"./VAvatar-96oJdN2D.js";import"./VList-BYpc2SqC.js";import"./VDivider-DEGojtwS.js";import"./VCheckboxBtn-DaQGgEjM.js";import"./VSelectionControl-ClrOpdq3.js";import"./VChip-DOrTqiUh.js";const Z={class:"d-flex align-center justify-space-between mb-2"},ee={class:"d-flex justify-end gap-3"},_e=q({__name:"create",setup(ae){const{withAbort:b}=P(),M=H(),n=m(!1),g=m(!1),p=m(""),d=m({}),_=m([]),h=m([]),k=m([]),l=m({apartment_id:null,account_id:null,charge_type:"aidat",period:"",due_date:"",amount:null,description:""}),R=m(null),x=[i()],N=[i()],S=[i()],B=[i()],E=[i()],F=[i(),z()],j=async()=>{g.value=!0;try{const r=await b(a=>A("/charges/meta",{signal:a}));_.value=r.data.apartments,h.value=r.data.accounts,k.value=r.data.charge_types}catch(r){if($(r))return;p.value=C(r,"Form verileri alınamadı.")}finally{g.value=!1}},O=async()=>{if((await R.value?.validate())?.valid){n.value=!0,p.value="",d.value={};try{await b(a=>A("/charges",{method:"POST",body:{apartment_id:l.value.apartment_id,account_id:l.value.account_id,charge_type:l.value.charge_type,period:l.value.period,due_date:l.value.due_date,amount:l.value.amount,description:l.value.description||null},signal:a})),await M.push("/charges")}catch(a){if($(a))return;p.value=C(a,"Tahakkuk oluşturulamadı."),d.value=Q(a)}finally{n.value=!1}}};return G(j),(r,a)=>(T(),w(D,null,{default:o(()=>[t(u,{cols:"12"},{default:o(()=>[c("div",Z,[a[8]||(a[8]=c("div",null,[c("h4",{class:"text-h4 mb-1"}," Yeni Tahakkuk "),c("p",{class:"text-medium-emphasis mb-0"}," Daireye yeni tahakkuk kaydı oluşturun ")],-1)),t(V,{variant:"outlined",to:"/charges"},{default:o(()=>[...a[7]||(a[7]=[f(" Listeye Don ",-1)])]),_:1})])]),_:1}),t(u,{cols:"12"},{default:o(()=>[t(J,{loading:e(g)||e(n)},{default:o(()=>[t(K,null,{default:o(()=>[t(Y,{ref_key:"formRef",ref:R,onSubmit:I(O,["prevent"])},{default:o(()=>[t(D,null,{default:o(()=>[e(p)?(T(),w(u,{key:0,cols:"12"},{default:o(()=>[t(W,{type:"error",variant:"tonal"},{default:o(()=>[f(U(e(p)),1)]),_:1})]),_:1})):L("",!0),t(u,{cols:"12",md:"6"},{default:o(()=>[t(v,{modelValue:e(l).apartment_id,"onUpdate:modelValue":a[0]||(a[0]=s=>e(l).apartment_id=s),items:e(_),"item-title":"label","item-value":"id",label:r.$t("common.apartment"),rules:x,"error-messages":e(d).apartment_id??[]},null,8,["modelValue","items","label","error-messages"])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[t(v,{modelValue:e(l).account_id,"onUpdate:modelValue":a[1]||(a[1]=s=>e(l).account_id=s),items:e(h),"item-title":"label","item-value":"id",label:"Gelir Hesabi",rules:N,"error-messages":e(d).account_id??[]},null,8,["modelValue","items","error-messages"])]),_:1}),t(u,{cols:"12",md:"4"},{default:o(()=>[t(v,{modelValue:e(l).charge_type,"onUpdate:modelValue":a[2]||(a[2]=s=>e(l).charge_type=s),items:e(k),"item-title":"label","item-value":"value",label:r.$t("common.chargeType"),rules:S,"error-messages":e(d).charge_type??[]},null,8,["modelValue","items","label","error-messages"])]),_:1}),t(u,{cols:"12",md:"4"},{default:o(()=>[t(y,{modelValue:e(l).period,"onUpdate:modelValue":a[3]||(a[3]=s=>e(l).period=s),type:"month",label:r.$t("common.period"),rules:B,"error-messages":e(d).period??[]},null,8,["modelValue","label","error-messages"])]),_:1}),t(u,{cols:"12",md:"4"},{default:o(()=>[t(y,{modelValue:e(l).due_date,"onUpdate:modelValue":a[4]||(a[4]=s=>e(l).due_date=s),type:"date",label:r.$t("common.dueDate"),rules:E,"error-messages":e(d).due_date??[]},null,8,["modelValue","label","error-messages"])]),_:1}),t(u,{cols:"12",md:"6"},{default:o(()=>[t(y,{modelValue:e(l).amount,"onUpdate:modelValue":a[5]||(a[5]=s=>e(l).amount=s),type:"number",step:"0.01",min:"0",label:r.$t("common.amount"),rules:F,"error-messages":e(d).amount??[]},null,8,["modelValue","label","error-messages"])]),_:1}),t(u,{cols:"12"},{default:o(()=>[t(X,{modelValue:e(l).description,"onUpdate:modelValue":a[6]||(a[6]=s=>e(l).description=s),label:r.$t("common.description"),rows:"3","error-messages":e(d).description??[]},null,8,["modelValue","label","error-messages"])]),_:1}),t(u,{cols:"12"},{default:o(()=>[c("div",ee,[t(V,{variant:"outlined",to:"/charges"},{default:o(()=>[...a[9]||(a[9]=[f(" Iptal ",-1)])]),_:1}),t(V,{color:"primary",type:"submit",loading:e(n),disabled:e(n)},{default:o(()=>[f(U(r.$t("common.save")),1)]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}))}});export{_e as default};
