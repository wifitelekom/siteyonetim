import{j as k,h as n,D as M,Q as v,R as V,S as a,q as l,y as p,u as e,ag as U,a8 as g,O as _,ad as b}from"./vendor-DfCbaU-T.js";import{$ as x,T as h,x as B,U as N}from"./main-OjHNd2U9.js";import{V as j,r as E}from"./VForm-CtC6ldpE.js";import{V as S,a as r}from"./VRow-Ba58lXtG.js";import{V as F}from"./VCard-9RfFlHpT.js";import{V as q}from"./VCardText-YweTyZzP.js";import{V as w}from"./VAlert-DafHPFjN.js";import{V as T}from"./VTextField-CMxHKe9w.js";import{V as D}from"./VTextarea-CHmrCRFp.js";import"./vuetify-BWJcAN87.js";import"./VAvatar-BcaC_ZEa.js";const $={class:"d-flex justify-end"},Y=k({__name:"site-settings",setup(G){const c=n(!1),i=n(!1),d=n(""),u=n(""),m=n({}),t=n({name:"",phone:"",address:""}),y=n(null),A=[E()],C=async()=>{c.value=!0,d.value="",u.value="";try{const o=await x("/site-settings");t.value={name:o.data.name,phone:o.data.phone??"",address:o.data.address??""}}catch(o){d.value=h(o,"Site ayarlari alinamadi.")}finally{c.value=!1}},R=async()=>{if((await y.value?.validate())?.valid){i.value=!0,d.value="",u.value="",m.value={};try{await x("/site-settings",{method:"PUT",body:{name:t.value.name,phone:t.value.phone||null,address:t.value.address||null}}),u.value="Site ayarlari guncellendi."}catch(s){d.value=h(s,"Site ayarlari guncellenemedi."),m.value=N(s)}finally{i.value=!1}}};return M(C),(o,s)=>(v(),V(S,null,{default:a(()=>[l(r,{cols:"12"},{default:a(()=>[...s[3]||(s[3]=[p("div",{class:"d-flex align-center justify-space-between mb-2"},[p("div",null,[p("h4",{class:"text-h4 mb-1"}," Site Ayarlari "),p("p",{class:"text-medium-emphasis mb-0"}," Site temel bilgilerini guncelleyin ")])],-1)])]),_:1}),l(r,{cols:"12"},{default:a(()=>[l(F,{loading:e(c)||e(i)},{default:a(()=>[l(q,null,{default:a(()=>[l(j,{ref_key:"formRef",ref:y,onSubmit:U(R,["prevent"])},{default:a(()=>[l(S,null,{default:a(()=>[e(d)?(v(),V(r,{key:0,cols:"12"},{default:a(()=>[l(w,{type:"error",variant:"tonal"},{default:a(()=>[g(_(e(d)),1)]),_:1})]),_:1})):b("",!0),e(u)?(v(),V(r,{key:1,cols:"12"},{default:a(()=>[l(w,{type:"success",variant:"tonal"},{default:a(()=>[g(_(e(u)),1)]),_:1})]),_:1})):b("",!0),l(r,{cols:"12"},{default:a(()=>[l(T,{modelValue:e(t).name,"onUpdate:modelValue":s[0]||(s[0]=f=>e(t).name=f),label:"Site Adi",rules:A,"error-messages":e(m).name??[]},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12"},{default:a(()=>[l(T,{modelValue:e(t).phone,"onUpdate:modelValue":s[1]||(s[1]=f=>e(t).phone=f),label:"Telefon","error-messages":e(m).phone??[]},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12"},{default:a(()=>[l(D,{modelValue:e(t).address,"onUpdate:modelValue":s[2]||(s[2]=f=>e(t).address=f),label:"Adres",rows:"3","error-messages":e(m).address??[]},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12"},{default:a(()=>[p("div",$,[l(B,{color:"primary",type:"submit",loading:e(i),disabled:e(i)},{default:a(()=>[...s[4]||(s[4]=[g(" Guncelle ",-1)])]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}))}});export{Y as default};
