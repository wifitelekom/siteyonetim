import{j as C,h as n,Q as v,R as c,S as r,ac as $,q as a,y as d,a8 as b,u as l,ag as B,O as y,ad as D}from"./vendor-qaEqcc9M.js";import{x as V,$ as T,T as E,U as F}from"./main-DUODoQpR.js";import{V as j,r as _,p as M}from"./VForm-AfrkaUJk.js";import{u as O,i as q}from"./useAbortOnUnmount-B_TyPYrd.js";import{V as k,a as u}from"./VRow-dBMGxjTF.js";import{V as I}from"./VCard-DEMyauu_.js";import{V as K}from"./VCardText-lEnvPJxp.js";import{V as P}from"./VAlert-DIbLZTVg.js";import{V as f}from"./VTextField-BgtisBQp.js";import{V as z}from"./VSwitch-C2gHzlAV.js";import"./vuetify-CYvz9UpR.js";import"./VAvatar-DfdxhEHH.js";import"./VSelectionControl-DtdcpgRj.js";const L={class:"d-flex align-center justify-space-between mb-2"},Q={class:"d-flex justify-end gap-3"},se=C({__name:"create",setup(Y){const R=$(),{withAbort:N}=O(),i=n(!1),p=n(""),m=n({}),o=n({block:"",floor:null,number:"",m2:null,arsa_payi:null,is_active:!0}),g=n(null),w=[_(),t=>Number.isInteger(Number(t))?!0:"Kat bilgisi tam sayi olmalidir."],U=[_()],x=[t=>t==null||t===""?!0:M()(t)],S=[t=>{if(t==null||t==="")return!0;const e=Number(t);return Number.isFinite(e)&&e>=0?!0:"Sifir veya daha buyuk bir deger giriniz."}],A=async()=>{if((await g.value?.validate())?.valid){i.value=!0,p.value="",m.value={};try{await N(e=>T("/apartments",{method:"POST",body:{block:o.value.block||null,floor:o.value.floor,number:o.value.number,m2:o.value.m2,arsa_payi:o.value.arsa_payi,is_active:o.value.is_active},signal:e})),await R.push("/management/apartments")}catch(e){if(q(e))return;p.value=E(e,"Daire oluşturulamadı."),m.value=F(e)}finally{i.value=!1}}};return(t,e)=>(v(),c(k,null,{default:r(()=>[a(u,{cols:"12"},{default:r(()=>[d("div",L,[e[7]||(e[7]=d("div",null,[d("h4",{class:"text-h4 mb-1"}," Yeni Daire "),d("p",{class:"text-medium-emphasis mb-0"}," Daire bilgilerini girin ")],-1)),a(V,{variant:"outlined",to:"/management/apartments"},{default:r(()=>[...e[6]||(e[6]=[b(" Listeye Don ",-1)])]),_:1})])]),_:1}),a(u,{cols:"12"},{default:r(()=>[a(I,{loading:l(i)},{default:r(()=>[a(K,null,{default:r(()=>[a(j,{ref_key:"formRef",ref:g,onSubmit:B(A,["prevent"])},{default:r(()=>[a(k,null,{default:r(()=>[l(p)?(v(),c(u,{key:0,cols:"12"},{default:r(()=>[a(P,{type:"error",variant:"tonal"},{default:r(()=>[b(y(l(p)),1)]),_:1})]),_:1})):D("",!0),a(u,{cols:"12",md:"4"},{default:r(()=>[a(f,{modelValue:l(o).block,"onUpdate:modelValue":e[0]||(e[0]=s=>l(o).block=s),label:"Blok","error-messages":l(m).block??[]},null,8,["modelValue","error-messages"])]),_:1}),a(u,{cols:"12",md:"4"},{default:r(()=>[a(f,{modelValue:l(o).floor,"onUpdate:modelValue":e[1]||(e[1]=s=>l(o).floor=s),type:"number",label:"Kat",rules:w,"error-messages":l(m).floor??[]},null,8,["modelValue","error-messages"])]),_:1}),a(u,{cols:"12",md:"4"},{default:r(()=>[a(f,{modelValue:l(o).number,"onUpdate:modelValue":e[2]||(e[2]=s=>l(o).number=s),label:t.$t("common.apartmentNo"),rules:U,"error-messages":l(m).number??[]},null,8,["modelValue","label","error-messages"])]),_:1}),a(u,{cols:"12",md:"6"},{default:r(()=>[a(f,{modelValue:l(o).m2,"onUpdate:modelValue":e[3]||(e[3]=s=>l(o).m2=s),type:"number",min:"1",step:"0.01",label:"m2",rules:x,"error-messages":l(m).m2??[]},null,8,["modelValue","error-messages"])]),_:1}),a(u,{cols:"12",md:"6"},{default:r(()=>[a(f,{modelValue:l(o).arsa_payi,"onUpdate:modelValue":e[4]||(e[4]=s=>l(o).arsa_payi=s),type:"number",min:"0",step:"0.000001",label:t.$t("common.landShare"),rules:S,"error-messages":l(m).arsa_payi??[]},null,8,["modelValue","label","error-messages"])]),_:1}),a(u,{cols:"12"},{default:r(()=>[a(z,{modelValue:l(o).is_active,"onUpdate:modelValue":e[5]||(e[5]=s=>l(o).is_active=s),label:t.$t("common.active"),color:"primary"},null,8,["modelValue","label"])]),_:1}),a(u,{cols:"12"},{default:r(()=>[d("div",Q,[a(V,{variant:"outlined",to:"/management/apartments"},{default:r(()=>[...e[8]||(e[8]=[b(" Iptal ",-1)])]),_:1}),a(V,{color:"primary",type:"submit",loading:l(i),disabled:l(i)},{default:r(()=>[b(y(t.$t("common.save")),1)]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}))}});export{se as default};
