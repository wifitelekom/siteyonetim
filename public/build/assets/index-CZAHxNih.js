import{u as N}from"./useAbortOnUnmount-D2zdVzb9.js";import{$ as k,T,x as g,p as O}from"./main-OjHNd2U9.js";import{a as S,f as D}from"./formatters-BEv4aA23.js";import{m as P}from"./statusHelpers-B7BIhNzn.js";import{V as w,a as i}from"./VRow-Ba58lXtG.js";import{V as C}from"./VCard-9RfFlHpT.js";import{V as B}from"./VCardText-YweTyZzP.js";import{V as $}from"./VSelect-CMe3Xagq.js";import{V as y}from"./VTextField-CMxHKe9w.js";import{V as q}from"./VAlert-DafHPFjN.js";import{V as z}from"./VTable-ByowNMkP.js";import{V as E}from"./VPagination-Laqr3CkN.js";import{j as I,h as n,D as K,Q as c,R as F,S as o,q as e,y as a,u as l,a8 as h,O as d,ad as U,V as x,F as L,ab as R}from"./vendor-DfCbaU-T.js";import"./vuetify-BWJcAN87.js";import"./VAvatar-BcaC_ZEa.js";import"./VList-B1ov9hmg.js";import"./VDivider-CUijZXd4.js";import"./VCheckboxBtn-B6JwM7Rr.js";import"./VSelectionControl-Ck2LTPqY.js";import"./VChip-CnrRRXXG.js";const Q={class:"d-flex gap-3 justify-end"},Y={class:"text-caption text-medium-emphasis"},G={class:"text-right text-error font-weight-medium"},H={class:"text-right"},J={key:0},W={class:"text-sm text-medium-emphasis"},ye=I({__name:"index",setup(X){N();const v=n(!1),V=n(!1),u=n(""),_=n([]),b=n([]),f=n({current_page:1,last_page:1,per_page:15,total:0}),r=n({vendor_id:null,from:"",to:"",search:""}),A=async()=>{V.value=!0;try{const m=await k("/payments/meta");b.value=m.data.vendors}catch(m){u.value=T(m,"Filtre verileri alinamadi.")}finally{V.value=!1}},p=async(m=1)=>{v.value=!0,u.value="";try{const t=await k("/payments",{query:{page:m,vendor_id:r.value.vendor_id||void 0,from:r.value.from||void 0,to:r.value.to||void 0,search:r.value.search||void 0}});_.value=t.data,f.value=t.meta}catch(t){u.value=T(t,"Odeme listesi alinamadi.")}finally{v.value=!1}},M=async()=>{await p(1)},j=async()=>{r.value={vendor_id:null,from:"",to:"",search:""},await p(1)};return K(async()=>{await Promise.allSettled([A(),p(1)])}),(m,t)=>(c(),F(w,null,{default:o(()=>[e(i,{cols:"12"},{default:o(()=>[...t[4]||(t[4]=[a("div",{class:"d-flex align-center justify-space-between mb-2"},[a("div",null,[a("h4",{class:"text-h4 mb-1"}," Odemeler "),a("p",{class:"text-medium-emphasis mb-0"}," Tedarikci odeme hareketlerini inceleyin ")])],-1)])]),_:1}),e(i,{cols:"12"},{default:o(()=>[e(C,{loading:l(V)},{default:o(()=>[e(B,null,{default:o(()=>[e(w,null,{default:o(()=>[e(i,{cols:"12",md:"3"},{default:o(()=>[e($,{modelValue:l(r).vendor_id,"onUpdate:modelValue":t[0]||(t[0]=s=>l(r).vendor_id=s),items:l(b),"item-title":"label","item-value":"id",label:"Tedarikci",clearable:""},null,8,["modelValue","items"])]),_:1}),e(i,{cols:"12",md:"3"},{default:o(()=>[e(y,{modelValue:l(r).from,"onUpdate:modelValue":t[1]||(t[1]=s=>l(r).from=s),type:"date",label:"Baslangic"},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",md:"3"},{default:o(()=>[e(y,{modelValue:l(r).to,"onUpdate:modelValue":t[2]||(t[2]=s=>l(r).to=s),type:"date",label:"Bitis"},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",md:"3"},{default:o(()=>[e(y,{modelValue:l(r).search,"onUpdate:modelValue":t[3]||(t[3]=s=>l(r).search=s),label:"Arama",placeholder:"Aciklama veya tedarikci"},null,8,["modelValue"])]),_:1}),e(i,{cols:"12"},{default:o(()=>[a("div",Q,[e(g,{variant:"outlined",onClick:j},{default:o(()=>[...t[5]||(t[5]=[h(" Temizle ",-1)])]),_:1}),e(g,{color:"primary",onClick:M},{default:o(()=>[...t[6]||(t[6]=[h(" Filtrele ",-1)])]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["loading"])]),_:1}),l(u)?(c(),F(i,{key:0,cols:"12"},{default:o(()=>[e(q,{type:"error",variant:"tonal"},{default:o(()=>[h(d(l(u)),1)]),_:1})]),_:1})):U("",!0),e(i,{cols:"12"},{default:o(()=>[e(C,{loading:l(v)},{default:o(()=>[e(z,{density:"comfortable"},{default:o(()=>[t[8]||(t[8]=a("thead",null,[a("tr",null,[a("th",null,"Tarih"),a("th",null,"Tedarikci"),a("th",null,"Yontem / Kasa"),a("th",{class:"text-right"},"Tutar"),a("th",{class:"text-right"},"Islemler")])],-1)),a("tbody",null,[(c(!0),x(L,null,R(l(_),s=>(c(),x("tr",{key:s.id},[a("td",null,d(l(S)(s.paid_at)),1),a("td",null,d(s.vendor?.name??"-"),1),a("td",null,[a("div",null,d(l(P)(s.method)),1),a("div",Y,d(s.cash_account?.name??"-"),1)]),a("td",G,d(l(D)(s.total_amount)),1),a("td",H,[e(g,{icon:"",size:"small",variant:"text",to:`/payments/${s.id}`},{default:o(()=>[e(O,{icon:"ri-eye-line"})]),_:1},8,["to"])])]))),128)),l(_).length===0?(c(),x("tr",J,[...t[7]||(t[7]=[a("td",{colspan:"5",class:"text-center text-medium-emphasis py-6"}," Kayit bulunamadi. ",-1)])])):U("",!0)])]),_:1}),e(B,{class:"d-flex justify-space-between align-center flex-wrap gap-3"},{default:o(()=>[a("span",W,"Toplam "+d(l(f).total)+" kayit",1),e(E,{"model-value":l(f).current_page,length:l(f).last_page,"total-visible":7,"onUpdate:modelValue":p},null,8,["model-value","length"])]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}))}});export{ye as default};
