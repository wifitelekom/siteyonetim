import{u as F,i as B}from"./useAbortOnUnmount-B_TyPYrd.js";import{x as R,$ as U,T as G,f as O,aH as q,aF as Vt,X as Pt,aG as wt,a4 as st,y as dt,C as Ct,O as ut,D as Dt,q as Rt,ag as At,N as It,z as Tt,F as ct,G as Et,ah as Mt,P as Lt,ae as Ft,ad as Bt}from"./main-DUODoQpR.js";import{V as Y}from"./VAlert-DIbLZTVg.js";import{V as D}from"./VChip-CzUAJTHl.js";import{V as M}from"./VTable-CDiDVqFm.js";import{V as Ut}from"./VDivider-CiCMqi-4.js";import{j,h as x,Q as p,V as _,y as t,q as l,S as o,a8 as v,O as e,u as a,R as I,ad as P,F as w,ab as E,x as N,r as X,w as mt,d as pt,N as ft,U as Gt,I as Z,f as W,t as A,p as Yt,D as jt,H as zt}from"./vendor-qaEqcc9M.js";import{f as k,a as J}from"./formatters-BEv4aA23.js";import{a as V,V as H}from"./VRow-dBMGxjTF.js";import{V as L}from"./VTextField-BgtisBQp.js";import{V as lt}from"./VCard-DEMyauu_.js";import{V as ot}from"./VCardText-lEnvPJxp.js";import{c as Ht,a as Ot,m as ht,t as qt}from"./statusHelpers-D3tNe4to.js";import{V as _t}from"./VSelect-BpDYXa0x.js";import{e as tt,u as et,p as at,j as nt,I as rt,f as Nt,h as Kt,m as Qt,ak as Xt}from"./vuetify-CYvz9UpR.js";import"./VAvatar-DfdxhEHH.js";import"./VList-BpKoOtV6.js";import"./VCheckboxBtn-B_mUIJHa.js";import"./VSelectionControl-DtdcpgRj.js";const Jt={class:"d-flex justify-end mb-4"},Wt={class:"d-flex gap-4 flex-wrap align-center mb-4"},Zt={class:"font-weight-medium text-body-1 mb-2"},te={key:1,class:"text-medium-emphasis text-body-2 mb-2"},ee=j({__name:"ReportHouseholdInfo",setup(d){const h=x(!1),c=x(""),n=x(null),{withAbort:$}=F(),S=async()=>{h.value=!0,c.value="";try{const b=await $(g=>U("/reports/household-info",{signal:g}));n.value=b.data}catch(b){if(B(b))return;c.value=G(b,"Hane bilgileri raporu alinamadi.")}finally{h.value=!1}};return(b,g)=>(p(),_("div",null,[t("div",Jt,[l(R,{color:"primary",loading:a(h),onClick:S},{default:o(()=>[v(e(b.$t("common.reportFetch")),1)]),_:1},8,["loading"])]),a(c)?(p(),I(Y,{key:0,type:"error",variant:"tonal",class:"mb-4"},{default:o(()=>[v(e(a(c)),1)]),_:1})):P("",!0),a(n)?(p(),_(w,{key:1},[t("div",Wt,[l(D,{variant:"tonal"},{default:o(()=>[v(" Toplam Daire: "+e(a(n).apartments.length),1)]),_:1})]),(p(!0),_(w,null,E(a(n).apartments,(r,m)=>(p(),_("div",{key:m,class:"mb-4"},[t("div",Zt,e(r.full_label),1),r.residents.length?(p(),I(M,{key:0,density:"compact"},{default:o(()=>[g[0]||(g[0]=t("thead",null,[t("tr",null,[t("th",null,"Ad Soyad"),t("th",null,"Telefon"),t("th",null,"E-posta"),t("th",null,"Iliski")])],-1)),t("tbody",null,[(p(!0),_(w,null,E(r.residents,(s,C)=>(p(),_("tr",{key:C},[t("td",null,e(s.name),1),t("td",null,e(s.phone??"-"),1),t("td",null,e(s.email??"-"),1),t("td",null,[l(D,{size:"small",color:s.relation_type==="owner"?"primary":"warning",variant:"tonal"},{default:o(()=>[v(e(s.relation_label),1)]),_:2},1032,["color"])])]))),128))])]),_:2},1024)):(p(),_("div",te," Sakin kaydi yok. ")),l(Ut,{class:"mt-2"})]))),128))],64)):P("",!0)]))}}),ae={class:"d-flex justify-end mb-4"},le={class:"d-flex gap-4 flex-wrap align-center mb-4"},oe={class:"font-weight-medium"},ne={class:"text-right"},se=j({__name:"ReportApartmentList",setup(d){const h=x(!1),c=x(""),n=x(null),{withAbort:$}=F(),S=async()=>{h.value=!0,c.value="";try{const b=await $(g=>U("/reports/apartment-list",{signal:g}));n.value=b.data}catch(b){if(B(b))return;c.value=G(b,"Daire listesi raporu alinamadi.")}finally{h.value=!1}};return(b,g)=>(p(),_("div",null,[t("div",ae,[l(R,{color:"primary",loading:a(h),onClick:S},{default:o(()=>[v(e(b.$t("common.reportFetch")),1)]),_:1},8,["loading"])]),a(c)?(p(),I(Y,{key:0,type:"error",variant:"tonal",class:"mb-4"},{default:o(()=>[v(e(a(c)),1)]),_:1})):P("",!0),a(n)?(p(),_(w,{key:1},[t("div",le,[l(D,{variant:"tonal"},{default:o(()=>[v(" Toplam: "+e(a(n).total_count),1)]),_:1}),l(D,{color:"success",variant:"tonal"},{default:o(()=>[v(" Aktif: "+e(a(n).active_count),1)]),_:1})]),l(M,{density:"comfortable"},{default:o(()=>[g[0]||(g[0]=t("thead",null,[t("tr",null,[t("th",null,"Daire"),t("th",null,"Grup"),t("th",null,"Kat Maliki"),t("th",null,"Kiraci"),t("th",{class:"text-right"}," m2 "),t("th",{class:"text-right"}," Bakiye "),t("th",null,"Durum")])],-1)),t("tbody",null,[(p(!0),_(w,null,E(a(n).apartments,(r,m)=>(p(),_("tr",{key:m},[t("td",oe,e(r.full_label),1),t("td",null,e(r.group??"-"),1),t("td",null,e(r.owner??"-"),1),t("td",null,e(r.tenant??"-"),1),t("td",ne,e(r.m2??"-"),1),t("td",{class:N(["text-right font-weight-medium",r.balance>0?"text-error":r.balance<0?"text-success":""])},e(a(k)(r.balance)),3),t("td",null,[l(D,{size:"small",color:r.is_active?"success":"secondary",variant:"tonal"},{default:o(()=>[v(e(r.is_active?"Aktif":"Pasif"),1)]),_:2},1032,["color"])])]))),128))])]),_:1})],64)):P("",!0)]))}}),re={class:"text-h5"},ie={class:"text-caption text-medium-emphasis"},de={class:"text-h5"},ue={class:"text-caption text-medium-emphasis"},ce={class:"text-h5"},me={class:"text-right text-success font-weight-medium"},pe={key:0},fe={class:"text-right text-error font-weight-medium"},he={key:0},_e=j({__name:"ReportBalanceSheet",setup(d){const h=x(!1),c=x(""),n=x(null),{withAbort:$}=F(),S=x({from:new Date(new Date().getFullYear(),0,1).toISOString().slice(0,10),to:new Date().toISOString().slice(0,10)}),b=async()=>{h.value=!0,c.value="";try{const g=await $(r=>U("/reports/balance-sheet",{query:{from:S.value.from,to:S.value.to},signal:r}));n.value=g.data}catch(g){if(B(g))return;c.value=G(g,"Bilanco raporu alinamadi.")}finally{h.value=!1}};return(g,r)=>(p(),_("div",null,[l(H,{class:"mb-4"},{default:o(()=>[l(V,{cols:"12",md:"4"},{default:o(()=>[l(L,{modelValue:a(S).from,"onUpdate:modelValue":r[0]||(r[0]=m=>a(S).from=m),type:"date",label:"Baslangic"},null,8,["modelValue"])]),_:1}),l(V,{cols:"12",md:"4"},{default:o(()=>[l(L,{modelValue:a(S).to,"onUpdate:modelValue":r[1]||(r[1]=m=>a(S).to=m),type:"date",label:"Bitis"},null,8,["modelValue"])]),_:1}),l(V,{cols:"12",md:"4",class:"d-flex align-end"},{default:o(()=>[l(R,{color:"primary",block:"",loading:a(h),onClick:b},{default:o(()=>[v(e(g.$t("common.reportFetch")),1)]),_:1},8,["loading"])]),_:1})]),_:1}),a(c)?(p(),I(Y,{key:0,type:"error",variant:"tonal",class:"mb-4"},{default:o(()=>[v(e(a(c)),1)]),_:1})):P("",!0),a(n)?(p(),_(w,{key:1},[l(H,{class:"mb-4"},{default:o(()=>[l(V,{cols:"12",md:"4"},{default:o(()=>[l(lt,{variant:"tonal",color:"success"},{default:o(()=>[l(ot,null,{default:o(()=>[r[2]||(r[2]=t("div",{class:"text-overline"}," TOPLAM TAHSILAT ",-1)),t("div",re,e(a(k)(a(n).income.total_collected)),1),t("div",ie," Tahakkuk: "+e(a(k)(a(n).income.total_charges)),1)]),_:1})]),_:1})]),_:1}),l(V,{cols:"12",md:"4"},{default:o(()=>[l(lt,{variant:"tonal",color:"error"},{default:o(()=>[l(ot,null,{default:o(()=>[r[3]||(r[3]=t("div",{class:"text-overline"}," TOPLAM ODEME ",-1)),t("div",de,e(a(k)(a(n).expense.total_paid)),1),t("div",ue," Gider: "+e(a(k)(a(n).expense.total_expenses)),1)]),_:1})]),_:1})]),_:1}),l(V,{cols:"12",md:"4"},{default:o(()=>[l(lt,{variant:"tonal",color:a(n).net>=0?"success":"error"},{default:o(()=>[l(ot,null,{default:o(()=>[r[4]||(r[4]=t("div",{class:"text-overline"}," NET DURUM ",-1)),t("div",ce,e(a(k)(a(n).net)),1)]),_:1})]),_:1},8,["color"])]),_:1})]),_:1}),l(H,null,{default:o(()=>[l(V,{cols:"12",md:"6"},{default:o(()=>[r[7]||(r[7]=t("h6",{class:"text-h6 mb-2"}," Gelir Dagilimi ",-1)),l(M,{density:"compact"},{default:o(()=>[r[6]||(r[6]=t("thead",null,[t("tr",null,[t("th",null,"Hesap"),t("th",{class:"text-right"}," Tutar ")])],-1)),t("tbody",null,[(p(!0),_(w,null,E(a(n).income.by_account,m=>(p(),_("tr",{key:m.account},[t("td",null,e(m.account),1),t("td",me,e(a(k)(m.total)),1)]))),128)),a(n).income.by_account.length===0?(p(),_("tr",pe,[...r[5]||(r[5]=[t("td",{colspan:"2",class:"text-center text-medium-emphasis"}," Kayit yok ",-1)])])):P("",!0)])]),_:1})]),_:1}),l(V,{cols:"12",md:"6"},{default:o(()=>[r[10]||(r[10]=t("h6",{class:"text-h6 mb-2"}," Gider Dagilimi ",-1)),l(M,{density:"compact"},{default:o(()=>[r[9]||(r[9]=t("thead",null,[t("tr",null,[t("th",null,"Hesap"),t("th",{class:"text-right"}," Tutar ")])],-1)),t("tbody",null,[(p(!0),_(w,null,E(a(n).expense.by_account,m=>(p(),_("tr",{key:m.account},[t("td",null,e(m.account),1),t("td",fe,e(a(k)(m.total)),1)]))),128)),a(n).expense.by_account.length===0?(p(),_("tr",he,[...r[8]||(r[8]=[t("td",{colspan:"2",class:"text-center text-medium-emphasis"}," Kayit yok ",-1)])])):P("",!0)])]),_:1})]),_:1})]),_:1})],64)):P("",!0)]))}}),ge={class:"d-flex gap-4 flex-wrap align-center mb-4"},ve={class:"text-right"},ye={class:"text-right"},be={class:"text-right"},$e={class:"text-right"},xe={class:"text-right text-success"},Se={class:"text-right text-error font-weight-medium"},ke=j({__name:"ReportChargeList",setup(d){const h=x(!1),c=x(""),n=x(null),{withAbort:$}=F(),{t:S}=O({useScope:"global"}),g=X({period:(s=>{const C=s.getFullYear(),u=String(s.getMonth()+1).padStart(2,"0");return`${C}-${u}`})(new Date)}),r=async()=>{h.value=!0,c.value="";try{const s=await $(C=>U("/reports/charge-list",{query:{period:g.period},signal:C}));n.value=s.data}catch(s){if(B(s))return;c.value=G(s,S("reports.chargeList.error"))}finally{h.value=!1}},m=()=>{const s=new URLSearchParams({period:g.period});window.open(`${q()}/reports/charge-list/pdf?${s.toString()}`,"_blank","noopener")};return(s,C)=>(p(),_("div",null,[l(H,null,{default:o(()=>[l(V,{cols:"12",md:"4"},{default:o(()=>[l(L,{modelValue:a(g).period,"onUpdate:modelValue":C[0]||(C[0]=u=>a(g).period=u),type:"month",label:s.$t("common.period")},null,8,["modelValue","label"])]),_:1}),l(V,{cols:"12",md:"4",class:"d-flex align-end"},{default:o(()=>[l(R,{color:"primary",block:"",loading:a(h),onClick:r},{default:o(()=>[v(e(s.$t("common.reportFetch")),1)]),_:1},8,["loading"])]),_:1})]),_:1}),a(c)?(p(),I(Y,{key:0,type:"error",variant:"tonal",class:"mb-4"},{default:o(()=>[v(e(a(c)),1)]),_:1})):P("",!0),a(n)?(p(),_(w,{key:1},[t("div",ge,[l(D,{color:"info",variant:"tonal"},{default:o(()=>[v(e(s.$t("common.total"))+": "+e(a(k)(a(n).totals.amount)),1)]),_:1}),l(D,{color:"success",variant:"tonal"},{default:o(()=>[v(e(s.$t("common.paid"))+": "+e(a(k)(a(n).totals.paid)),1)]),_:1}),l(D,{color:"error",variant:"tonal"},{default:o(()=>[v(e(s.$t("common.remaining"))+": "+e(a(k)(a(n).totals.remaining)),1)]),_:1}),l(R,{variant:"outlined","prepend-icon":"ri-download-line",onClick:m},{default:o(()=>[v(e(s.$t("common.pdf")),1)]),_:1})]),l(M,{density:"comfortable"},{default:o(()=>[t("thead",null,[t("tr",null,[t("th",null,e(s.$t("common.apartment")),1),t("th",null,e(s.$t("common.account")),1),t("th",null,e(s.$t("common.period")),1),t("th",null,e(s.$t("common.due")),1),t("th",ve,e(s.$t("common.amount")),1),t("th",ye,e(s.$t("common.paid")),1),t("th",be,e(s.$t("common.remaining")),1),t("th",null,e(s.$t("common.status")),1)])]),t("tbody",null,[(p(!0),_(w,null,E(a(n).charges,u=>(p(),_("tr",{key:u.id},[t("td",null,e(u.apartment??"-"),1),t("td",null,e(u.account??"-"),1),t("td",null,e(u.period),1),t("td",null,e(a(J)(u.due_date)),1),t("td",$e,e(a(k)(u.amount)),1),t("td",xe,e(a(k)(u.paid_amount)),1),t("td",Se,e(a(k)(u.remaining)),1),t("td",null,[l(D,{size:"small",color:a(Ht)(u.status),variant:"tonal"},{default:o(()=>[v(e(a(Ot)(u.status)),1)]),_:2},1032,["color"])])]))),128))])]),_:1})],64)):P("",!0)]))}}),Ve={class:"d-flex justify-end mb-4"},Pe={class:"d-flex gap-4 flex-wrap align-center mb-4"},we={class:"text-right"},Ce={class:"text-right"},De={class:"text-right"},Re={class:"text-right"},Ae={class:"text-right text-success"},Ie={class:"text-right text-error font-weight-medium"},Te=j({__name:"ReportReceivableStatus",setup(d){const h=x(!1),c=x(""),n=x(null),{withAbort:$}=F(),{t:S}=O({useScope:"global"}),b=async()=>{h.value=!0,c.value="";try{const r=await $(m=>U("/reports/receivable-status",{signal:m}));n.value=r.data}catch(r){if(B(r))return;c.value=G(r,S("reports.receivableStatus.error"))}finally{h.value=!1}},g=()=>{window.open(`${q()}/reports/receivable-status/pdf`,"_blank","noopener")};return(r,m)=>(p(),_("div",null,[t("div",Ve,[l(R,{color:"primary",loading:a(h),onClick:b},{default:o(()=>[v(e(r.$t("common.reportFetch")),1)]),_:1},8,["loading"])]),a(c)?(p(),I(Y,{key:0,type:"error",variant:"tonal",class:"mb-4"},{default:o(()=>[v(e(a(c)),1)]),_:1})):P("",!0),a(n)?(p(),_(w,{key:1},[t("div",Pe,[l(D,{color:"warning",variant:"tonal"},{default:o(()=>[v(e(r.$t("reports.receivableStatus.grandDebt"))+": "+e(a(k)(a(n).grand_total)),1)]),_:1}),l(R,{variant:"outlined","prepend-icon":"ri-download-line",onClick:g},{default:o(()=>[v(e(r.$t("common.pdf")),1)]),_:1})]),l(M,{density:"comfortable"},{default:o(()=>[t("thead",null,[t("tr",null,[t("th",null,e(r.$t("common.vendor")),1),t("th",we,e(r.$t("common.total")),1),t("th",Ce,e(r.$t("common.paid")),1),t("th",De,e(r.$t("common.remaining")),1)])]),t("tbody",null,[(p(!0),_(w,null,E(a(n).receivables,s=>(p(),_("tr",{key:`recv-${s.vendor}`},[t("td",null,e(s.vendor),1),t("td",Re,e(a(k)(s.total)),1),t("td",Ae,e(a(k)(s.paid)),1),t("td",Ie,e(a(k)(s.remaining)),1)]))),128))])]),_:1})],64)):P("",!0)]))}}),Ee={class:"d-flex justify-end mb-4"},Me={class:"d-flex gap-4 flex-wrap align-center mb-4"},Le={class:"text-right"},Fe={class:"text-right"},Be={class:"text-right"},Ue={class:"text-right"},Ge={class:"text-right"},Ye={class:"text-right text-success"},je={class:"text-right text-error font-weight-medium"},ze={class:"text-right"},He=j({__name:"ReportDebtStatus",setup(d){const h=x(!1),c=x(""),n=x(null),{withAbort:$}=F(),{t:S}=O({useScope:"global"}),b=async()=>{h.value=!0,c.value="";try{const r=await $(m=>U("/reports/debt-status",{signal:m}));n.value=r.data}catch(r){if(B(r))return;c.value=G(r,S("reports.debtStatus.error"))}finally{h.value=!1}},g=()=>{window.open(`${q()}/reports/debt-status/pdf`,"_blank","noopener")};return(r,m)=>(p(),_("div",null,[t("div",Ee,[l(R,{color:"primary",loading:a(h),onClick:b},{default:o(()=>[v(e(r.$t("common.reportFetch")),1)]),_:1},8,["loading"])]),a(c)?(p(),I(Y,{key:0,type:"error",variant:"tonal",class:"mb-4"},{default:o(()=>[v(e(a(c)),1)]),_:1})):P("",!0),a(n)?(p(),_(w,{key:1},[t("div",Me,[l(D,{color:"error",variant:"tonal"},{default:o(()=>[v(e(r.$t("reports.debtStatus.grandRemainingDebt"))+": "+e(a(k)(a(n).grand_total)),1)]),_:1}),l(R,{variant:"outlined","prepend-icon":"ri-download-line",onClick:g},{default:o(()=>[v(e(r.$t("common.pdf")),1)]),_:1})]),l(M,{density:"comfortable"},{default:o(()=>[t("thead",null,[t("tr",null,[t("th",null,e(r.$t("common.apartment")),1),t("th",null,e(r.$t("common.resident")),1),t("th",Le,e(r.$t("common.total")),1),t("th",Fe,e(r.$t("common.paid")),1),t("th",Be,e(r.$t("common.remaining")),1),t("th",Ue,e(r.$t("reports.debtStatus.overdue")),1)])]),t("tbody",null,[(p(!0),_(w,null,E(a(n).debts,s=>(p(),_("tr",{key:`debt-${s.apartment}-${s.resident}`},[t("td",null,e(s.apartment),1),t("td",null,e(s.resident),1),t("td",Ge,e(a(k)(s.total)),1),t("td",Ye,e(a(k)(s.paid)),1),t("td",je,e(a(k)(s.remaining)),1),t("td",ze,e(s.overdue_count),1)]))),128))])]),_:1})],64)):P("",!0)]))}}),Oe={class:"d-flex gap-4 flex-wrap align-center mb-4"},qe={class:"text-right"},Ne={class:"text-right font-weight-medium text-error"},Ke=j({__name:"ReportPayments",setup(d){const h=x(!1),c=x(""),n=x(null),{withAbort:$}=F(),{t:S}=O({useScope:"global"}),b=u=>{const i=u.getFullYear(),f=String(u.getMonth()+1).padStart(2,"0"),y=String(u.getDate()).padStart(2,"0");return`${i}-${f}-${y}`},g=new Date,r=new Date(g.getFullYear(),g.getMonth(),1),m=X({from:b(r),to:b(g)}),s=async()=>{h.value=!0,c.value="";try{const u=await $(i=>U("/reports/payments",{query:{from:m.from,to:m.to},signal:i}));n.value=u.data}catch(u){if(B(u))return;c.value=G(u,S("reports.payments.error"))}finally{h.value=!1}},C=()=>{const u=new URLSearchParams({from:m.from,to:m.to});window.open(`${q()}/reports/payments/pdf?${u.toString()}`,"_blank","noopener")};return(u,i)=>(p(),_("div",null,[l(H,null,{default:o(()=>[l(V,{cols:"12",md:"4"},{default:o(()=>[l(L,{modelValue:a(m).from,"onUpdate:modelValue":i[0]||(i[0]=f=>a(m).from=f),type:"date",label:u.$t("common.startDate")},null,8,["modelValue","label"])]),_:1}),l(V,{cols:"12",md:"4"},{default:o(()=>[l(L,{modelValue:a(m).to,"onUpdate:modelValue":i[1]||(i[1]=f=>a(m).to=f),type:"date",label:u.$t("common.endDate")},null,8,["modelValue","label"])]),_:1}),l(V,{cols:"12",md:"4",class:"d-flex align-end"},{default:o(()=>[l(R,{color:"primary",block:"",loading:a(h),onClick:s},{default:o(()=>[v(e(u.$t("common.reportFetch")),1)]),_:1},8,["loading"])]),_:1})]),_:1}),a(c)?(p(),I(Y,{key:0,type:"error",variant:"tonal",class:"mb-4"},{default:o(()=>[v(e(a(c)),1)]),_:1})):P("",!0),a(n)?(p(),_(w,{key:1},[t("div",Oe,[l(D,{color:"error",variant:"tonal"},{default:o(()=>[v(e(u.$t("reports.payments.totalPayment"))+": "+e(a(k)(a(n).total)),1)]),_:1}),l(R,{variant:"outlined","prepend-icon":"ri-download-line",onClick:C},{default:o(()=>[v(e(u.$t("common.pdf")),1)]),_:1})]),l(M,{density:"comfortable"},{default:o(()=>[t("thead",null,[t("tr",null,[t("th",null,e(u.$t("common.date")),1),t("th",null,e(u.$t("common.vendor")),1),t("th",null,e(u.$t("common.methodAndCash")),1),t("th",qe,e(u.$t("common.amount")),1)])]),t("tbody",null,[(p(!0),_(w,null,E(a(n).payments,f=>(p(),_("tr",{key:f.id},[t("td",null,e(a(J)(f.paid_at)),1),t("td",null,e(f.vendor??"-"),1),t("td",null,e(a(ht)(f.method))+" / "+e(f.cash_account??"-"),1),t("td",Ne,e(a(k)(f.total_amount)),1)]))),128))])]),_:1})],64)):P("",!0)]))}}),Qe={class:"d-flex gap-4 flex-wrap align-center mb-4"},Xe={class:"text-right"},Je={class:"text-right font-weight-medium text-success"},We=j({__name:"ReportCollections",setup(d){const h=x(!1),c=x(""),n=x(null),{withAbort:$}=F(),{t:S}=O({useScope:"global"}),b=u=>{const i=u.getFullYear(),f=String(u.getMonth()+1).padStart(2,"0"),y=String(u.getDate()).padStart(2,"0");return`${i}-${f}-${y}`},g=new Date,r=new Date(g.getFullYear(),g.getMonth(),1),m=X({from:b(r),to:b(g)}),s=async()=>{h.value=!0,c.value="";try{const u=await $(i=>U("/reports/collections",{query:{from:m.from,to:m.to},signal:i}));n.value=u.data}catch(u){if(B(u))return;c.value=G(u,S("reports.collections.error"))}finally{h.value=!1}},C=()=>{const u=new URLSearchParams({from:m.from,to:m.to});window.open(`${q()}/reports/collections/pdf?${u.toString()}`,"_blank","noopener")};return(u,i)=>(p(),_("div",null,[l(H,null,{default:o(()=>[l(V,{cols:"12",md:"4"},{default:o(()=>[l(L,{modelValue:a(m).from,"onUpdate:modelValue":i[0]||(i[0]=f=>a(m).from=f),type:"date",label:u.$t("common.startDate")},null,8,["modelValue","label"])]),_:1}),l(V,{cols:"12",md:"4"},{default:o(()=>[l(L,{modelValue:a(m).to,"onUpdate:modelValue":i[1]||(i[1]=f=>a(m).to=f),type:"date",label:u.$t("common.endDate")},null,8,["modelValue","label"])]),_:1}),l(V,{cols:"12",md:"4",class:"d-flex align-end"},{default:o(()=>[l(R,{color:"primary",block:"",loading:a(h),onClick:s},{default:o(()=>[v(e(u.$t("common.reportFetch")),1)]),_:1},8,["loading"])]),_:1})]),_:1}),a(c)?(p(),I(Y,{key:0,type:"error",variant:"tonal",class:"mb-4"},{default:o(()=>[v(e(a(c)),1)]),_:1})):P("",!0),a(n)?(p(),_(w,{key:1},[t("div",Qe,[l(D,{color:"success",variant:"tonal"},{default:o(()=>[v(e(u.$t("reports.collections.totalCollection"))+": "+e(a(k)(a(n).total)),1)]),_:1}),l(R,{variant:"outlined","prepend-icon":"ri-download-line",onClick:C},{default:o(()=>[v(e(u.$t("common.pdf")),1)]),_:1})]),l(M,{density:"comfortable"},{default:o(()=>[t("thead",null,[t("tr",null,[t("th",null,e(u.$t("reports.collections.receipt")),1),t("th",null,e(u.$t("common.date")),1),t("th",null,e(u.$t("common.apartment")),1),t("th",null,e(u.$t("common.methodAndCash")),1),t("th",Xe,e(u.$t("common.amount")),1)])]),t("tbody",null,[(p(!0),_(w,null,E(a(n).receipts,f=>(p(),_("tr",{key:f.id},[t("td",null,"#"+e(f.receipt_no),1),t("td",null,e(a(J)(f.paid_at)),1),t("td",null,e(f.apartment??"-"),1),t("td",null,e(a(ht)(f.method))+" / "+e(f.cash_account??"-"),1),t("td",Je,e(a(k)(f.total_amount)),1)]))),128))])]),_:1})],64)):P("",!0)]))}}),Ze={class:"d-flex gap-4 flex-wrap align-center mb-4"},ta={class:"text-right"},ea={class:"text-right font-weight-medium"},aa=j({__name:"ReportAccountStatement",props:{accounts:{},metaLoading:{type:Boolean,default:!1}},setup(d){const h=d,c=x(!1),n=x(""),$=x(null),{withAbort:S}=F(),{t:b}=O({useScope:"global"}),g=i=>{const f=i.getFullYear(),y=String(i.getMonth()+1).padStart(2,"0"),K=String(i.getDate()).padStart(2,"0");return`${f}-${y}-${K}`},r=new Date,m=new Date(r.getFullYear(),r.getMonth(),1),s=X({account_id:null,from:g(m),to:g(r)});mt(()=>h.accounts,i=>{if(i.length===0){s.account_id=null;return}i.some(f=>f.id===s.account_id)||(s.account_id=i[0].id)},{immediate:!0});const C=async()=>{if(s.account_id){c.value=!0,n.value="";try{const i=await S(f=>U("/reports/account-statement",{query:{account_id:s.account_id,from:s.from,to:s.to},signal:f}));$.value=i.data}catch(i){if(B(i))return;n.value=G(i,b("reports.accountStatement.error"))}finally{c.value=!1}}},u=()=>{if(!s.account_id)return;const i=new URLSearchParams({account_id:String(s.account_id),from:s.from,to:s.to});window.open(`${q()}/reports/account-statement/pdf?${i.toString()}`,"_blank","noopener")};return(i,f)=>(p(),_("div",null,[l(H,null,{default:o(()=>[l(V,{cols:"12",md:"3"},{default:o(()=>[l(_t,{modelValue:a(s).account_id,"onUpdate:modelValue":f[0]||(f[0]=y=>a(s).account_id=y),items:d.accounts,"item-title":"full_name","item-value":"id",label:i.$t("reports.accountStatement.accountingAccount"),loading:d.metaLoading},null,8,["modelValue","items","label","loading"])]),_:1}),l(V,{cols:"12",md:"3"},{default:o(()=>[l(L,{modelValue:a(s).from,"onUpdate:modelValue":f[1]||(f[1]=y=>a(s).from=y),type:"date",label:i.$t("common.startDate")},null,8,["modelValue","label"])]),_:1}),l(V,{cols:"12",md:"3"},{default:o(()=>[l(L,{modelValue:a(s).to,"onUpdate:modelValue":f[2]||(f[2]=y=>a(s).to=y),type:"date",label:i.$t("common.endDate")},null,8,["modelValue","label"])]),_:1}),l(V,{cols:"12",md:"3",class:"d-flex align-end"},{default:o(()=>[l(R,{color:"primary",block:"",loading:a(c),onClick:C},{default:o(()=>[v(e(i.$t("common.reportFetch")),1)]),_:1},8,["loading"])]),_:1})]),_:1}),a(n)?(p(),I(Y,{key:0,type:"error",variant:"tonal",class:"mb-4"},{default:o(()=>[v(e(a(n)),1)]),_:1})):P("",!0),a($)?(p(),_(w,{key:1},[t("div",Ze,[l(D,{color:"info",variant:"tonal"},{default:o(()=>[v(e(i.$t("reports.accountStatement.totalCharges"))+": "+e(a(k)(a($).totals.charges)),1)]),_:1}),l(D,{color:"error",variant:"tonal"},{default:o(()=>[v(e(i.$t("reports.accountStatement.totalExpense"))+": "+e(a(k)(a($).totals.expenses)),1)]),_:1}),l(R,{variant:"outlined","prepend-icon":"ri-download-line",onClick:u},{default:o(()=>[v(e(i.$t("common.pdf")),1)]),_:1})]),l(M,{density:"comfortable"},{default:o(()=>[t("thead",null,[t("tr",null,[t("th",null,e(i.$t("common.date")),1),t("th",null,e(i.$t("common.type")),1),t("th",null,e(i.$t("common.description")),1),t("th",ta,e(i.$t("common.amount")),1)])]),t("tbody",null,[(p(!0),_(w,null,E(a($).rows,y=>(p(),_("tr",{key:`acct-${y.date}-${y.type}-${y.amount}`},[t("td",null,e(a(J)(y.date)),1),t("td",null,[l(D,{size:"small",color:y.type==="charge"?"info":"error",variant:"tonal"},{default:o(()=>[v(e(a(qt)(y.type)),1)]),_:2},1032,["color"])]),t("td",null,e(y.description),1),t("td",ea,e(a(k)(y.amount)),1)]))),128))])]),_:1})],64)):P("",!0)]))}}),la={class:"d-flex gap-4 flex-wrap align-center mb-4"},oa={class:"text-right"},na={class:"text-right"},sa={class:"text-right"},ra={class:"text-right text-success"},ia={class:"text-right text-error"},da={class:"text-right font-weight-medium"},ua=j({__name:"ReportCashStatement",props:{cashAccounts:{},metaLoading:{type:Boolean,default:!1}},setup(d){const h=d,c=x(!1),n=x(""),$=x(null),{withAbort:S}=F(),{t:b}=O({useScope:"global"}),g=i=>{const f=i.getFullYear(),y=String(i.getMonth()+1).padStart(2,"0"),K=String(i.getDate()).padStart(2,"0");return`${f}-${y}-${K}`},r=new Date,m=new Date(r.getFullYear(),r.getMonth(),1),s=X({cash_account_id:null,from:g(m),to:g(r)});mt(()=>h.cashAccounts,i=>{if(i.length===0){s.cash_account_id=null;return}i.some(f=>f.id===s.cash_account_id)||(s.cash_account_id=i[0].id)},{immediate:!0});const C=async()=>{if(s.cash_account_id){c.value=!0,n.value="";try{const i=await S(f=>U("/reports/cash-statement",{query:{cash_account_id:s.cash_account_id,from:s.from,to:s.to},signal:f}));$.value=i.data}catch(i){if(B(i))return;n.value=G(i,b("reports.cashStatement.error"))}finally{c.value=!1}}},u=()=>{if(!s.cash_account_id)return;const i=new URLSearchParams({cash_account_id:String(s.cash_account_id),from:s.from,to:s.to});window.open(`${q()}/reports/cash-statement/pdf?${i.toString()}`,"_blank","noopener")};return(i,f)=>(p(),_("div",null,[l(H,null,{default:o(()=>[l(V,{cols:"12",md:"3"},{default:o(()=>[l(_t,{modelValue:a(s).cash_account_id,"onUpdate:modelValue":f[0]||(f[0]=y=>a(s).cash_account_id=y),items:d.cashAccounts,"item-title":"name","item-value":"id",label:i.$t("reports.cashStatement.cashAccount"),loading:d.metaLoading},null,8,["modelValue","items","label","loading"])]),_:1}),l(V,{cols:"12",md:"3"},{default:o(()=>[l(L,{modelValue:a(s).from,"onUpdate:modelValue":f[1]||(f[1]=y=>a(s).from=y),type:"date",label:i.$t("common.startDate")},null,8,["modelValue","label"])]),_:1}),l(V,{cols:"12",md:"3"},{default:o(()=>[l(L,{modelValue:a(s).to,"onUpdate:modelValue":f[2]||(f[2]=y=>a(s).to=y),type:"date",label:i.$t("common.endDate")},null,8,["modelValue","label"])]),_:1}),l(V,{cols:"12",md:"3",class:"d-flex align-end"},{default:o(()=>[l(R,{color:"primary",block:"",loading:a(c),onClick:C},{default:o(()=>[v(e(i.$t("common.reportFetch")),1)]),_:1},8,["loading"])]),_:1})]),_:1}),a(n)?(p(),I(Y,{key:0,type:"error",variant:"tonal",class:"mb-4"},{default:o(()=>[v(e(a(n)),1)]),_:1})):P("",!0),a($)?(p(),_(w,{key:1},[t("div",la,[l(D,{color:"primary",variant:"tonal"},{default:o(()=>[v(e(i.$t("reports.cashStatement.opening"))+": "+e(a(k)(a($).opening_balance)),1)]),_:1}),l(D,{color:"success",variant:"tonal"},{default:o(()=>[v(e(i.$t("reports.cashStatement.closing"))+": "+e(a(k)(a($).closing_balance)),1)]),_:1}),l(R,{variant:"outlined","prepend-icon":"ri-download-line",onClick:u},{default:o(()=>[v(e(i.$t("common.pdf")),1)]),_:1})]),l(M,{density:"comfortable"},{default:o(()=>[t("thead",null,[t("tr",null,[t("th",null,e(i.$t("common.date")),1),t("th",null,e(i.$t("common.description")),1),t("th",oa,e(i.$t("reports.cashStatement.inflow")),1),t("th",na,e(i.$t("reports.cashStatement.outflow")),1),t("th",sa,e(i.$t("reports.cashStatement.balance")),1)])]),t("tbody",null,[(p(!0),_(w,null,E(a($).transactions,y=>(p(),_("tr",{key:`cash-${y.date}-${y.description}-${y.amount}`},[t("td",null,e(a(J)(y.date)),1),t("td",null,e(y.description),1),t("td",ra,e(y.direction==="in"?a(k)(y.amount):"-"),1),t("td",ia,e(y.direction==="out"?a(k)(y.amount):"-"),1),t("td",da,e(a(k)(y.balance)),1)]))),128))])]),_:1})],64)):P("",!0)]))}}),Q=Symbol.for("vuetify:v-expansion-panel"),gt=at({...nt(),...wt()},"VExpansionPanelText"),T=tt()({name:"VExpansionPanelText",props:gt(),setup(d,h){let{slots:c}=h;const n=pt(Q);if(!n)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:$,onAfterLeave:S}=Vt(d,n.isSelected);return et(()=>l(Pt,{onAfterLeave:S},{default:()=>[ft(t("div",{class:N(["v-expansion-panel-text",d.class]),style:Z(d.style)},[c.default&&$.value&&t("div",{class:"v-expansion-panel-text__wrapper"},[c.default?.()])]),[[Gt,n.isSelected.value]])]})),{}}}),vt=at({color:String,expandIcon:{type:rt,default:"$expand"},collapseIcon:{type:rt,default:"$collapse"},hideActions:Boolean,focusable:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...nt(),...Dt()},"VExpansionPanelTitle"),it=tt()({name:"VExpansionPanelTitle",directives:{vRipple:st},props:vt(),setup(d,h){let{slots:c}=h;const n=pt(Q);if(!n)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:$,backgroundColorStyles:S}=dt(()=>d.color),{dimensionStyles:b}=Ct(d),g=W(()=>({collapseIcon:d.collapseIcon,disabled:n.disabled.value,expanded:n.isSelected.value,expandIcon:d.expandIcon,readonly:d.readonly})),r=A(()=>n.isSelected.value?d.collapseIcon:d.expandIcon);return et(()=>ft(t("button",{class:N(["v-expansion-panel-title",{"v-expansion-panel-title--active":n.isSelected.value,"v-expansion-panel-title--focusable":d.focusable,"v-expansion-panel-title--static":d.static},$.value,d.class]),style:Z([S.value,b.value,d.style]),type:"button",tabindex:n.disabled.value?-1:void 0,disabled:n.disabled.value,"aria-expanded":n.isSelected.value,onClick:d.readonly?void 0:n.toggle},[t("span",{class:"v-expansion-panel-title__overlay"},null),c.default?.(g.value),!d.hideActions&&l(ut,{defaults:{VIcon:{icon:r.value}}},{default:()=>[t("span",{class:"v-expansion-panel-title__icon"},[c.actions?.(g.value)??l(Rt,null,null)])]})]),[[st,d.ripple]])),{}}}),yt=at({title:String,text:String,bgColor:String,...Lt(),...Mt(),...Et(),...ct(),...vt(),...gt()},"VExpansionPanel"),z=tt()({name:"VExpansionPanel",props:yt(),emits:{"group:selected":d=>!0},setup(d,h){let{slots:c}=h;const n=At(d,Q),{backgroundColorClasses:$,backgroundColorStyles:S}=dt(()=>d.bgColor),{elevationClasses:b}=It(d),{roundedClasses:g}=Tt(d),r=A(()=>n?.disabled.value||d.disabled),m=W(()=>n.group.items.value.reduce((u,i,f)=>(n.group.selected.value.includes(i.id)&&u.push(f),u),[])),s=W(()=>{const u=n.group.items.value.findIndex(i=>i.id===n.id);return!n.isSelected.value&&m.value.some(i=>i-u===1)}),C=W(()=>{const u=n.group.items.value.findIndex(i=>i.id===n.id);return!n.isSelected.value&&m.value.some(i=>i-u===-1)});return Yt(Q,n),et(()=>{const u=!!(c.text||d.text),i=!!(c.title||d.title),f=it.filterProps(d),y=T.filterProps(d);return l(d.tag,{class:N(["v-expansion-panel",{"v-expansion-panel--active":n.isSelected.value,"v-expansion-panel--before-active":s.value,"v-expansion-panel--after-active":C.value,"v-expansion-panel--disabled":r.value},g.value,$.value,d.class]),style:Z([S.value,d.style])},{default:()=>[t("div",{class:N(["v-expansion-panel__shadow",...b.value])},null),l(ut,{defaults:{VExpansionPanelTitle:{...f},VExpansionPanelText:{...y}}},{default:()=>[i&&l(it,{key:"title"},{default:()=>[c.title?c.title():d.title]}),u&&l(T,{key:"text"},{default:()=>[c.text?c.text():d.text]}),c.default?.()]})]})}),{groupItem:n}}}),ca=["default","accordion","inset","popout"],ma=at({flat:Boolean,...Bt(),...Xt(yt(),["bgColor","collapseIcon","color","eager","elevation","expandIcon","focusable","hideActions","readonly","ripple","rounded","tile","static"]),...Qt(),...nt(),...ct(),variant:{type:String,default:"default",validator:d=>ca.includes(d)}},"VExpansionPanels"),pa=tt()({name:"VExpansionPanels",props:ma(),emits:{"update:modelValue":d=>!0},setup(d,h){let{slots:c}=h;const{next:n,prev:$}=Ft(d,Q),{themeClasses:S}=Nt(d),b=A(()=>d.variant&&`v-expansion-panels--variant-${d.variant}`);return Kt({VExpansionPanel:{bgColor:A(()=>d.bgColor),collapseIcon:A(()=>d.collapseIcon),color:A(()=>d.color),eager:A(()=>d.eager),elevation:A(()=>d.elevation),expandIcon:A(()=>d.expandIcon),focusable:A(()=>d.focusable),hideActions:A(()=>d.hideActions),readonly:A(()=>d.readonly),ripple:A(()=>d.ripple),rounded:A(()=>d.rounded),static:A(()=>d.static)}}),et(()=>l(d.tag,{class:N(["v-expansion-panels",{"v-expansion-panels--flat":d.flat,"v-expansion-panels--tile":d.tile},S.value,b.value,d.class]),style:Z(d.style)},{default:()=>[c.default?.({prev:$,next:n})]})),{next:n,prev:$}}}),fa={class:"d-flex align-center justify-space-between mb-2"},ha={class:"text-h4 mb-1"},_a={class:"text-medium-emphasis mb-0"},La=j({__name:"index",setup(d){const h=x([0]),c=x(!1),n=x(""),{t:$}=O({useScope:"global"}),S=x([]),b=x([]),{withAbort:g}=F();return jt(async()=>{c.value=!0,n.value="";try{const m=await g(s=>U("/reports/meta",{signal:s}));S.value=m.data.cash_accounts,b.value=m.data.accounts}catch(m){if(B(m))return;n.value=G(m,$("reports.page.errors.metaLoadFailed"))}finally{c.value=!1}}),(m,s)=>{const C=ua,u=aa,i=We,f=Ke,y=He,K=Te,bt=ke,$t=_e,xt=se,St=ee;return p(),I(H,null,{default:o(()=>[l(V,{cols:"12"},{default:o(()=>[t("div",fa,[t("div",null,[t("h4",ha,e(m.$t("reports.page.title")),1),t("p",_a,e(m.$t("reports.page.subtitle")),1)])])]),_:1}),a(n)?(p(),I(V,{key:0,cols:"12"},{default:o(()=>[l(Y,{type:"error",variant:"tonal"},{default:o(()=>[v(e(a(n)),1)]),_:1})]),_:1})):P("",!0),l(V,{cols:"12"},{default:o(()=>[l(pa,{modelValue:a(h),"onUpdate:modelValue":s[0]||(s[0]=kt=>zt(h)?h.value=kt:null),multiple:""},{default:o(()=>[l(z,{title:m.$t("reports.page.panels.cashStatement")},{default:o(()=>[l(T,null,{default:o(()=>[l(C,{"cash-accounts":a(S),"meta-loading":a(c)},null,8,["cash-accounts","meta-loading"])]),_:1})]),_:1},8,["title"]),l(z,{title:m.$t("reports.page.panels.accountStatement")},{default:o(()=>[l(T,null,{default:o(()=>[l(u,{accounts:a(b),"meta-loading":a(c)},null,8,["accounts","meta-loading"])]),_:1})]),_:1},8,["title"]),l(z,{title:m.$t("reports.page.panels.collectionReport")},{default:o(()=>[l(T,null,{default:o(()=>[l(i)]),_:1})]),_:1},8,["title"]),l(z,{title:m.$t("reports.page.panels.paymentReport")},{default:o(()=>[l(T,null,{default:o(()=>[l(f)]),_:1})]),_:1},8,["title"]),l(z,{title:m.$t("reports.page.panels.debtStatus")},{default:o(()=>[l(T,null,{default:o(()=>[l(y)]),_:1})]),_:1},8,["title"]),l(z,{title:m.$t("reports.page.panels.receivableStatus")},{default:o(()=>[l(T,null,{default:o(()=>[l(K)]),_:1})]),_:1},8,["title"]),l(z,{title:m.$t("reports.page.panels.chargeList")},{default:o(()=>[l(T,null,{default:o(()=>[l(bt)]),_:1})]),_:1},8,["title"]),l(z,{title:"Bilanco"},{default:o(()=>[l(T,null,{default:o(()=>[l($t)]),_:1})]),_:1}),l(z,{title:"Daire Listesi"},{default:o(()=>[l(T,null,{default:o(()=>[l(xt)]),_:1})]),_:1}),l(z,{title:"Hane Bilgileri"},{default:o(()=>[l(T,null,{default:o(()=>[l(St)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}});export{La as default};
