import{h as c,J as D,q as t,v as A,j as U,ac as T,Z as q,D as Z,Q as B,V as J,y as n,u as e,O as d,S as o,a8 as P,ag as W,R as z,ad as G,F as K}from"./vendor-DfCbaU-T.js";import{u as F}from"./useGenerateImageVariant-BohsaVLb.js";import{W as O,X as L,Y as Q,Z as X,e as Y,f as H,t as I,w as ee,x as te,a0 as ae,U as se,T as oe}from"./main-Btr01hqQ.js";import{V as le,r as S}from"./VForm-D0fBkA3g.js";import{V as re}from"./VNodeRenderer-Del3drp5.js";import{a as v,V as M}from"./VRow-CRn_xzm0.js";import{V as ne}from"./VCard-BmPLTxO3.js";import{V as $}from"./VCardText-H2SttjXr.js";import{V as ie}from"./VAlert-R8JWKysv.js";import{V as E}from"./VTextField-pVQuWnMO.js";import{V as N,m as ue}from"./VCheckboxBtn-DaQGgEjM.js";import{f as de,l as ce,u as me,ap as pe,p as fe,N as he}from"./vuetify-DGZOXKNZ.js";import"./VAvatar-96oJdN2D.js";import"./VSelectionControl-ClrOpdq3.js";const ge=fe({...X(),...he(ue(),["inline"])},"VCheckbox"),Ve=de()({name:"VCheckbox",inheritAttrs:!1,props:ge(),emits:{"update:modelValue":r=>!0,"update:focused":r=>!0},setup(r,b){let{attrs:y,slots:m}=b;const p=ce(r,"modelValue"),{isFocused:l,focus:k,blur:_}=O(r),w=c(),f=D();return me(()=>{const[h,u]=pe(y),g=L.filterProps(r),x=N.filterProps(r);return t(L,A({ref:w,class:["v-checkbox",r.class]},h,g,{modelValue:p.value,"onUpdate:modelValue":V=>p.value=V,id:r.id||`checkbox-${f}`,focused:l.value,style:r.style}),{...m,default:V=>{let{id:C,messagesId:R,isDisabled:s,isReadonly:a,isValid:i}=V;return t(N,A(x,{id:C.value,"aria-describedby":R.value,disabled:s.value,readonly:a.value},u,{error:i.value===!1,modelValue:p.value,"onUpdate:modelValue":j=>p.value=j,onFocus:k,onBlur:_}),m)}})}),Q({},w)}}),ve="/build/assets/auth-v2-login-illustration-bordered-dark-BJCJv2pR.png",be="/build/assets/auth-v2-login-illustration-bordered-light-SWhpvsnK.png",ye="/build/assets/auth-v2-login-illustration-dark-CkFVS8nV.png",ke="/build/assets/auth-v2-login-illustration-light-C3P37pvv.png",we="/build/assets/auth-v2-login-mask-dark-CmZEWRGb.png",_e="/build/assets/auth-v2-login-mask-light-B5zETsZk.png",xe={href:"javascript:void(0)"},Ce={class:"app-logo auth-logo"},Re={class:"app-logo-title"},Pe={class:"d-flex align-center justify-center pa-10"},Ie=["src"],Ae={class:"text-h4 mb-1"},Be={class:"text-capitalize"},Fe={class:"mb-0"},Le={class:"d-flex align-center justify-space-between flex-wrap my-6 gap-x-2"},Se={class:"text-caption text-medium-emphasis"},Ke=U({__name:"login",setup(r){const b=T(),y=q(),m=Y(),{t:p}=H({useScope:"global"}),l=c({identity:"",password:"",remember:!1}),k=c(null),_=[S()],w=[S()],f=c(!1),h=c(!1),u=c(""),g=c({}),x=F(_e,we),V=F(ke,ye,be,ve,!0),C=s=>{if(ae(s)===429){u.value=p("auth.tooManyAttempts");return}const a=se(s);g.value=a,u.value=a.identity?.[0]??oe(s,"auth.loginFailed")},R=async()=>{if((await k.value?.validate())?.valid){u.value="",g.value={},h.value=!0;try{await m.login(l.value.identity,l.value.password,l.value.remember);const a=typeof y.query.redirect=="string"?y.query.redirect:"/";await b.replace(a)}catch(a){C(a)}finally{h.value=!1}}};return Z(async()=>{await m.ensureSession(),m.isAuthenticated.value&&await b.replace("/")}),(s,a)=>(B(),J(K,null,[n("a",xe,[n("div",Ce,[t(e(re),{nodes:e(I).app.logo},null,8,["nodes"]),n("h1",Re,d(e(I).app.title),1)])]),t(M,{"no-gutters":"",class:"auth-wrapper"},{default:o(()=>[t(v,{md:"8",class:"d-none d-md-flex align-center justify-center position-relative"},{default:o(()=>[n("div",Pe,[n("img",{src:e(V),class:"auth-illustration w-100",alt:"auth-illustration"},null,8,Ie)]),t(ee,{src:e(x),class:"d-none d-md-flex auth-footer-mask",alt:"auth-mask"},null,8,["src"])]),_:1}),t(v,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:o(()=>[t(ne,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-5 pa-lg-7"},{default:o(()=>[t($,null,{default:o(()=>[n("h4",Ae,[P(d(s.$t("auth.welcome"))+", ",1),n("span",Be,d(e(I).app.title),1)]),n("p",Fe,d(s.$t("auth.loginPrompt")),1)]),_:1}),t($,null,{default:o(()=>[t(le,{ref_key:"formRef",ref:k,onSubmit:W(R,["prevent"])},{default:o(()=>[t(M,null,{default:o(()=>[e(u)?(B(),z(v,{key:0,cols:"12"},{default:o(()=>[t(ie,{type:"error",variant:"tonal"},{default:o(()=>[P(d(e(u)),1)]),_:1})]),_:1})):G("",!0),t(v,{cols:"12"},{default:o(()=>[t(E,{modelValue:e(l).identity,"onUpdate:modelValue":a[0]||(a[0]=i=>e(l).identity=i),autofocus:"",label:s.$t("auth.identityLabel"),placeholder:s.$t("auth.identityPlaceholder"),rules:_,"error-messages":e(g).identity??[]},null,8,["modelValue","label","placeholder","error-messages"])]),_:1}),t(v,{cols:"12"},{default:o(()=>[t(E,{modelValue:e(l).password,"onUpdate:modelValue":a[1]||(a[1]=i=>e(l).password=i),label:s.$t("profile.currentPassword"),placeholder:"********",type:e(f)?"text":"password",autocomplete:"current-password",rules:w,"error-messages":e(g).password??[],"append-inner-icon":e(f)?"ri-eye-off-line":"ri-eye-line","onClick:appendInner":a[2]||(a[2]=i=>f.value=!e(f))},null,8,["modelValue","label","type","error-messages","append-inner-icon"]),n("div",Le,[t(Ve,{modelValue:e(l).remember,"onUpdate:modelValue":a[3]||(a[3]=i=>e(l).remember=i),label:s.$t("auth.rememberMe")},null,8,["modelValue","label"]),n("span",Se,d(s.$t("auth.securityNotice")),1)]),t(te,{block:"",type:"submit",loading:e(h),disabled:e(h)},{default:o(()=>[P(d(s.$t("common.login")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})],64))}});export{Ke as default};
