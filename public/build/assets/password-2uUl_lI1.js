import{j as M,h as d,Q as w,R as _,S as e,q as s,y as p,O as m,u as a,ag as P,a8 as V,ad as h}from"./vendor-DfCbaU-T.js";import{f as T,x as U,$ as B,T as F,U as S}from"./main-Btr01hqQ.js";import{r as g,b as j,V as A,m as E}from"./VForm-D0fBkA3g.js";import{V as R,a as l}from"./VRow-CRn_xzm0.js";import{V as q}from"./VCard-BmPLTxO3.js";import{V as D}from"./VCardText-H2SttjXr.js";import{V as C}from"./VAlert-R8JWKysv.js";import{V as v}from"./VTextField-pVQuWnMO.js";import"./vuetify-DGZOXKNZ.js";import"./VAvatar-96oJdN2D.js";const I={class:"d-flex align-center justify-space-between mb-2"},L={class:"text-h4 mb-1"},O={class:"text-medium-emphasis mb-0"},Q={class:"d-flex justify-end"},ae=M({__name:"password",setup(z){const n=d(!1),f=d(""),c=d(""),u=d({}),{t:b}=T({useScope:"global"}),o=d({current_password:"",password:"",password_confirmation:""}),y=d(null),$=[g()],N=[g(),E(8)],k=[g(),j(()=>o.value.password,b("profile.passwordsDoNotMatch"))],x=async()=>{if((await y.value?.validate())?.valid){n.value=!0,f.value="",c.value="",u.value={};try{await B("/profile/password",{method:"PUT",body:o.value}),o.value={current_password:"",password:"",password_confirmation:""},c.value=b("profile.updated")}catch(r){f.value=F(r,"profile.updateFailed"),u.value=S(r)}finally{n.value=!1}}};return(t,r)=>(w(),_(R,null,{default:e(()=>[s(l,{cols:"12"},{default:e(()=>[p("div",I,[p("div",null,[p("h4",L,m(t.$t("navigation.passwordChange")),1),p("p",O,m(t.$t("profile.subtitle")),1)])])]),_:1}),s(l,{cols:"12"},{default:e(()=>[s(q,{loading:a(n)},{default:e(()=>[s(D,null,{default:e(()=>[s(A,{ref_key:"formRef",ref:y,onSubmit:P(x,["prevent"])},{default:e(()=>[s(R,null,{default:e(()=>[a(f)?(w(),_(l,{key:0,cols:"12"},{default:e(()=>[s(C,{type:"error",variant:"tonal"},{default:e(()=>[V(m(a(f)),1)]),_:1})]),_:1})):h("",!0),a(c)?(w(),_(l,{key:1,cols:"12"},{default:e(()=>[s(C,{type:"success",variant:"tonal"},{default:e(()=>[V(m(a(c)),1)]),_:1})]),_:1})):h("",!0),s(l,{cols:"12"},{default:e(()=>[s(v,{modelValue:a(o).current_password,"onUpdate:modelValue":r[0]||(r[0]=i=>a(o).current_password=i),type:"password",label:t.$t("profile.currentPassword"),rules:$,"error-messages":a(u).current_password??[]},null,8,["modelValue","label","error-messages"])]),_:1}),s(l,{cols:"12",md:"6"},{default:e(()=>[s(v,{modelValue:a(o).password,"onUpdate:modelValue":r[1]||(r[1]=i=>a(o).password=i),type:"password",label:t.$t("profile.newPassword"),rules:N,"error-messages":a(u).password??[]},null,8,["modelValue","label","error-messages"])]),_:1}),s(l,{cols:"12",md:"6"},{default:e(()=>[s(v,{modelValue:a(o).password_confirmation,"onUpdate:modelValue":r[2]||(r[2]=i=>a(o).password_confirmation=i),type:"password",label:t.$t("profile.repeatNewPassword"),rules:k,"error-messages":a(u).password_confirmation??[]},null,8,["modelValue","label","error-messages"])]),_:1}),s(l,{cols:"12"},{default:e(()=>[p("div",Q,[s(U,{color:"primary",type:"submit",loading:a(n),disabled:a(n)},{default:e(()=>[V(m(t.$t("common.update")),1)]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}))}});export{ae as default};
