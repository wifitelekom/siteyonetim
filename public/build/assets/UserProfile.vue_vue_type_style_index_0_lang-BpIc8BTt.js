import{e as N,r as z,p,x as B}from"./main-OjHNd2U9.js";import{j as C,ac as L,h as A,f as n,D,Q as m,R as f,S as e,q as t,y as i,O as r,u as a,a8 as d,ad as x}from"./vendor-DfCbaU-T.js";import{V as v}from"./VAvatar-BcaC_ZEa.js";import{V as I,a as l,b as c}from"./VList-B1ov9hmg.js";import{V as M}from"./VDivider-CUijZXd4.js";import{V as K}from"./VBadge-BfUq32yQ.js";const j={class:"text-caption font-weight-bold"},O={class:"d-flex gap-x-3 align-center"},R={class:"text-caption font-weight-bold"},T={class:"text-body-2 font-weight-medium text-high-emphasis"},U={class:"text-caption text-medium-emphasis"},Y={class:"text-caption text-disabled"},J=C({__name:"UserProfile",setup(q){const y=L(),o=N(),u=A(!1),g=n(()=>o.user.value?.name??"Kullanici"),V=n(()=>o.roles.value[0]??"Kullanici"),b=n(()=>o.site.value?.name??"Site atamasi yok"),h=n(()=>o.roles.value.includes("admin")||o.roles.value.includes("super-admin")),S=n(()=>o.can("sites.manage")),_=n(()=>g.value.trim().split(" ").filter(Boolean).slice(0,2).map(s=>s[0]).join("").toUpperCase()||"K"),w=async()=>{u.value=!0;try{await o.logout(),await y.replace("/login")}finally{u.value=!1}};return D(async()=>{await o.ensureSession()}),(k,s)=>(m(),f(K,{dot:"",bordered:"",location:"bottom right","offset-x":"2","offset-y":"2",color:"success",class:"user-profile-badge"},{default:e(()=>[t(v,{class:"cursor-pointer",size:"38",color:"primary",variant:"tonal"},{default:e(()=>[i("span",j,r(a(_)),1),t(z,{activator:"parent",width:"260",location:"bottom end",offset:"15px"},{default:e(()=>[t(I,null,{default:e(()=>[t(l,{class:"px-4 py-3"},{default:e(()=>[i("div",O,[t(v,{color:"primary",variant:"tonal"},{default:e(()=>[i("span",R,r(a(_)),1)]),_:1}),i("div",null,[i("div",T,r(a(g)),1),i("div",U,r(a(V)),1),i("div",Y,r(a(b)),1)])])]),_:1}),t(M,{class:"my-1"}),t(l,{class:"px-4",to:"/"},{prepend:e(()=>[t(p,{icon:"ri-home-4-line",size:"22"})]),default:e(()=>[t(c,null,{default:e(()=>[...s[0]||(s[0]=[d("Ana Sayfa",-1)])]),_:1})]),_:1}),t(l,{class:"px-4",to:"/profile/password"},{prepend:e(()=>[t(p,{icon:"ri-lock-password-line",size:"22"})]),default:e(()=>[t(c,null,{default:e(()=>[...s[1]||(s[1]=[d("Sifre Degistir",-1)])]),_:1})]),_:1}),a(h)?(m(),f(l,{key:0,class:"px-4",to:"/management/site-settings"},{prepend:e(()=>[t(p,{icon:"ri-settings-3-line",size:"22"})]),default:e(()=>[t(c,null,{default:e(()=>[...s[2]||(s[2]=[d("Site Ayarlari",-1)])]),_:1})]),_:1})):x("",!0),a(S)?(m(),f(l,{key:1,class:"px-4",to:"/super/sites"},{prepend:e(()=>[t(p,{icon:"ri-shield-user-line",size:"22"})]),default:e(()=>[t(c,null,{default:e(()=>[...s[3]||(s[3]=[d("Site Yonetimi",-1)])]),_:1})]),_:1})):x("",!0),t(l,{class:"px-4 pt-2 pb-3"},{default:e(()=>[t(B,{block:"",color:"error",size:"small","append-icon":"ri-logout-box-r-line",loading:a(u),disabled:a(u),onClick:w},{default:e(()=>[...s[4]||(s[4]=[d(" Cikis Yap ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});export{J as _};
