import{$ as _,T as C,x as v,q as w}from"./main-DUODoQpR.js";import{f as R}from"./formatters-BEv4aA23.js";import{u as S,i as A}from"./useAbortOnUnmount-B_TyPYrd.js";import{V as k,a as d}from"./VRow-dBMGxjTF.js";import{V as T}from"./VCard-DEMyauu_.js";import{V as E}from"./VCardText-lEnvPJxp.js";import{V as B}from"./VSelect-BpDYXa0x.js";import{V as q}from"./VTextField-BgtisBQp.js";import{V as M}from"./VAlert-DIbLZTVg.js";import{V as x}from"./VTable-CDiDVqFm.js";import{V as F}from"./VChip-CzUAJTHl.js";import{V as I}from"./VPagination-Dp4qKX6V.js";import{j as L,h as u,D as O,Q as V,R as N,S as o,q as t,y as l,O as n,a8 as c,u as i,ad as U,V as y,F as P,ab as Q}from"./vendor-qaEqcc9M.js";import"./vuetify-CYvz9UpR.js";import"./VAvatar-DfdxhEHH.js";import"./VList-BpKoOtV6.js";import"./VDivider-CiCMqi-4.js";import"./VCheckboxBtn-B_mUIJHa.js";import"./VSelectionControl-DtdcpgRj.js";const Y={class:"d-flex align-center justify-space-between mb-2"},G={class:"text-medium-emphasis mb-0"},H={class:"d-flex gap-3 justify-end"},J={class:"text-right"},K={class:"text-right"},W={key:0},X={colspan:"7",class:"text-center text-medium-emphasis py-6"},Z={class:"text-sm text-medium-emphasis"},$e=L({__name:"index",setup(ee){const{withAbort:$}=S(),g=u(!1),h=u(null),m=u(""),b=u([]),p=u({current_page:1,last_page:1,per_page:20,total:0}),r=u({scope:null,is_active:null,search:""}),f=async(e=1)=>{g.value=!0,m.value="";try{const a=await $(s=>_("/templates/aidat",{query:{page:e,scope:r.value.scope||void 0,is_active:r.value.is_active===null?void 0:r.value.is_active?1:0,search:r.value.search||void 0},signal:s}));b.value=a.data,p.value=a.meta}catch(a){if(A(a))return;m.value=C(a,"Aidat şablonları alınamadı.")}finally{g.value=!1}},j=async()=>{await f(1)},z=async()=>{r.value={scope:null,is_active:null,search:""},await f(1)},D=async e=>{h.value=e.id,m.value="";try{await $(a=>_(`/templates/aidat/${e.id}`,{method:"DELETE",signal:a})),await f(p.value.current_page)}catch(a){if(A(a))return;m.value=C(a,"Aidat şablonu silinemedi.")}finally{h.value=null}};return O(()=>f(1)),(e,a)=>(V(),N(k,null,{default:o(()=>[t(d,{cols:"12"},{default:o(()=>[l("div",Y,[l("div",null,[a[3]||(a[3]=l("h4",{class:"text-h4 mb-1"}," Aidat Şablonları ",-1)),l("p",G,n(e.$t("pages.aidatTemplates.indexSubtitle")),1)]),t(v,{color:"primary","prepend-icon":"ri-add-line",to:"/templates/aidat/create"},{default:o(()=>[...a[4]||(a[4]=[c(" Yeni Şablon ",-1)])]),_:1})])]),_:1}),t(d,{cols:"12"},{default:o(()=>[t(T,null,{default:o(()=>[t(E,null,{default:o(()=>[t(k,null,{default:o(()=>[t(d,{cols:"12",md:"3"},{default:o(()=>[t(B,{modelValue:i(r).scope,"onUpdate:modelValue":a[0]||(a[0]=s=>i(r).scope=s),items:[{title:e.$t("common.allApartments"),value:"all"},{title:e.$t("common.selectedApartments"),value:"selected"}],label:e.$t("common.scope"),clearable:""},null,8,["modelValue","items","label"])]),_:1}),t(d,{cols:"12",md:"3"},{default:o(()=>[t(B,{modelValue:i(r).is_active,"onUpdate:modelValue":a[1]||(a[1]=s=>i(r).is_active=s),items:[{title:e.$t("common.active"),value:!0},{title:e.$t("common.passive"),value:!1}],label:e.$t("common.status"),clearable:""},null,8,["modelValue","items","label"])]),_:1}),t(d,{cols:"12",md:"6"},{default:o(()=>[t(q,{modelValue:i(r).search,"onUpdate:modelValue":a[2]||(a[2]=s=>i(r).search=s),label:e.$t("common.search"),placeholder:e.$t("common.templateNamePlaceholder")},null,8,["modelValue","label","placeholder"])]),_:1}),t(d,{cols:"12"},{default:o(()=>[l("div",H,[t(v,{variant:"outlined",onClick:z},{default:o(()=>[c(n(e.$t("common.clear")),1)]),_:1}),t(v,{color:"primary",onClick:j},{default:o(()=>[c(n(e.$t("common.filter")),1)]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(m)?(V(),N(d,{key:0,cols:"12"},{default:o(()=>[t(M,{type:"error",variant:"tonal"},{default:o(()=>[c(n(i(m)),1)]),_:1})]),_:1})):U("",!0),t(d,{cols:"12"},{default:o(()=>[t(T,{loading:i(g)},{default:o(()=>[t(x,{density:"comfortable"},{default:o(()=>[l("thead",null,[l("tr",null,[l("th",null,n(e.$t("common.template")),1),l("th",null,n(e.$t("common.account")),1),a[5]||(a[5]=l("th",{class:"text-right"}," Tutar ",-1)),l("th",null,n(e.$t("common.due")),1),l("th",null,n(e.$t("common.scope")),1),l("th",null,n(e.$t("common.status")),1),a[6]||(a[6]=l("th",{class:"text-right"}," İşlemler ",-1))])]),l("tbody",null,[(V(!0),y(P,null,Q(i(b),s=>(V(),y("tr",{key:s.id},[l("td",null,n(s.name),1),l("td",null,n(s.account?.label??"-"),1),l("td",J,n(i(R)(s.amount)),1),l("td",null,n(e.$t("common.nthDay",{day:s.due_day})),1),l("td",null,[t(F,{size:"small",color:s.scope==="all"?"info":"warning",variant:"tonal"},{default:o(()=>[c(n(s.scope==="all"?e.$t("common.allApartments"):e.$t("common.apartmentCount",{count:s.apartments_count})),1)]),_:2},1032,["color"])]),l("td",null,[t(F,{size:"small",color:s.is_active?"success":"secondary",variant:"tonal"},{default:o(()=>[c(n(s.is_active?e.$t("common.active"):e.$t("common.passive")),1)]),_:2},1032,["color"])]),l("td",K,[t(v,{icon:"",size:"small",variant:"text",to:`/templates/aidat/${s.id}/edit`},{default:o(()=>[t(w,{icon:"ri-edit-line"})]),_:1},8,["to"]),t(v,{icon:"",size:"small",variant:"text",color:"error",loading:i(h)===s.id,disabled:i(h)===s.id,onClick:te=>D(s)},{default:o(()=>[t(w,{icon:"ri-delete-bin-line"})]),_:1},8,["loading","disabled","onClick"])])]))),128)),i(b).length===0?(V(),y("tr",W,[l("td",X,n(e.$t("common.noRecords")),1)])):U("",!0)])]),_:1}),t(E,{class:"d-flex justify-space-between align-center flex-wrap gap-3"},{default:o(()=>[l("span",Z,n(e.$t("common.totalRecords",{count:i(p).total})),1),t(I,{"model-value":i(p).current_page,length:i(p).last_page,"total-visible":7,"onUpdate:modelValue":f},null,8,["model-value","length"])]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}))}});export{$e as default};
