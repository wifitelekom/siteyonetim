import{j as F,h as d,D as M,Q as v,R as V,S as a,q as s,y as c,O as g,ag as N,u as e,a8 as _,ad as y}from"./vendor-DfCbaU-T.js";import{f as U,$ as b,T as S,x as A,U as B}from"./main-Btr01hqQ.js";import{V as j,r as E}from"./VForm-D0fBkA3g.js";import{V as w,a as r}from"./VRow-CRn_xzm0.js";import{V as q}from"./VCard-BmPLTxO3.js";import{V as D}from"./VCardText-H2SttjXr.js";import{V as x}from"./VAlert-R8JWKysv.js";import{V as $}from"./VTextField-pVQuWnMO.js";import{V as I}from"./VTextarea-DCdZ-5SO.js";import"./vuetify-DGZOXKNZ.js";import"./VAvatar-96oJdN2D.js";const O={class:"d-flex align-center justify-space-between mb-2"},P={class:"text-h4 mb-1"},Q={class:"text-medium-emphasis mb-0"},z={class:"d-flex justify-end"},te=F({__name:"site-settings",setup(G){const{t:C}=U({useScope:"global"}),u=d(!1),n=d(!1),i=d(""),m=d(""),f=d({}),l=d({name:"",phone:"",address:""}),h=d(null),R=[E()],T=async()=>{u.value=!0,i.value="",m.value="";try{const t=await b("/site-settings");l.value={name:t.data.name,phone:t.data.phone??"",address:t.data.address??""}}catch(t){i.value=S(t,"siteSettings.loadFailed")}finally{u.value=!1}},k=async()=>{if((await h.value?.validate())?.valid){n.value=!0,i.value="",m.value="",f.value={};try{await b("/site-settings",{method:"PUT",body:{name:l.value.name,phone:l.value.phone||null,address:l.value.address||null}}),m.value=C("siteSettings.updated")}catch(o){i.value=S(o,"siteSettings.updateFailed"),f.value=B(o)}finally{n.value=!1}}};return M(T),(t,o)=>(v(),V(w,null,{default:a(()=>[s(r,{cols:"12"},{default:a(()=>[c("div",O,[c("div",null,[c("h4",P,g(t.$t("navigation.siteSettings")),1),c("p",Q,g(t.$t("siteSettings.subtitle")),1)])])]),_:1}),s(r,{cols:"12"},{default:a(()=>[s(q,null,{default:a(()=>[s(D,null,{default:a(()=>[s(j,{ref_key:"formRef",ref:h,onSubmit:N(k,["prevent"])},{default:a(()=>[s(w,null,{default:a(()=>[e(i)?(v(),V(r,{key:0,cols:"12"},{default:a(()=>[s(x,{type:"error",variant:"tonal"},{default:a(()=>[_(g(e(i)),1)]),_:1})]),_:1})):y("",!0),e(m)?(v(),V(r,{key:1,cols:"12"},{default:a(()=>[s(x,{type:"success",variant:"tonal"},{default:a(()=>[_(g(e(m)),1)]),_:1})]),_:1})):y("",!0),s(r,{cols:"12"},{default:a(()=>[s($,{modelValue:e(l).name,"onUpdate:modelValue":o[0]||(o[0]=p=>e(l).name=p),label:t.$t("common.siteName"),rules:R,"error-messages":e(f).name??[],loading:e(u)||e(n)},null,8,["modelValue","label","error-messages","loading"])]),_:1}),s(r,{cols:"12"},{default:a(()=>[s($,{modelValue:e(l).phone,"onUpdate:modelValue":o[1]||(o[1]=p=>e(l).phone=p),label:t.$t("common.phone"),"error-messages":e(f).phone??[],loading:e(u)||e(n)},null,8,["modelValue","label","error-messages","loading"])]),_:1}),s(r,{cols:"12"},{default:a(()=>[s(I,{modelValue:e(l).address,"onUpdate:modelValue":o[2]||(o[2]=p=>e(l).address=p),label:"Adres",rows:"3","error-messages":e(f).address??[],loading:e(u)||e(n)},null,8,["modelValue","error-messages","loading"])]),_:1}),s(r,{cols:"12"},{default:a(()=>[c("div",z,[s(A,{color:"primary",type:"submit",loading:e(n),disabled:e(n)},{default:a(()=>[_(g(t.$t("common.update")),1)]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1}))}});export{te as default};
