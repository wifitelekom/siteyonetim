import{j as C,h as n,Q as y,R as v,S as l,ac as D,q as a,y as d,a8 as b,u as r,ag as S,O as B,ad as T}from"./vendor-DfCbaU-T.js";import{x as V,$ as E,T as F,U as j}from"./main-OjHNd2U9.js";import{V as K,r as c,p as M}from"./VForm-CtC6ldpE.js";import{u as O,i as P}from"./useAbortOnUnmount-D2zdVzb9.js";import{V as _,a as i}from"./VRow-Ba58lXtG.js";import{V as q}from"./VCard-9RfFlHpT.js";import{V as I}from"./VCardText-YweTyZzP.js";import{V as $}from"./VAlert-DafHPFjN.js";import{V as f}from"./VTextField-CMxHKe9w.js";import{V as z}from"./VSwitch-XgqsY1US.js";import"./vuetify-BWJcAN87.js";import"./VAvatar-BcaC_ZEa.js";import"./VSelectionControl-Ck2LTPqY.js";const L={class:"d-flex align-center justify-space-between mb-2"},Q={class:"d-flex justify-end gap-3"},se=C({__name:"create",setup(Y){const k=D(),{withAbort:x}=O(),m=n(!1),p=n(""),u=n({}),t=n({block:"",floor:null,number:"",m2:null,arsa_payi:null,is_active:!0}),g=n(null),R=[c(),o=>Number.isInteger(Number(o))?!0:"Kat bilgisi tam sayi olmalidir."],N=[c()],w=[o=>o==null||o===""?!0:M()(o)],A=[o=>{if(o==null||o==="")return!0;const e=Number(o);return Number.isFinite(e)&&e>=0?!0:"Sifir veya daha buyuk bir deger giriniz."}],U=async()=>{if((await g.value?.validate())?.valid){m.value=!0,p.value="",u.value={};try{await x(e=>E("/apartments",{method:"POST",body:{block:t.value.block||null,floor:t.value.floor,number:t.value.number,m2:t.value.m2,arsa_payi:t.value.arsa_payi,is_active:t.value.is_active},signal:e})),await k.push("/management/apartments")}catch(e){if(P(e))return;p.value=F(e,"Daire olusturulamadi."),u.value=j(e)}finally{m.value=!1}}};return(o,e)=>(y(),v(_,null,{default:l(()=>[a(i,{cols:"12"},{default:l(()=>[d("div",L,[e[7]||(e[7]=d("div",null,[d("h4",{class:"text-h4 mb-1"}," Yeni Daire "),d("p",{class:"text-medium-emphasis mb-0"}," Daire bilgilerini girin ")],-1)),a(V,{variant:"outlined",to:"/management/apartments"},{default:l(()=>[...e[6]||(e[6]=[b(" Listeye Don ",-1)])]),_:1})])]),_:1}),a(i,{cols:"12"},{default:l(()=>[a(q,{loading:r(m)},{default:l(()=>[a(I,null,{default:l(()=>[a(K,{ref_key:"formRef",ref:g,onSubmit:S(U,["prevent"])},{default:l(()=>[a(_,null,{default:l(()=>[r(p)?(y(),v(i,{key:0,cols:"12"},{default:l(()=>[a($,{type:"error",variant:"tonal"},{default:l(()=>[b(B(r(p)),1)]),_:1})]),_:1})):T("",!0),a(i,{cols:"12",md:"4"},{default:l(()=>[a(f,{modelValue:r(t).block,"onUpdate:modelValue":e[0]||(e[0]=s=>r(t).block=s),label:"Blok","error-messages":r(u).block??[]},null,8,["modelValue","error-messages"])]),_:1}),a(i,{cols:"12",md:"4"},{default:l(()=>[a(f,{modelValue:r(t).floor,"onUpdate:modelValue":e[1]||(e[1]=s=>r(t).floor=s),type:"number",label:"Kat",rules:R,"error-messages":r(u).floor??[]},null,8,["modelValue","error-messages"])]),_:1}),a(i,{cols:"12",md:"4"},{default:l(()=>[a(f,{modelValue:r(t).number,"onUpdate:modelValue":e[2]||(e[2]=s=>r(t).number=s),label:"Daire No",rules:N,"error-messages":r(u).number??[]},null,8,["modelValue","error-messages"])]),_:1}),a(i,{cols:"12",md:"6"},{default:l(()=>[a(f,{modelValue:r(t).m2,"onUpdate:modelValue":e[3]||(e[3]=s=>r(t).m2=s),type:"number",min:"1",step:"0.01",label:"m2",rules:w,"error-messages":r(u).m2??[]},null,8,["modelValue","error-messages"])]),_:1}),a(i,{cols:"12",md:"6"},{default:l(()=>[a(f,{modelValue:r(t).arsa_payi,"onUpdate:modelValue":e[4]||(e[4]=s=>r(t).arsa_payi=s),type:"number",min:"0",step:"0.000001",label:"Arsa Payi",rules:A,"error-messages":r(u).arsa_payi??[]},null,8,["modelValue","error-messages"])]),_:1}),a(i,{cols:"12"},{default:l(()=>[a(z,{modelValue:r(t).is_active,"onUpdate:modelValue":e[5]||(e[5]=s=>r(t).is_active=s),label:"Aktif",color:"primary"},null,8,["modelValue"])]),_:1}),a(i,{cols:"12"},{default:l(()=>[d("div",Q,[a(V,{variant:"outlined",to:"/management/apartments"},{default:l(()=>[...e[8]||(e[8]=[b(" Iptal ",-1)])]),_:1}),a(V,{color:"primary",type:"submit",loading:r(m),disabled:r(m)},{default:l(()=>[...e[9]||(e[9]=[b(" Kaydet ",-1)])]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}))}});export{se as default};
