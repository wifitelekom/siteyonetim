import{j as q,h as d,D as $,Q as R,R as x,S as r,ac as G,q as t,y as f,a8 as c,u as a,ag as H,O as I,ad as K}from"./vendor-DfCbaU-T.js";import{u as L,i as w}from"./useAbortOnUnmount-D2zdVzb9.js";import{$ as U,T as A,x as g,U as P}from"./main-OjHNd2U9.js";import{V as Q,r as n,p as Y}from"./VForm-CtC6ldpE.js";import{V as D,a as s}from"./VRow-Ba58lXtG.js";import{V as z}from"./VCard-9RfFlHpT.js";import{V as J}from"./VCardText-YweTyZzP.js";import{V as W}from"./VAlert-DafHPFjN.js";import{V as v}from"./VSelect-CMe3Xagq.js";import{V as _}from"./VTextField-CMxHKe9w.js";import{V as X}from"./VTextarea-CHmrCRFp.js";import"./vuetify-BWJcAN87.js";import"./VAvatar-BcaC_ZEa.js";import"./VList-B1ov9hmg.js";import"./VDivider-CUijZXd4.js";import"./VCheckboxBtn-B6JwM7Rr.js";import"./VSelectionControl-Ck2LTPqY.js";import"./VChip-CnrRRXXG.js";const Z={class:"d-flex align-center justify-space-between mb-2"},ee={class:"d-flex justify-end gap-3"},be=q({__name:"create",setup(ae){const{withAbort:y}=L(),C=G(),m=d(!1),V=d(!1),p=d(""),u=d({}),b=d([]),k=d([]),T=d([]),l=d({apartment_id:null,account_id:null,charge_type:"aidat",period:"",due_date:"",amount:null,description:""}),h=d(null),M=[n()],N=[n()],S=[n()],B=[n()],E=[n()],F=[n(),Y()],j=async()=>{V.value=!0;try{const i=await y(e=>U("/charges/meta",{signal:e}));b.value=i.data.apartments,k.value=i.data.accounts,T.value=i.data.charge_types}catch(i){if(w(i))return;p.value=A(i,"Form verileri alinamadi.")}finally{V.value=!1}},O=async()=>{if((await h.value?.validate())?.valid){m.value=!0,p.value="",u.value={};try{await y(e=>U("/charges",{method:"POST",body:{apartment_id:l.value.apartment_id,account_id:l.value.account_id,charge_type:l.value.charge_type,period:l.value.period,due_date:l.value.due_date,amount:l.value.amount,description:l.value.description||null},signal:e})),await C.push("/charges")}catch(e){if(w(e))return;p.value=A(e,"Tahakkuk olusturulamadi."),u.value=P(e)}finally{m.value=!1}}};return $(j),(i,e)=>(R(),x(D,null,{default:r(()=>[t(s,{cols:"12"},{default:r(()=>[f("div",Z,[e[8]||(e[8]=f("div",null,[f("h4",{class:"text-h4 mb-1"}," Yeni Tahakkuk "),f("p",{class:"text-medium-emphasis mb-0"}," Daireye yeni tahakkuk kaydi olusturun ")],-1)),t(g,{variant:"outlined",to:"/charges"},{default:r(()=>[...e[7]||(e[7]=[c(" Listeye Don ",-1)])]),_:1})])]),_:1}),t(s,{cols:"12"},{default:r(()=>[t(z,{loading:a(V)||a(m)},{default:r(()=>[t(J,null,{default:r(()=>[t(Q,{ref_key:"formRef",ref:h,onSubmit:H(O,["prevent"])},{default:r(()=>[t(D,null,{default:r(()=>[a(p)?(R(),x(s,{key:0,cols:"12"},{default:r(()=>[t(W,{type:"error",variant:"tonal"},{default:r(()=>[c(I(a(p)),1)]),_:1})]),_:1})):K("",!0),t(s,{cols:"12",md:"6"},{default:r(()=>[t(v,{modelValue:a(l).apartment_id,"onUpdate:modelValue":e[0]||(e[0]=o=>a(l).apartment_id=o),items:a(b),"item-title":"label","item-value":"id",label:"Daire",rules:M,"error-messages":a(u).apartment_id??[]},null,8,["modelValue","items","error-messages"])]),_:1}),t(s,{cols:"12",md:"6"},{default:r(()=>[t(v,{modelValue:a(l).account_id,"onUpdate:modelValue":e[1]||(e[1]=o=>a(l).account_id=o),items:a(k),"item-title":"label","item-value":"id",label:"Gelir Hesabi",rules:N,"error-messages":a(u).account_id??[]},null,8,["modelValue","items","error-messages"])]),_:1}),t(s,{cols:"12",md:"4"},{default:r(()=>[t(v,{modelValue:a(l).charge_type,"onUpdate:modelValue":e[2]||(e[2]=o=>a(l).charge_type=o),items:a(T),"item-title":"label","item-value":"value",label:"Tahakkuk Turu",rules:S,"error-messages":a(u).charge_type??[]},null,8,["modelValue","items","error-messages"])]),_:1}),t(s,{cols:"12",md:"4"},{default:r(()=>[t(_,{modelValue:a(l).period,"onUpdate:modelValue":e[3]||(e[3]=o=>a(l).period=o),type:"month",label:"Donem",rules:B,"error-messages":a(u).period??[]},null,8,["modelValue","error-messages"])]),_:1}),t(s,{cols:"12",md:"4"},{default:r(()=>[t(_,{modelValue:a(l).due_date,"onUpdate:modelValue":e[4]||(e[4]=o=>a(l).due_date=o),type:"date",label:"Vade Tarihi",rules:E,"error-messages":a(u).due_date??[]},null,8,["modelValue","error-messages"])]),_:1}),t(s,{cols:"12",md:"6"},{default:r(()=>[t(_,{modelValue:a(l).amount,"onUpdate:modelValue":e[5]||(e[5]=o=>a(l).amount=o),type:"number",step:"0.01",min:"0",label:"Tutar",rules:F,"error-messages":a(u).amount??[]},null,8,["modelValue","error-messages"])]),_:1}),t(s,{cols:"12"},{default:r(()=>[t(X,{modelValue:a(l).description,"onUpdate:modelValue":e[6]||(e[6]=o=>a(l).description=o),label:"Aciklama",rows:"3","error-messages":a(u).description??[]},null,8,["modelValue","error-messages"])]),_:1}),t(s,{cols:"12"},{default:r(()=>[f("div",ee,[t(g,{variant:"outlined",to:"/charges"},{default:r(()=>[...e[9]||(e[9]=[c(" Iptal ",-1)])]),_:1}),t(g,{color:"primary",type:"submit",loading:a(m),disabled:a(m)},{default:r(()=>[...e[10]||(e[10]=[c(" Kaydet ",-1)])]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}))}});export{be as default};
