import{j as A,h as m,Q as b,R as _,S as r,ac as k,q as a,y as u,a8 as p,u as l,ag as U,O as C,ad as E}from"./vendor-DfCbaU-T.js";import{x as g,$ as N,T as B,U as F}from"./main-OjHNd2U9.js";import{u as S,i as j}from"./useAbortOnUnmount-D2zdVzb9.js";import{V as M,r as O,e as h}from"./VForm-CtC6ldpE.js";import{V as x,a as t}from"./VRow-Ba58lXtG.js";import{V as q}from"./VCard-9RfFlHpT.js";import{V as D}from"./VCardText-YweTyZzP.js";import{V as $}from"./VAlert-DafHPFjN.js";import{V}from"./VTextField-CMxHKe9w.js";import{V as I}from"./VTextarea-CHmrCRFp.js";import"./vuetify-BWJcAN87.js";import"./VAvatar-BcaC_ZEa.js";const K={class:"d-flex align-center justify-space-between mb-2"},L={class:"d-flex justify-end gap-3"},re=A({__name:"create",setup(P){const{withAbort:y}=S(),c=k(),d=m(!1),f=m(""),n=m({}),o=m({name:"",tax_no:"",phone:"",email:"",address:""}),v=m(null),T=[O()],w=[i=>typeof i!="string"||i.trim().length===0?!0:h()(i)],R=async()=>{if((await v.value?.validate())?.valid){d.value=!0,f.value="",n.value={};try{await y(e=>N("/vendors",{method:"POST",body:{name:o.value.name,tax_no:o.value.tax_no||null,phone:o.value.phone||null,email:o.value.email||null,address:o.value.address||null},signal:e})),await c.push("/management/vendors")}catch(e){if(j(e))return;f.value=B(e,"Tedarikci olusturulamadi."),n.value=F(e)}finally{d.value=!1}}};return(i,e)=>(b(),_(x,null,{default:r(()=>[a(t,{cols:"12"},{default:r(()=>[u("div",K,[e[6]||(e[6]=u("div",null,[u("h4",{class:"text-h4 mb-1"}," Yeni Tedarikci "),u("p",{class:"text-medium-emphasis mb-0"}," Tedarikci bilgilerini girin ")],-1)),a(g,{variant:"outlined",to:"/management/vendors"},{default:r(()=>[...e[5]||(e[5]=[p(" Listeye Don ",-1)])]),_:1})])]),_:1}),a(t,{cols:"12"},{default:r(()=>[a(q,{loading:l(d)},{default:r(()=>[a(D,null,{default:r(()=>[a(M,{ref_key:"formRef",ref:v,onSubmit:U(R,["prevent"])},{default:r(()=>[a(x,null,{default:r(()=>[l(f)?(b(),_(t,{key:0,cols:"12"},{default:r(()=>[a($,{type:"error",variant:"tonal"},{default:r(()=>[p(C(l(f)),1)]),_:1})]),_:1})):E("",!0),a(t,{cols:"12",md:"6"},{default:r(()=>[a(V,{modelValue:l(o).name,"onUpdate:modelValue":e[0]||(e[0]=s=>l(o).name=s),label:"Firma Adi",rules:T,"error-messages":l(n).name??[]},null,8,["modelValue","error-messages"])]),_:1}),a(t,{cols:"12",md:"6"},{default:r(()=>[a(V,{modelValue:l(o).tax_no,"onUpdate:modelValue":e[1]||(e[1]=s=>l(o).tax_no=s),label:"Vergi No","error-messages":l(n).tax_no??[]},null,8,["modelValue","error-messages"])]),_:1}),a(t,{cols:"12",md:"6"},{default:r(()=>[a(V,{modelValue:l(o).phone,"onUpdate:modelValue":e[2]||(e[2]=s=>l(o).phone=s),label:"Telefon","error-messages":l(n).phone??[]},null,8,["modelValue","error-messages"])]),_:1}),a(t,{cols:"12",md:"6"},{default:r(()=>[a(V,{modelValue:l(o).email,"onUpdate:modelValue":e[3]||(e[3]=s=>l(o).email=s),type:"email",label:"E-posta",rules:w,"error-messages":l(n).email??[]},null,8,["modelValue","error-messages"])]),_:1}),a(t,{cols:"12"},{default:r(()=>[a(I,{modelValue:l(o).address,"onUpdate:modelValue":e[4]||(e[4]=s=>l(o).address=s),label:"Adres",rows:"3","error-messages":l(n).address??[]},null,8,["modelValue","error-messages"])]),_:1}),a(t,{cols:"12"},{default:r(()=>[u("div",L,[a(g,{variant:"outlined",to:"/management/vendors"},{default:r(()=>[...e[7]||(e[7]=[p(" Iptal ",-1)])]),_:1}),a(g,{color:"primary",type:"submit",loading:l(d),disabled:l(d)},{default:r(()=>[...e[8]||(e[8]=[p(" Kaydet ",-1)])]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}))}});export{re as default};
