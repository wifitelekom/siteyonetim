import{j as A,ac as F,Z as j,h as u,D as N,Q as _,V as P,y as l,q as t,u as e,O as i,S as o,a8 as h,ag as D,R as T,ad as q,F as U}from"./vendor-qaEqcc9M.js";import{u as w}from"./useGenerateImageVariant-CcZe-eFk.js";import{e as Z,f as z,t as V,w as G,x as J,Y as W,U as K,T as O}from"./main-DUODoQpR.js";import{V as Q,r as k}from"./VForm-AfrkaUJk.js";import{V as Y}from"./VNodeRenderer-hp5KsiRw.js";import{a as p,V as x}from"./VRow-dBMGxjTF.js";import{V as H}from"./VCard-DEMyauu_.js";import{V as C}from"./VCardText-lEnvPJxp.js";import{V as X}from"./VAlert-DIbLZTVg.js";import{V as L}from"./VTextField-BgtisBQp.js";import{V as ee}from"./VCheckbox-tAy4A4xc.js";import"./vuetify-CYvz9UpR.js";import"./VAvatar-DfdxhEHH.js";import"./VCheckboxBtn-B_mUIJHa.js";import"./VSelectionControl-DtdcpgRj.js";const te="/build/assets/auth-v2-login-illustration-bordered-dark-BJCJv2pR.png",ae="/build/assets/auth-v2-login-illustration-bordered-light-SWhpvsnK.png",se="/build/assets/auth-v2-login-illustration-dark-CkFVS8nV.png",oe="/build/assets/auth-v2-login-illustration-light-C3P37pvv.png",le="/build/assets/auth-v2-login-mask-dark-CmZEWRGb.png",re="/build/assets/auth-v2-login-mask-light-B5zETsZk.png",ie={href:"javascript:void(0)"},ne={class:"app-logo auth-logo"},ue={class:"app-logo-title"},de={class:"d-flex align-center justify-center pa-10"},pe=["src"],me={class:"text-h4 mb-1"},ce={class:"text-capitalize"},fe={class:"mb-0"},ge={class:"d-flex align-center justify-space-between flex-wrap my-6 gap-x-2"},he={class:"text-caption text-medium-emphasis"},$e=A({__name:"login",setup(Ve){const v=F(),b=j(),g=Z(),{t:R}=z({useScope:"global"}),r=u({identity:"",password:"",remember:!1}),y=u(null),S=[k()],B=[k()],m=u(!1),c=u(!1),d=u(""),f=u({}),E=w(re,le),I=w(oe,se,ae,te,!0),M=s=>{if(W(s)===429){d.value=R("auth.tooManyAttempts");return}const a=K(s);f.value=a,d.value=a.identity?.[0]??O(s,"auth.loginFailed")},$=async()=>{if((await y.value?.validate())?.valid){d.value="",f.value={},c.value=!0;try{await g.login(r.value.identity,r.value.password,r.value.remember);const a=typeof b.query.redirect=="string"?b.query.redirect:"/";await v.replace(a)}catch(a){M(a)}finally{c.value=!1}}};return N(async()=>{await g.ensureSession(),g.isAuthenticated.value&&await v.replace("/")}),(s,a)=>(_(),P(U,null,[l("a",ie,[l("div",ne,[t(e(Y),{nodes:e(V).app.logo},null,8,["nodes"]),l("h1",ue,i(e(V).app.title),1)])]),t(x,{"no-gutters":"",class:"auth-wrapper"},{default:o(()=>[t(p,{md:"8",class:"d-none d-md-flex align-center justify-center position-relative"},{default:o(()=>[l("div",de,[l("img",{src:e(I),class:"auth-illustration w-100",alt:"auth-illustration"},null,8,pe)]),t(G,{src:e(E),class:"d-none d-md-flex auth-footer-mask",alt:"auth-mask"},null,8,["src"])]),_:1}),t(p,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:o(()=>[t(H,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-5 pa-lg-7"},{default:o(()=>[t(C,null,{default:o(()=>[l("h4",me,[h(i(s.$t("auth.welcome"))+", ",1),l("span",ce,i(e(V).app.title),1)]),l("p",fe,i(s.$t("auth.loginPrompt")),1)]),_:1}),t(C,null,{default:o(()=>[t(Q,{ref_key:"formRef",ref:y,onSubmit:D($,["prevent"])},{default:o(()=>[t(x,null,{default:o(()=>[e(d)?(_(),T(p,{key:0,cols:"12"},{default:o(()=>[t(X,{type:"error",variant:"tonal"},{default:o(()=>[h(i(e(d)),1)]),_:1})]),_:1})):q("",!0),t(p,{cols:"12"},{default:o(()=>[t(L,{modelValue:e(r).identity,"onUpdate:modelValue":a[0]||(a[0]=n=>e(r).identity=n),autofocus:"",label:s.$t("auth.identityLabel"),placeholder:s.$t("auth.identityPlaceholder"),rules:S,"error-messages":e(f).identity??[]},null,8,["modelValue","label","placeholder","error-messages"])]),_:1}),t(p,{cols:"12"},{default:o(()=>[t(L,{modelValue:e(r).password,"onUpdate:modelValue":a[1]||(a[1]=n=>e(r).password=n),label:s.$t("profile.currentPassword"),placeholder:"********",type:e(m)?"text":"password",autocomplete:"current-password",rules:B,"error-messages":e(f).password??[],"append-inner-icon":e(m)?"ri-eye-off-line":"ri-eye-line","onClick:appendInner":a[2]||(a[2]=n=>m.value=!e(m))},null,8,["modelValue","label","type","error-messages","append-inner-icon"]),l("div",ge,[t(ee,{modelValue:e(r).remember,"onUpdate:modelValue":a[3]||(a[3]=n=>e(r).remember=n),label:s.$t("auth.rememberMe")},null,8,["modelValue","label"]),l("span",he,i(s.$t("auth.securityNotice")),1)]),t(J,{block:"",type:"submit",loading:e(c),disabled:e(c)},{default:o(()=>[h(i(s.$t("common.login")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})],64))}});export{$e as default};
