import{j as G,h as d,D as I,Q as x,R as S,S as t,ac as L,q as l,y as p,O as b,a8 as c,u as a,ag as P,ad as Q}from"./vendor-qaEqcc9M.js";import{$ as A,T as C,x as y,U as Y}from"./main-DUODoQpR.js";import{V as z,r as f,p as H}from"./VForm-AfrkaUJk.js";import{u as J,i as M}from"./useAbortOnUnmount-B_TyPYrd.js";import{V as T,a as u}from"./VRow-dBMGxjTF.js";import{V as K}from"./VCard-DEMyauu_.js";import{V as W}from"./VCardText-lEnvPJxp.js";import{V as X}from"./VAlert-DIbLZTVg.js";import{V as g}from"./VTextField-BgtisBQp.js";import{V as _}from"./VSelect-BpDYXa0x.js";import{V as Z}from"./VSwitch-C2gHzlAV.js";import"./vuetify-CYvz9UpR.js";import"./VAvatar-DfdxhEHH.js";import"./VList-BpKoOtV6.js";import"./VDivider-CiCMqi-4.js";import"./VCheckboxBtn-B_mUIJHa.js";import"./VSelectionControl-DtdcpgRj.js";import"./VChip-CzUAJTHl.js";const h={class:"d-flex align-center justify-space-between mb-2"},ee={class:"text-medium-emphasis mb-0"},ae={class:"d-flex justify-end gap-3"},Re=G({__name:"create",setup(le){const D=L(),{withAbort:R}=J(),v={path:"/templates/expense"},V=d(!1),m=d(!1),i=d(""),n=d({}),$=d([]),w=d([]),U=d([]),o=d({name:"",amount:null,due_day:15,period:"monthly",vendor_id:null,account_id:null,is_active:!0}),N=d(null),k=[f()],B=[f()],E=[f()],F=[f(),H()],j=[f(),r=>{const e=Number(r);return!Number.isInteger(e)||e<1||e>28?"Vade gunu 1 ile 28 arasinda olmalidir.":!0}],O=async()=>{V.value=!0;try{const r=await R(e=>A("/templates/expense/meta",{signal:e}));$.value=r.data.accounts,w.value=r.data.vendors,U.value=r.data.periods}catch(r){if(M(r))return;i.value=C(r,"Form verileri alınamadı.")}finally{V.value=!1}},q=async()=>{if((await N.value?.validate())?.valid){m.value=!0,i.value="",n.value={};try{await R(e=>A("/templates/expense",{method:"POST",body:{name:o.value.name,amount:o.value.amount,due_day:o.value.due_day,period:o.value.period,vendor_id:o.value.vendor_id,account_id:o.value.account_id,is_active:o.value.is_active},signal:e})),await D.push(v)}catch(e){if(M(e))return;i.value=C(e,"Gider şablonu oluşturulamadı."),n.value=Y(e)}finally{m.value=!1}}};return I(O),(r,e)=>(x(),S(T,null,{default:t(()=>[l(u,{cols:"12"},{default:t(()=>[p("div",h,[p("div",null,[e[7]||(e[7]=p("h4",{class:"text-h4 mb-1"}," Yeni Gider Şablonu ",-1)),p("p",ee,b(r.$t("pages.expenseTemplates.createSubtitle")),1)]),l(y,{variant:"outlined",to:v},{default:t(()=>[...e[8]||(e[8]=[c(" Listeye Don ",-1)])]),_:1})])]),_:1}),l(u,{cols:"12"},{default:t(()=>[l(K,{loading:a(m)||a(V)},{default:t(()=>[l(W,null,{default:t(()=>[l(z,{ref_key:"formRef",ref:N,onSubmit:P(q,["prevent"])},{default:t(()=>[l(T,null,{default:t(()=>[a(i)?(x(),S(u,{key:0,cols:"12"},{default:t(()=>[l(X,{type:"error",variant:"tonal"},{default:t(()=>[c(b(a(i)),1)]),_:1})]),_:1})):Q("",!0),l(u,{cols:"12",md:"6"},{default:t(()=>[l(g,{modelValue:a(o).name,"onUpdate:modelValue":e[0]||(e[0]=s=>a(o).name=s),label:r.$t("common.templateName"),rules:k,"error-messages":a(n).name??[]},null,8,["modelValue","label","error-messages"])]),_:1}),l(u,{cols:"12",md:"6"},{default:t(()=>[l(_,{modelValue:a(o).vendor_id,"onUpdate:modelValue":e[1]||(e[1]=s=>a(o).vendor_id=s),items:a(w),"item-title":"label","item-value":"id",label:r.$t("common.vendor"),clearable:"","error-messages":a(n).vendor_id??[]},null,8,["modelValue","items","label","error-messages"])]),_:1}),l(u,{cols:"12",md:"4"},{default:t(()=>[l(_,{modelValue:a(o).account_id,"onUpdate:modelValue":e[2]||(e[2]=s=>a(o).account_id=s),items:a($),"item-title":"label","item-value":"id",label:r.$t("common.account"),rules:B,"error-messages":a(n).account_id??[]},null,8,["modelValue","items","label","error-messages"])]),_:1}),l(u,{cols:"12",md:"4"},{default:t(()=>[l(_,{modelValue:a(o).period,"onUpdate:modelValue":e[3]||(e[3]=s=>a(o).period=s),items:a(U),"item-title":"label","item-value":"value",label:r.$t("common.periodicity"),rules:E,"error-messages":a(n).period??[]},null,8,["modelValue","items","label","error-messages"])]),_:1}),l(u,{cols:"12",md:"4"},{default:t(()=>[l(g,{modelValue:a(o).due_day,"onUpdate:modelValue":e[4]||(e[4]=s=>a(o).due_day=s),type:"number",min:"1",max:"28",label:r.$t("common.dueDay"),rules:j,"error-messages":a(n).due_day??[]},null,8,["modelValue","label","error-messages"])]),_:1}),l(u,{cols:"12"},{default:t(()=>[l(g,{modelValue:a(o).amount,"onUpdate:modelValue":e[5]||(e[5]=s=>a(o).amount=s),type:"number",min:"0.01",step:"0.01",label:r.$t("common.amount"),rules:F,"error-messages":a(n).amount??[]},null,8,["modelValue","label","error-messages"])]),_:1}),l(u,{cols:"12"},{default:t(()=>[l(Z,{modelValue:a(o).is_active,"onUpdate:modelValue":e[6]||(e[6]=s=>a(o).is_active=s),label:r.$t("common.active"),color:"primary"},null,8,["modelValue","label"])]),_:1}),l(u,{cols:"12"},{default:t(()=>[p("div",ae,[l(y,{variant:"outlined",to:v},{default:t(()=>[...e[9]||(e[9]=[c(" Iptal ",-1)])]),_:1}),l(y,{color:"primary",type:"submit",loading:a(m),disabled:a(m)},{default:t(()=>[c(b(r.$t("common.save")),1)]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}))}});export{Re as default};
