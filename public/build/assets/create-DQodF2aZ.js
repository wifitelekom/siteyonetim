import{j,h as u,D as O,Q as R,R as w,S as l,ac as q,q as t,y as p,a8 as c,u as a,ag as Y,O as $,ad as H}from"./vendor-DfCbaU-T.js";import{u as I,i as T}from"./useAbortOnUnmount-D2zdVzb9.js";import{$ as U,T as k,x as V,U as K}from"./main-OjHNd2U9.js";import{V as L,r as f,p as P}from"./VForm-CtC6ldpE.js";import{V as A,a as r}from"./VRow-Ba58lXtG.js";import{V as Q}from"./VCard-9RfFlHpT.js";import{V as z}from"./VCardText-YweTyZzP.js";import{V as J}from"./VAlert-DafHPFjN.js";import{V as C}from"./VSelect-CMe3Xagq.js";import{V as _}from"./VTextField-CMxHKe9w.js";import{V as W}from"./VTextarea-CHmrCRFp.js";import"./vuetify-BWJcAN87.js";import"./VAvatar-BcaC_ZEa.js";import"./VList-B1ov9hmg.js";import"./VDivider-CUijZXd4.js";import"./VCheckboxBtn-B6JwM7Rr.js";import"./VSelectionControl-Ck2LTPqY.js";import"./VChip-CnrRRXXG.js";const X={class:"d-flex align-center justify-space-between mb-2"},Z={class:"d-flex justify-end gap-3"},ge=j({__name:"create",setup(h){const{withAbort:g}=I(),M=q(),n=u(!1),v=u(!1),m=u(""),d=u({}),b=u([]),x=u([]),o=u({vendor_id:null,account_id:null,expense_date:"",due_date:"",amount:null,description:""}),y=u(null),D=[f()],N=[f()],S=[f()],B=[f()],E=[f(),P()],F=async()=>{v.value=!0;try{const i=await g(e=>U("/expenses/meta",{signal:e}));b.value=i.data.vendors,x.value=i.data.accounts}catch(i){if(T(i))return;m.value=k(i,"Form verileri alinamadi.")}finally{v.value=!1}},G=async()=>{if((await y.value?.validate())?.valid){n.value=!0,m.value="",d.value={};try{await g(e=>U("/expenses",{method:"POST",body:{vendor_id:o.value.vendor_id,account_id:o.value.account_id,expense_date:o.value.expense_date,due_date:o.value.due_date,amount:o.value.amount,description:o.value.description||null},signal:e})),await M.push("/expenses")}catch(e){if(T(e))return;m.value=k(e,"Gider olusturulamadi."),d.value=K(e)}finally{n.value=!1}}};return O(F),(i,e)=>(R(),w(A,null,{default:l(()=>[t(r,{cols:"12"},{default:l(()=>[p("div",X,[e[7]||(e[7]=p("div",null,[p("h4",{class:"text-h4 mb-1"}," Yeni Gider "),p("p",{class:"text-medium-emphasis mb-0"}," Yeni bir gider kaydi olusturun ")],-1)),t(V,{variant:"outlined",to:"/expenses"},{default:l(()=>[...e[6]||(e[6]=[c(" Listeye Don ",-1)])]),_:1})])]),_:1}),t(r,{cols:"12"},{default:l(()=>[t(Q,{loading:a(v)||a(n)},{default:l(()=>[t(z,null,{default:l(()=>[t(L,{ref_key:"formRef",ref:y,onSubmit:Y(G,["prevent"])},{default:l(()=>[t(A,null,{default:l(()=>[a(m)?(R(),w(r,{key:0,cols:"12"},{default:l(()=>[t(J,{type:"error",variant:"tonal"},{default:l(()=>[c($(a(m)),1)]),_:1})]),_:1})):H("",!0),t(r,{cols:"12",md:"6"},{default:l(()=>[t(C,{modelValue:a(o).vendor_id,"onUpdate:modelValue":e[0]||(e[0]=s=>a(o).vendor_id=s),items:a(b),"item-title":"label","item-value":"id",label:"Tedarikci",clearable:"",rules:D,"error-messages":a(d).vendor_id??[]},null,8,["modelValue","items","error-messages"])]),_:1}),t(r,{cols:"12",md:"6"},{default:l(()=>[t(C,{modelValue:a(o).account_id,"onUpdate:modelValue":e[1]||(e[1]=s=>a(o).account_id=s),items:a(x),"item-title":"label","item-value":"id",label:"Gider Hesabi",rules:N,"error-messages":a(d).account_id??[]},null,8,["modelValue","items","error-messages"])]),_:1}),t(r,{cols:"12",md:"4"},{default:l(()=>[t(_,{modelValue:a(o).expense_date,"onUpdate:modelValue":e[2]||(e[2]=s=>a(o).expense_date=s),type:"date",label:"Gider Tarihi",rules:S,"error-messages":a(d).expense_date??[]},null,8,["modelValue","error-messages"])]),_:1}),t(r,{cols:"12",md:"4"},{default:l(()=>[t(_,{modelValue:a(o).due_date,"onUpdate:modelValue":e[3]||(e[3]=s=>a(o).due_date=s),type:"date",label:"Vade Tarihi",rules:B,"error-messages":a(d).due_date??[]},null,8,["modelValue","error-messages"])]),_:1}),t(r,{cols:"12",md:"4"},{default:l(()=>[t(_,{modelValue:a(o).amount,"onUpdate:modelValue":e[4]||(e[4]=s=>a(o).amount=s),type:"number",step:"0.01",min:"0",label:"Tutar",rules:E,"error-messages":a(d).amount??[]},null,8,["modelValue","error-messages"])]),_:1}),t(r,{cols:"12"},{default:l(()=>[t(W,{modelValue:a(o).description,"onUpdate:modelValue":e[5]||(e[5]=s=>a(o).description=s),label:"Aciklama",rows:"3","error-messages":a(d).description??[]},null,8,["modelValue","error-messages"])]),_:1}),t(r,{cols:"12"},{default:l(()=>[p("div",Z,[t(V,{variant:"outlined",to:"/expenses"},{default:l(()=>[...e[8]||(e[8]=[c(" Iptal ",-1)])]),_:1}),t(V,{color:"primary",type:"submit",loading:a(n),disabled:a(n)},{default:l(()=>[...e[9]||(e[9]=[c(" Kaydet ",-1)])]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}))}});export{ge as default};
