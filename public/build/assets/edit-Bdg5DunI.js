import{j as M,f as S,h as u,D as j,Q as R,R as E,S as s,Z as F,ac as q,q as o,y as m,a8 as p,u as a,ag as L,O as b,ad as O}from"./vendor-DfCbaU-T.js";import{$ as x,T,x as c,U as z}from"./main-Btr01hqQ.js";import{V as I,r as P,e as Q}from"./VForm-D0fBkA3g.js";import{u as Z,i as h}from"./useAbortOnUnmount-D2zdVzb9.js";import{V as U,a as n}from"./VRow-CRn_xzm0.js";import{V as G}from"./VCard-BmPLTxO3.js";import{V as H}from"./VCardText-H2SttjXr.js";import{V as J}from"./VAlert-R8JWKysv.js";import{V as g}from"./VTextField-pVQuWnMO.js";import{V as K}from"./VTextarea-DCdZ-5SO.js";import"./vuetify-DGZOXKNZ.js";import"./VAvatar-96oJdN2D.js";const W={class:"d-flex align-center justify-space-between mb-2"},X={class:"d-flex gap-2"},Y={class:"d-flex justify-end gap-3"},pe=M({__name:"edit",setup(ee){const $=F(),w=q(),V=S(()=>Number($.params.id)),{withAbort:y}=Z(),_=u(!1),f=u(!1),v=u(!1),d=u(""),i=u({}),t=u({name:"",tax_no:"",phone:"",email:"",address:""}),k=u(null),A=[P()],C=[l=>typeof l!="string"||l.trim().length===0?!0:Q()(l)],N=async()=>{_.value=!0,d.value="";try{const l=await y(e=>x(`/vendors/${V.value}`,{signal:e}));t.value={name:l.data.name,tax_no:l.data.tax_no??"",phone:l.data.phone??"",email:l.data.email??"",address:l.data.address??""}}catch(l){if(h(l))return;d.value=T(l,"Tedarikçi detayı alınamadı.")}finally{_.value=!1}},D=async()=>{if((await k.value?.validate())?.valid){f.value=!0,d.value="",i.value={};try{await y(e=>x(`/vendors/${V.value}`,{method:"PUT",body:{name:t.value.name,tax_no:t.value.tax_no||null,phone:t.value.phone||null,email:t.value.email||null,address:t.value.address||null},signal:e})),await w.push("/management/vendors")}catch(e){if(h(e))return;d.value=T(e,"Tedarikçi güncellenemedi."),i.value=z(e)}finally{f.value=!1}}},B=async()=>{v.value=!0,d.value="";try{await y(l=>x(`/vendors/${V.value}`,{method:"DELETE",signal:l})),await w.push("/management/vendors")}catch(l){if(h(l))return;d.value=T(l,"Tedarikçi silinemedi.")}finally{v.value=!1}};return j(N),(l,e)=>(R(),E(U,null,{default:s(()=>[o(n,{cols:"12"},{default:s(()=>[m("div",W,[e[7]||(e[7]=m("div",null,[m("h4",{class:"text-h4 mb-1"}," Tedarikçi Düzenle "),m("p",{class:"text-medium-emphasis mb-0"}," Tedarikçi kaydını güncelleyin ")],-1)),m("div",X,[o(c,{variant:"outlined",to:"/management/vendors"},{default:s(()=>[...e[5]||(e[5]=[p(" Listeye Don ",-1)])]),_:1}),o(c,{color:"error",variant:"outlined",loading:a(v),disabled:a(v),onClick:B},{default:s(()=>[...e[6]||(e[6]=[p(" Sil ",-1)])]),_:1},8,["loading","disabled"])])])]),_:1}),o(n,{cols:"12"},{default:s(()=>[o(G,{loading:a(_)||a(f)},{default:s(()=>[o(H,null,{default:s(()=>[o(I,{ref_key:"formRef",ref:k,onSubmit:L(D,["prevent"])},{default:s(()=>[o(U,null,{default:s(()=>[a(d)?(R(),E(n,{key:0,cols:"12"},{default:s(()=>[o(J,{type:"error",variant:"tonal"},{default:s(()=>[p(b(a(d)),1)]),_:1})]),_:1})):O("",!0),o(n,{cols:"12",md:"6"},{default:s(()=>[o(g,{modelValue:a(t).name,"onUpdate:modelValue":e[0]||(e[0]=r=>a(t).name=r),label:l.$t("common.companyName"),rules:A,"error-messages":a(i).name??[]},null,8,["modelValue","label","error-messages"])]),_:1}),o(n,{cols:"12",md:"6"},{default:s(()=>[o(g,{modelValue:a(t).tax_no,"onUpdate:modelValue":e[1]||(e[1]=r=>a(t).tax_no=r),label:"Vergi No","error-messages":a(i).tax_no??[]},null,8,["modelValue","error-messages"])]),_:1}),o(n,{cols:"12",md:"6"},{default:s(()=>[o(g,{modelValue:a(t).phone,"onUpdate:modelValue":e[2]||(e[2]=r=>a(t).phone=r),label:"Telefon","error-messages":a(i).phone??[]},null,8,["modelValue","error-messages"])]),_:1}),o(n,{cols:"12",md:"6"},{default:s(()=>[o(g,{modelValue:a(t).email,"onUpdate:modelValue":e[3]||(e[3]=r=>a(t).email=r),type:"email",label:"E-posta",rules:C,"error-messages":a(i).email??[]},null,8,["modelValue","error-messages"])]),_:1}),o(n,{cols:"12"},{default:s(()=>[o(K,{modelValue:a(t).address,"onUpdate:modelValue":e[4]||(e[4]=r=>a(t).address=r),label:"Adres",rows:"3","error-messages":a(i).address??[]},null,8,["modelValue","error-messages"])]),_:1}),o(n,{cols:"12"},{default:s(()=>[m("div",Y,[o(c,{variant:"outlined",to:"/management/vendors"},{default:s(()=>[p(b(l.$t("common.cancel")),1)]),_:1}),o(c,{color:"primary",type:"submit",loading:a(f),disabled:a(f)},{default:s(()=>[p(b(l.$t("common.update")),1)]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}))}});export{pe as default};
