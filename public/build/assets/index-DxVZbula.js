import{u as L,i as O}from"./useAbortOnUnmount-B_TyPYrd.js";import{$ as j,T as F,x as y,q as I}from"./main-DUODoQpR.js";import{a as N}from"./formatters-BEv4aA23.js";import{V as b,a as n}from"./VRow-dBMGxjTF.js";import{V as x}from"./VCard-DEMyauu_.js";import{V as k}from"./VCardText-lEnvPJxp.js";import{V as q}from"./VSelect-BpDYXa0x.js";import{V as E}from"./VAlert-DIbLZTVg.js";import{V as K}from"./VTable-CDiDVqFm.js";import{V as C}from"./VChip-CzUAJTHl.js";import{V as M}from"./VPagination-Dp4qKX6V.js";import{j as S,h as i,D as U,Q as u,R as w,S as l,a0 as Y,q as t,y as e,a8 as d,H,u as s,O as r,ad as D,V as v,F as P,ab as Q}from"./vendor-qaEqcc9M.js";import"./vuetify-CYvz9UpR.js";import"./VAvatar-DfdxhEHH.js";import"./VTextField-BgtisBQp.js";import"./VList-BpKoOtV6.js";import"./VDivider-CiCMqi-4.js";import"./VCheckboxBtn-B_mUIJHa.js";import"./VSelectionControl-DtdcpgRj.js";const G={class:"d-flex align-center justify-space-between mb-2"},J={class:"text-right"},W={key:0},X={colspan:"7",class:"text-center text-medium-emphasis py-6"},Z={class:"text-sm text-medium-emphasis"},ye=S({__name:"index",setup(ee){const{withAbort:T}=L(),_=i(!1),m=i(""),g=i([]),p=i({current_page:1,last_page:1,per_page:20,total:0}),c=i(null),A={open:"Acik",in_progress:"Isleniyor",resolved:"Cozuldu",closed:"Kapali"},R={open:"warning",in_progress:"info",resolved:"success",closed:"secondary"},$={low:"Dusuk",medium:"Orta",high:"Yuksek"},z={low:"success",medium:"warning",high:"error"},h=async(f=1)=>{_.value=!0,m.value="";try{const a=await T(V=>j("/support-tickets",{query:{page:f,status:c.value||void 0},signal:V}));g.value=a.data,p.value=a.meta}catch(a){if(O(a))return;m.value=F(a,"Destek talepleri alinamadi.")}finally{_.value=!1}},B=()=>h(1);return U(()=>h(1)),(f,a)=>{const V=Y("RouterLink");return u(),w(b,null,{default:l(()=>[t(n,{cols:"12"},{default:l(()=>[e("div",G,[a[2]||(a[2]=e("div",null,[e("h4",{class:"text-h4 mb-1"}," Destek Talepleri "),e("p",{class:"text-medium-emphasis mb-0"}," Destek taleplerini yonetin ")],-1)),t(y,{color:"primary","prepend-icon":"ri-add-line",to:"/support-tickets/create"},{default:l(()=>[...a[1]||(a[1]=[d(" Yeni Talep ",-1)])]),_:1})])]),_:1}),t(n,{cols:"12"},{default:l(()=>[t(x,null,{default:l(()=>[t(k,null,{default:l(()=>[t(b,null,{default:l(()=>[t(n,{cols:"12",md:"4"},{default:l(()=>[t(q,{modelValue:s(c),"onUpdate:modelValue":[a[0]||(a[0]=o=>H(c)?c.value=o:null),B],items:[{title:"Acik",value:"open"},{title:"Isleniyor",value:"in_progress"},{title:"Cozuldu",value:"resolved"},{title:"Kapali",value:"closed"}],label:"Durum",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(m)?(u(),w(n,{key:0,cols:"12"},{default:l(()=>[t(E,{type:"error",variant:"tonal"},{default:l(()=>[d(r(s(m)),1)]),_:1})]),_:1})):D("",!0),t(n,{cols:"12"},{default:l(()=>[t(x,{loading:s(_)},{default:l(()=>[t(K,{density:"comfortable"},{default:l(()=>[a[3]||(a[3]=e("thead",null,[e("tr",null,[e("th",null,"Konu"),e("th",null,"Olusturan"),e("th",null,"Oncelik"),e("th",null,"Durum"),e("th",null,"Cevap"),e("th",null,"Tarih"),e("th",{class:"text-right"}," Islem ")])],-1)),e("tbody",null,[(u(!0),v(P,null,Q(s(g),o=>(u(),v("tr",{key:o.id},[e("td",null,[t(V,{to:`/support-tickets/${o.id}`,class:"font-weight-medium text-decoration-none"},{default:l(()=>[d(r(o.subject),1)]),_:2},1032,["to"])]),e("td",null,r(o.created_by?.name??"-"),1),e("td",null,[t(C,{size:"small",color:z[o.priority],variant:"tonal"},{default:l(()=>[d(r($[o.priority]),1)]),_:2},1032,["color"])]),e("td",null,[t(C,{size:"small",color:R[o.status],variant:"tonal"},{default:l(()=>[d(r(A[o.status]),1)]),_:2},1032,["color"])]),e("td",null,r(o.replies_count),1),e("td",null,r(s(N)(o.created_at)),1),e("td",J,[t(y,{icon:"",size:"small",variant:"text",to:`/support-tickets/${o.id}`},{default:l(()=>[t(I,{icon:"ri-eye-line"})]),_:1},8,["to"])])]))),128)),s(g).length===0?(u(),v("tr",W,[e("td",X,r(f.$t("common.noRecords")),1)])):D("",!0)])]),_:1}),t(k,{class:"d-flex justify-space-between align-center flex-wrap gap-3"},{default:l(()=>[e("span",Z,r(f.$t("common.totalRecords",{count:s(p).total})),1),t(M,{"model-value":s(p).current_page,length:s(p).last_page,"total-visible":7,"onUpdate:modelValue":h},null,8,["model-value","length"])]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1})}}});export{ye as default};
