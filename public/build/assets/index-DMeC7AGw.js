import{$ as b,T as k,x as f,p as T}from"./main-OjHNd2U9.js";import{u as j,i as w}from"./useAbortOnUnmount-D2zdVzb9.js";import{V as C,a as n}from"./VRow-Ba58lXtG.js";import{V as A}from"./VCard-9RfFlHpT.js";import{V as F}from"./VCardText-YweTyZzP.js";import{V as z}from"./VSelect-CMe3Xagq.js";import{V as I}from"./VTextField-CMxHKe9w.js";import{V as U}from"./VAlert-DafHPFjN.js";import{V as M}from"./VTable-ByowNMkP.js";import{V as P}from"./VChip-CnrRRXXG.js";import{V as S}from"./VPagination-Laqr3CkN.js";import{j as q,h as u,D as L,Q as _,R as E,S as l,q as t,y as a,a8 as v,u as s,O as r,ad as B,V as y,F as O,ab as R}from"./vendor-DfCbaU-T.js";import"./vuetify-BWJcAN87.js";import"./VAvatar-BcaC_ZEa.js";import"./VList-B1ov9hmg.js";import"./VDivider-CUijZXd4.js";import"./VCheckboxBtn-B6JwM7Rr.js";import"./VSelectionControl-Ck2LTPqY.js";const G={class:"d-flex align-center justify-space-between mb-2"},K={class:"d-flex gap-3 justify-end"},Q={class:"font-weight-medium"},Y={class:"text-caption text-medium-emphasis"},H={class:"text-right"},J={class:"text-right"},W={key:0},X={class:"text-sm text-medium-emphasis"},he=q({__name:"index",setup(Z){const{withAbort:x}=j(),g=u(!1),V=u(null),d=u(""),h=u([]),m=u({current_page:1,last_page:1,per_page:20,total:0}),o=u({is_active:null,search:""}),c=async(p=1)=>{g.value=!0,d.value="";try{const e=await x(i=>b("/vendors",{query:{page:p,is_active:o.value.is_active===null?void 0:o.value.is_active?1:0,search:o.value.search||void 0},signal:i}));h.value=e.data,m.value=e.meta}catch(e){if(w(e))return;d.value=k(e,"Tedarikci listesi alinamadi.")}finally{g.value=!1}},D=async()=>{await c(1)},N=async()=>{o.value={is_active:null,search:""},await c(1)},$=async p=>{V.value=p.id,d.value="";try{await x(e=>b(`/vendors/${p.id}`,{method:"DELETE",signal:e})),await c(m.value.current_page)}catch(e){if(w(e))return;d.value=k(e,"Tedarikci silinemedi.")}finally{V.value=null}};return L(()=>c(1)),(p,e)=>(_(),E(C,null,{default:l(()=>[t(n,{cols:"12"},{default:l(()=>[a("div",G,[e[3]||(e[3]=a("div",null,[a("h4",{class:"text-h4 mb-1"}," Tedarikciler "),a("p",{class:"text-medium-emphasis mb-0"}," Tedarikci kayitlarini yonetin ")],-1)),t(f,{color:"primary","prepend-icon":"ri-add-line",to:"/management/vendors/create"},{default:l(()=>[...e[2]||(e[2]=[v(" Yeni Tedarikci ",-1)])]),_:1})])]),_:1}),t(n,{cols:"12"},{default:l(()=>[t(A,null,{default:l(()=>[t(F,null,{default:l(()=>[t(C,null,{default:l(()=>[t(n,{cols:"12",md:"3"},{default:l(()=>[t(z,{modelValue:s(o).is_active,"onUpdate:modelValue":e[0]||(e[0]=i=>s(o).is_active=i),items:[{title:"Aktif",value:!0},{title:"Pasif",value:!1}],label:"Durum",clearable:""},null,8,["modelValue"])]),_:1}),t(n,{cols:"12",md:"9"},{default:l(()=>[t(I,{modelValue:s(o).search,"onUpdate:modelValue":e[1]||(e[1]=i=>s(o).search=i),label:"Arama",placeholder:"Ad, vergi no, telefon, e-posta"},null,8,["modelValue"])]),_:1}),t(n,{cols:"12"},{default:l(()=>[a("div",K,[t(f,{variant:"outlined",onClick:N},{default:l(()=>[...e[4]||(e[4]=[v(" Temizle ",-1)])]),_:1}),t(f,{color:"primary",onClick:D},{default:l(()=>[...e[5]||(e[5]=[v(" Filtrele ",-1)])]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(d)?(_(),E(n,{key:0,cols:"12"},{default:l(()=>[t(U,{type:"error",variant:"tonal"},{default:l(()=>[v(r(s(d)),1)]),_:1})]),_:1})):B("",!0),t(n,{cols:"12"},{default:l(()=>[t(A,{loading:s(g)},{default:l(()=>[t(M,{density:"comfortable"},{default:l(()=>[e[7]||(e[7]=a("thead",null,[a("tr",null,[a("th",null,"Firma"),a("th",null,"Vergi No"),a("th",null,"Iletisim"),a("th",{class:"text-right"}," Gider "),a("th",null,"Durum"),a("th",{class:"text-right"}," Islemler ")])],-1)),a("tbody",null,[(_(!0),y(O,null,R(s(h),i=>(_(),y("tr",{key:i.id},[a("td",null,[a("div",Q,r(i.name),1),a("div",Y,r(i.email||"-"),1)]),a("td",null,r(i.tax_no||"-"),1),a("td",null,r(i.phone||"-"),1),a("td",H,r(i.expenses_count),1),a("td",null,[t(P,{size:"small",color:i.is_active?"success":"secondary",variant:"tonal"},{default:l(()=>[v(r(i.is_active?"Aktif":"Pasif"),1)]),_:2},1032,["color"])]),a("td",J,[t(f,{icon:"",size:"small",variant:"text",to:`/management/vendors/${i.id}/edit`},{default:l(()=>[t(T,{icon:"ri-edit-line"})]),_:1},8,["to"]),t(f,{icon:"",size:"small",variant:"text",color:"error",loading:s(V)===i.id,disabled:s(V)===i.id,onClick:ee=>$(i)},{default:l(()=>[t(T,{icon:"ri-delete-bin-line"})]),_:1},8,["loading","disabled","onClick"])])]))),128)),s(h).length===0?(_(),y("tr",W,[...e[6]||(e[6]=[a("td",{colspan:"6",class:"text-center text-medium-emphasis py-6"}," Kayit bulunamadi. ",-1)])])):B("",!0)])]),_:1}),t(F,{class:"d-flex justify-space-between align-center flex-wrap gap-3"},{default:l(()=>[a("span",X,"Toplam "+r(s(m).total)+" kayit",1),t(S,{"model-value":s(m).current_page,length:s(m).last_page,"total-visible":7,"onUpdate:modelValue":c},null,8,["model-value","length"])]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}))}});export{he as default};
