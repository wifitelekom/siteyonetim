import{j as O,h as i,D as q,Q as U,R as A,S as o,ac as I,q as l,y as p,a8 as v,u as a,ag as P,O as $,ad as H}from"./vendor-DfCbaU-T.js";import{$ as S,T as N,x as V,U as K}from"./main-OjHNd2U9.js";import{V as L,r as f,p as Q}from"./VForm-CtC6ldpE.js";import{u as Y,i as T}from"./useAbortOnUnmount-D2zdVzb9.js";import{V as k,a as s}from"./VRow-Ba58lXtG.js";import{V as z}from"./VCard-9RfFlHpT.js";import{V as J}from"./VCardText-YweTyZzP.js";import{V as W}from"./VAlert-DafHPFjN.js";import{V as b}from"./VTextField-CMxHKe9w.js";import{V as _}from"./VSelect-CMe3Xagq.js";import{V as X}from"./VSwitch-XgqsY1US.js";import"./vuetify-BWJcAN87.js";import"./VAvatar-BcaC_ZEa.js";import"./VList-B1ov9hmg.js";import"./VDivider-CUijZXd4.js";import"./VCheckboxBtn-B6JwM7Rr.js";import"./VSelectionControl-Ck2LTPqY.js";import"./VChip-CnrRRXXG.js";const Z={class:"d-flex align-center justify-space-between mb-2"},h={class:"d-flex justify-end gap-3"},ge=O({__name:"create",setup(ee){const C=I(),{withAbort:g}=Y(),c=i(!1),n=i(!1),m=i(""),d=i({}),y=i([]),x=i([]),R=i([]),t=i({name:"",amount:null,due_day:15,period:"monthly",vendor_id:null,account_id:null,is_active:!0}),w=i(null),M=[f()],B=[f()],D=[f()],E=[f(),Q()],F=[f(),u=>{const e=Number(u);return!Number.isInteger(e)||e<1||e>28?"Vade gunu 1 ile 28 arasinda olmalidir.":!0}],G=async()=>{c.value=!0;try{const u=await g(e=>S("/templates/expense/meta",{signal:e}));y.value=u.data.accounts,x.value=u.data.vendors,R.value=u.data.periods}catch(u){if(T(u))return;m.value=N(u,"Form verileri alinamadi.")}finally{c.value=!1}},j=async()=>{if((await w.value?.validate())?.valid){n.value=!0,m.value="",d.value={};try{await g(e=>S("/templates/expense",{method:"POST",body:{name:t.value.name,amount:t.value.amount,due_day:t.value.due_day,period:t.value.period,vendor_id:t.value.vendor_id,account_id:t.value.account_id,is_active:t.value.is_active},signal:e})),await C.push("/templates/expense")}catch(e){if(T(e))return;m.value=N(e,"Gider sablonu olusturulamadi."),d.value=K(e)}finally{n.value=!1}}};return q(G),(u,e)=>(U(),A(k,null,{default:o(()=>[l(s,{cols:"12"},{default:o(()=>[p("div",Z,[e[8]||(e[8]=p("div",null,[p("h4",{class:"text-h4 mb-1"}," Yeni Gider Sablonu "),p("p",{class:"text-medium-emphasis mb-0"}," Gider sablon bilgilerini girin ")],-1)),l(V,{variant:"outlined",to:"/templates/expense"},{default:o(()=>[...e[7]||(e[7]=[v(" Listeye Don ",-1)])]),_:1})])]),_:1}),l(s,{cols:"12"},{default:o(()=>[l(z,{loading:a(n)||a(c)},{default:o(()=>[l(J,null,{default:o(()=>[l(L,{ref_key:"formRef",ref:w,onSubmit:P(j,["prevent"])},{default:o(()=>[l(k,null,{default:o(()=>[a(m)?(U(),A(s,{key:0,cols:"12"},{default:o(()=>[l(W,{type:"error",variant:"tonal"},{default:o(()=>[v($(a(m)),1)]),_:1})]),_:1})):H("",!0),l(s,{cols:"12",md:"6"},{default:o(()=>[l(b,{modelValue:a(t).name,"onUpdate:modelValue":e[0]||(e[0]=r=>a(t).name=r),label:"Sablon Adi",rules:M,"error-messages":a(d).name??[]},null,8,["modelValue","error-messages"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(_,{modelValue:a(t).vendor_id,"onUpdate:modelValue":e[1]||(e[1]=r=>a(t).vendor_id=r),items:a(x),"item-title":"label","item-value":"id",label:"Tedarikci",clearable:"","error-messages":a(d).vendor_id??[]},null,8,["modelValue","items","error-messages"])]),_:1}),l(s,{cols:"12",md:"4"},{default:o(()=>[l(_,{modelValue:a(t).account_id,"onUpdate:modelValue":e[2]||(e[2]=r=>a(t).account_id=r),items:a(y),"item-title":"label","item-value":"id",label:"Hesap",rules:B,"error-messages":a(d).account_id??[]},null,8,["modelValue","items","error-messages"])]),_:1}),l(s,{cols:"12",md:"4"},{default:o(()=>[l(_,{modelValue:a(t).period,"onUpdate:modelValue":e[3]||(e[3]=r=>a(t).period=r),items:a(R),"item-title":"label","item-value":"value",label:"Periyot",rules:D,"error-messages":a(d).period??[]},null,8,["modelValue","items","error-messages"])]),_:1}),l(s,{cols:"12",md:"4"},{default:o(()=>[l(b,{modelValue:a(t).due_day,"onUpdate:modelValue":e[4]||(e[4]=r=>a(t).due_day=r),type:"number",min:"1",max:"28",label:"Vade Gunu",rules:F,"error-messages":a(d).due_day??[]},null,8,["modelValue","error-messages"])]),_:1}),l(s,{cols:"12"},{default:o(()=>[l(b,{modelValue:a(t).amount,"onUpdate:modelValue":e[5]||(e[5]=r=>a(t).amount=r),type:"number",min:"0.01",step:"0.01",label:"Tutar",rules:E,"error-messages":a(d).amount??[]},null,8,["modelValue","error-messages"])]),_:1}),l(s,{cols:"12"},{default:o(()=>[l(X,{modelValue:a(t).is_active,"onUpdate:modelValue":e[6]||(e[6]=r=>a(t).is_active=r),label:"Aktif",color:"primary"},null,8,["modelValue"])]),_:1}),l(s,{cols:"12"},{default:o(()=>[p("div",h,[l(V,{variant:"outlined",to:"/templates/expense"},{default:o(()=>[...e[9]||(e[9]=[v(" Iptal ",-1)])]),_:1}),l(V,{color:"primary",type:"submit",loading:a(n),disabled:a(n)},{default:o(()=>[...e[10]||(e[10]=[v(" Kaydet ",-1)])]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}))}});export{ge as default};
