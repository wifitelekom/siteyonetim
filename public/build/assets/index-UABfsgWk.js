import{u as R}from"./useAbortOnUnmount-D2zdVzb9.js";import{$ as C,T as k,x as V,q}from"./main-Btr01hqQ.js";import{a as S,f as y}from"./formatters-BEv4aA23.js";import{e as E,b as G}from"./statusHelpers-DSGXz7Bq.js";import{V as T,a as i}from"./VRow-CRn_xzm0.js";import{V as U}from"./VCard-BmPLTxO3.js";import{V as D}from"./VCardText-H2SttjXr.js";import{V as F}from"./VSelect-DhbvR9Z1.js";import{V as b}from"./VTextField-pVQuWnMO.js";import{V as O}from"./VAlert-R8JWKysv.js";import{V as z}from"./VTable-5XBH4x9y.js";import{V as L}from"./VChip-DOrTqiUh.js";import{V as P}from"./VPagination-9yrd3TeG.js";import{j as I,h as m,D as K,Q as c,R as B,S as o,q as t,y as e,O as r,a8 as p,u as a,ad as M,V as $,F as Q,ab as Y}from"./vendor-DfCbaU-T.js";import"./vuetify-DGZOXKNZ.js";import"./VAvatar-96oJdN2D.js";import"./VList-BYpc2SqC.js";import"./VDivider-DEGojtwS.js";import"./VCheckboxBtn-DaQGgEjM.js";import"./VSelectionControl-ClrOpdq3.js";const H={class:"d-flex align-center justify-space-between mb-2"},J={class:"text-medium-emphasis mb-0"},W={class:"d-flex gap-3 justify-end"},X={class:"text-right"},Z={class:"font-weight-medium"},tt={class:"text-caption text-medium-emphasis"},et={class:"text-caption text-medium-emphasis"},at={class:"text-right"},lt={class:"text-right"},ot={class:"text-right"},st={class:"text-right"},nt={key:0},rt={colspan:"7",class:"text-center text-medium-emphasis py-6"},dt={class:"text-sm text-medium-emphasis"},Dt=I({__name:"index",setup(it){R();const h=m(!1),_=m(!1),u=m(""),g=m([]),x=m([]),w=m([]),f=m({current_page:1,last_page:1,per_page:15,total:0}),d=m({vendor_id:null,status:null,from:"",to:"",search:""}),j=async()=>{_.value=!0;try{const s=await C("/expenses/meta");x.value=s.data.vendors}catch(s){u.value=k(s,"Filtre verileri alınamadı.")}finally{_.value=!1}},v=async(s=1)=>{h.value=!0,u.value="";try{const l=await C("/expenses",{query:{page:s,vendor_id:d.value.vendor_id||void 0,status:d.value.status||void 0,from:d.value.from||void 0,to:d.value.to||void 0,search:d.value.search||void 0}});g.value=l.data,f.value=l.meta,w.value=l.filters.status}catch(l){u.value=k(l,"Gider listesi alınamadı.")}finally{h.value=!1}},A=async()=>{await v(1)},N=async()=>{d.value={vendor_id:null,status:null,from:"",to:"",search:""},await v(1)};return K(async()=>{await Promise.allSettled([j(),v(1)])}),(s,l)=>(c(),B(T,null,{default:o(()=>[t(i,{cols:"12"},{default:o(()=>[e("div",H,[e("div",null,[l[5]||(l[5]=e("h4",{class:"text-h4 mb-1"}," Giderler ",-1)),e("p",J,r(s.$t("pages.expenses.indexSubtitle")),1)]),t(V,{color:"primary","prepend-icon":"ri-add-line",to:"/expenses/create"},{default:o(()=>[...l[6]||(l[6]=[p(" Yeni Gider ",-1)])]),_:1})])]),_:1}),t(i,{cols:"12"},{default:o(()=>[t(U,{loading:a(_)},{default:o(()=>[t(D,null,{default:o(()=>[t(T,null,{default:o(()=>[t(i,{cols:"12",md:"3"},{default:o(()=>[t(F,{modelValue:a(d).vendor_id,"onUpdate:modelValue":l[0]||(l[0]=n=>a(d).vendor_id=n),items:a(x),"item-title":"label","item-value":"id",label:s.$t("common.vendor"),clearable:""},null,8,["modelValue","items","label"])]),_:1}),t(i,{cols:"12",md:"3"},{default:o(()=>[t(F,{modelValue:a(d).status,"onUpdate:modelValue":l[1]||(l[1]=n=>a(d).status=n),items:a(w),"item-title":"label","item-value":"value",label:s.$t("common.status"),clearable:""},null,8,["modelValue","items","label"])]),_:1}),t(i,{cols:"12",md:"2"},{default:o(()=>[t(b,{modelValue:a(d).from,"onUpdate:modelValue":l[2]||(l[2]=n=>a(d).from=n),type:"date",label:s.$t("common.startDate")},null,8,["modelValue","label"])]),_:1}),t(i,{cols:"12",md:"2"},{default:o(()=>[t(b,{modelValue:a(d).to,"onUpdate:modelValue":l[3]||(l[3]=n=>a(d).to=n),type:"date",label:s.$t("common.endDate")},null,8,["modelValue","label"])]),_:1}),t(i,{cols:"12",md:"2"},{default:o(()=>[t(b,{modelValue:a(d).search,"onUpdate:modelValue":l[4]||(l[4]=n=>a(d).search=n),label:s.$t("common.search"),placeholder:s.$t("common.description")},null,8,["modelValue","label","placeholder"])]),_:1}),t(i,{cols:"12"},{default:o(()=>[e("div",W,[t(V,{variant:"outlined",onClick:N},{default:o(()=>[p(r(s.$t("common.clear")),1)]),_:1}),t(V,{color:"primary",onClick:A},{default:o(()=>[p(r(s.$t("common.filter")),1)]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["loading"])]),_:1}),a(u)?(c(),B(i,{key:0,cols:"12"},{default:o(()=>[t(O,{type:"error",variant:"tonal"},{default:o(()=>[p(r(a(u)),1)]),_:1})]),_:1})):M("",!0),t(i,{cols:"12"},{default:o(()=>[t(U,{loading:a(h)},{default:o(()=>[t(z,{density:"comfortable"},{default:o(()=>[e("thead",null,[e("tr",null,[e("th",null,r(s.$t("common.vendor")),1),e("th",null,r(s.$t("common.periodAndDue")),1),l[7]||(l[7]=e("th",{class:"text-right"}," Tutar ",-1)),e("th",X,r(s.$t("common.paid")),1),l[8]||(l[8]=e("th",{class:"text-right"}," Kalan ",-1)),e("th",null,r(s.$t("common.status")),1),l[9]||(l[9]=e("th",{class:"text-right"}," İşlemler ",-1))])]),e("tbody",null,[(c(!0),$(Q,null,Y(a(g),n=>(c(),$("tr",{key:n.id},[e("td",null,[e("div",Z,r(n.vendor?.name??"-"),1),e("div",tt,r(n.account?.name??"-"),1)]),e("td",null,[e("div",null,r(a(S)(n.expense_date)),1),e("div",et,r(a(S)(n.due_date)),1)]),e("td",at,r(a(y)(n.amount)),1),e("td",lt,r(a(y)(n.paid_amount)),1),e("td",ot,r(a(y)(n.remaining)),1),e("td",null,[t(L,{size:"small",color:a(E)(n.status),variant:"tonal"},{default:o(()=>[p(r(a(G)(n.status)),1)]),_:2},1032,["color"])]),e("td",st,[t(V,{icon:"",size:"small",variant:"text",to:`/expenses/${n.id}`},{default:o(()=>[t(q,{icon:"ri-eye-line"})]),_:1},8,["to"])])]))),128)),a(g).length===0?(c(),$("tr",nt,[e("td",rt,r(s.$t("common.noRecords")),1)])):M("",!0)])]),_:1}),t(D,{class:"d-flex justify-space-between align-center flex-wrap gap-3"},{default:o(()=>[e("span",dt,r(s.$t("common.totalRecords",{count:a(f).total})),1),t(P,{"model-value":a(f).current_page,length:a(f).last_page,"total-visible":7,"onUpdate:modelValue":v},null,8,["model-value","length"])]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}))}});export{Dt as default};
