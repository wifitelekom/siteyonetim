import{u as O}from"./useAbortOnUnmount-D2zdVzb9.js";import{$ as w,T as C,x as _,p as z}from"./main-OjHNd2U9.js";import{a as B,f as h}from"./formatters-BEv4aA23.js";import{e as E,b as $}from"./statusHelpers-B7BIhNzn.js";import{V as F,a as r}from"./VRow-Ba58lXtG.js";import{V as U}from"./VCard-9RfFlHpT.js";import{V as S}from"./VCardText-YweTyZzP.js";import{V as A}from"./VSelect-CMe3Xagq.js";import{V as x}from"./VTextField-CMxHKe9w.js";import{V as q}from"./VAlert-DafHPFjN.js";import{V as I}from"./VTable-ByowNMkP.js";import{V as K}from"./VChip-CnrRRXXG.js";import{V as L}from"./VPagination-Laqr3CkN.js";import{j as P,h as d,D as R,Q as p,R as D,S as s,q as e,y as a,a8 as c,u as l,O as n,ad as M,V as b,F as Q,ab as Y}from"./vendor-DfCbaU-T.js";import"./vuetify-BWJcAN87.js";import"./VAvatar-BcaC_ZEa.js";import"./VList-B1ov9hmg.js";import"./VDivider-CUijZXd4.js";import"./VCheckboxBtn-B6JwM7Rr.js";import"./VSelectionControl-Ck2LTPqY.js";const H={class:"d-flex align-center justify-space-between mb-2"},J={class:"d-flex gap-3 justify-end"},W={class:"font-weight-medium"},X={class:"text-caption text-medium-emphasis"},Z={class:"text-caption text-medium-emphasis"},tt={class:"text-right"},et={class:"text-right"},at={class:"text-right"},lt={class:"text-right"},st={key:0},ot={class:"text-sm text-medium-emphasis"},Bt=P({__name:"index",setup(it){O();const V=d(!1),g=d(!1),m=d(""),y=d([]),k=d([]),T=d([]),f=d({current_page:1,last_page:1,per_page:15,total:0}),i=d({vendor_id:null,status:null,from:"",to:"",search:""}),j=async()=>{g.value=!0;try{const u=await w("/expenses/meta");k.value=u.data.vendors}catch(u){m.value=C(u,"Filtre verileri alinamadi.")}finally{g.value=!1}},v=async(u=1)=>{V.value=!0,m.value="";try{const t=await w("/expenses",{query:{page:u,vendor_id:i.value.vendor_id||void 0,status:i.value.status||void 0,from:i.value.from||void 0,to:i.value.to||void 0,search:i.value.search||void 0}});y.value=t.data,f.value=t.meta,T.value=t.filters.status}catch(t){m.value=C(t,"Gider listesi alinamadi.")}finally{V.value=!1}},G=async()=>{await v(1)},N=async()=>{i.value={vendor_id:null,status:null,from:"",to:"",search:""},await v(1)};return R(async()=>{await Promise.allSettled([j(),v(1)])}),(u,t)=>(p(),D(F,null,{default:s(()=>[e(r,{cols:"12"},{default:s(()=>[a("div",H,[t[6]||(t[6]=a("div",null,[a("h4",{class:"text-h4 mb-1"}," Giderler "),a("p",{class:"text-medium-emphasis mb-0"}," Gider kayitlarini filtreleyin ve yonetin ")],-1)),e(_,{color:"primary","prepend-icon":"ri-add-line",to:"/expenses/create"},{default:s(()=>[...t[5]||(t[5]=[c(" Yeni Gider ",-1)])]),_:1})])]),_:1}),e(r,{cols:"12"},{default:s(()=>[e(U,{loading:l(g)},{default:s(()=>[e(S,null,{default:s(()=>[e(F,null,{default:s(()=>[e(r,{cols:"12",md:"3"},{default:s(()=>[e(A,{modelValue:l(i).vendor_id,"onUpdate:modelValue":t[0]||(t[0]=o=>l(i).vendor_id=o),items:l(k),"item-title":"label","item-value":"id",label:"Tedarikci",clearable:""},null,8,["modelValue","items"])]),_:1}),e(r,{cols:"12",md:"3"},{default:s(()=>[e(A,{modelValue:l(i).status,"onUpdate:modelValue":t[1]||(t[1]=o=>l(i).status=o),items:l(T),"item-title":"label","item-value":"value",label:"Durum",clearable:""},null,8,["modelValue","items"])]),_:1}),e(r,{cols:"12",md:"2"},{default:s(()=>[e(x,{modelValue:l(i).from,"onUpdate:modelValue":t[2]||(t[2]=o=>l(i).from=o),type:"date",label:"Baslangic"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"2"},{default:s(()=>[e(x,{modelValue:l(i).to,"onUpdate:modelValue":t[3]||(t[3]=o=>l(i).to=o),type:"date",label:"Bitis"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"2"},{default:s(()=>[e(x,{modelValue:l(i).search,"onUpdate:modelValue":t[4]||(t[4]=o=>l(i).search=o),label:"Arama",placeholder:"Aciklama"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12"},{default:s(()=>[a("div",J,[e(_,{variant:"outlined",onClick:N},{default:s(()=>[...t[7]||(t[7]=[c(" Temizle ",-1)])]),_:1}),e(_,{color:"primary",onClick:G},{default:s(()=>[...t[8]||(t[8]=[c(" Filtrele ",-1)])]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["loading"])]),_:1}),l(m)?(p(),D(r,{key:0,cols:"12"},{default:s(()=>[e(q,{type:"error",variant:"tonal"},{default:s(()=>[c(n(l(m)),1)]),_:1})]),_:1})):M("",!0),e(r,{cols:"12"},{default:s(()=>[e(U,{loading:l(V)},{default:s(()=>[e(I,{density:"comfortable"},{default:s(()=>[t[10]||(t[10]=a("thead",null,[a("tr",null,[a("th",null,"Tedarikci"),a("th",null,"Tarih / Vade"),a("th",{class:"text-right"}," Tutar "),a("th",{class:"text-right"}," Odenen "),a("th",{class:"text-right"}," Kalan "),a("th",null,"Durum"),a("th",{class:"text-right"}," Islemler ")])],-1)),a("tbody",null,[(p(!0),b(Q,null,Y(l(y),o=>(p(),b("tr",{key:o.id},[a("td",null,[a("div",W,n(o.vendor?.name??"-"),1),a("div",X,n(o.account?.name??"-"),1)]),a("td",null,[a("div",null,n(l(B)(o.expense_date)),1),a("div",Z,n(l(B)(o.due_date)),1)]),a("td",tt,n(l(h)(o.amount)),1),a("td",et,n(l(h)(o.paid_amount)),1),a("td",at,n(l(h)(o.remaining)),1),a("td",null,[e(K,{size:"small",color:l(E)(o.status),variant:"tonal"},{default:s(()=>[c(n(l($)(o.status)),1)]),_:2},1032,["color"])]),a("td",lt,[e(_,{icon:"",size:"small",variant:"text",to:`/expenses/${o.id}`},{default:s(()=>[e(z,{icon:"ri-eye-line"})]),_:1},8,["to"])])]))),128)),l(y).length===0?(p(),b("tr",st,[...t[9]||(t[9]=[a("td",{colspan:"7",class:"text-center text-medium-emphasis py-6"}," Kayit bulunamadi. ",-1)])])):M("",!0)])]),_:1}),e(S,{class:"d-flex justify-space-between align-center flex-wrap gap-3"},{default:s(()=>[a("span",ot,"Toplam "+n(l(f).total)+" kayit",1),e(L,{"model-value":l(f).current_page,length:l(f).last_page,"total-visible":7,"onUpdate:modelValue":v},null,8,["model-value","length"])]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}))}});export{Bt as default};
