import{j as A,h as i,Q as b,R as _,S as o,ac as U,q as a,y as u,a8 as p,u as l,ag as C,O as y,ad as N}from"./vendor-DfCbaU-T.js";import{x as g,$ as E,T as h,U as B}from"./main-Btr01hqQ.js";import{u as S,i as $}from"./useAbortOnUnmount-D2zdVzb9.js";import{V as j,r as F,e as M}from"./VForm-D0fBkA3g.js";import{V as x,a as t}from"./VRow-CRn_xzm0.js";import{V as O}from"./VCard-BmPLTxO3.js";import{V as q}from"./VCardText-H2SttjXr.js";import{V as D}from"./VAlert-R8JWKysv.js";import{V}from"./VTextField-pVQuWnMO.js";import{V as I}from"./VTextarea-DCdZ-5SO.js";import"./vuetify-DGZOXKNZ.js";import"./VAvatar-96oJdN2D.js";const L={class:"d-flex align-center justify-space-between mb-2"},P={class:"d-flex justify-end gap-3"},oe=A({__name:"create",setup(Q){const{withAbort:c}=S(),T=U(),m=i(!1),f=i(""),n=i({}),r=i({name:"",tax_no:"",phone:"",email:"",address:""}),v=i(null),w=[F()],R=[d=>typeof d!="string"||d.trim().length===0?!0:M()(d)],k=async()=>{if((await v.value?.validate())?.valid){m.value=!0,f.value="",n.value={};try{await c(e=>E("/vendors",{method:"POST",body:{name:r.value.name,tax_no:r.value.tax_no||null,phone:r.value.phone||null,email:r.value.email||null,address:r.value.address||null},signal:e})),await T.push("/management/vendors")}catch(e){if($(e))return;f.value=h(e,"Tedarikçi oluşturulamadı."),n.value=B(e)}finally{m.value=!1}}};return(d,e)=>(b(),_(x,null,{default:o(()=>[a(t,{cols:"12"},{default:o(()=>[u("div",L,[e[6]||(e[6]=u("div",null,[u("h4",{class:"text-h4 mb-1"}," Yeni Tedarikçi "),u("p",{class:"text-medium-emphasis mb-0"}," Tedarikçi bilgilerini girin ")],-1)),a(g,{variant:"outlined",to:"/management/vendors"},{default:o(()=>[...e[5]||(e[5]=[p(" Listeye Don ",-1)])]),_:1})])]),_:1}),a(t,{cols:"12"},{default:o(()=>[a(O,{loading:l(m)},{default:o(()=>[a(q,null,{default:o(()=>[a(j,{ref_key:"formRef",ref:v,onSubmit:C(k,["prevent"])},{default:o(()=>[a(x,null,{default:o(()=>[l(f)?(b(),_(t,{key:0,cols:"12"},{default:o(()=>[a(D,{type:"error",variant:"tonal"},{default:o(()=>[p(y(l(f)),1)]),_:1})]),_:1})):N("",!0),a(t,{cols:"12",md:"6"},{default:o(()=>[a(V,{modelValue:l(r).name,"onUpdate:modelValue":e[0]||(e[0]=s=>l(r).name=s),label:d.$t("common.companyName"),rules:w,"error-messages":l(n).name??[]},null,8,["modelValue","label","error-messages"])]),_:1}),a(t,{cols:"12",md:"6"},{default:o(()=>[a(V,{modelValue:l(r).tax_no,"onUpdate:modelValue":e[1]||(e[1]=s=>l(r).tax_no=s),label:"Vergi No","error-messages":l(n).tax_no??[]},null,8,["modelValue","error-messages"])]),_:1}),a(t,{cols:"12",md:"6"},{default:o(()=>[a(V,{modelValue:l(r).phone,"onUpdate:modelValue":e[2]||(e[2]=s=>l(r).phone=s),label:"Telefon","error-messages":l(n).phone??[]},null,8,["modelValue","error-messages"])]),_:1}),a(t,{cols:"12",md:"6"},{default:o(()=>[a(V,{modelValue:l(r).email,"onUpdate:modelValue":e[3]||(e[3]=s=>l(r).email=s),type:"email",label:"E-posta",rules:R,"error-messages":l(n).email??[]},null,8,["modelValue","error-messages"])]),_:1}),a(t,{cols:"12"},{default:o(()=>[a(I,{modelValue:l(r).address,"onUpdate:modelValue":e[4]||(e[4]=s=>l(r).address=s),label:"Adres",rows:"3","error-messages":l(n).address??[]},null,8,["modelValue","error-messages"])]),_:1}),a(t,{cols:"12"},{default:o(()=>[u("div",P,[a(g,{variant:"outlined",to:"/management/vendors"},{default:o(()=>[...e[7]||(e[7]=[p(" Iptal ",-1)])]),_:1}),a(g,{color:"primary",type:"submit",loading:l(m),disabled:l(m)},{default:o(()=>[p(y(d.$t("common.save")),1)]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}))}});export{oe as default};
