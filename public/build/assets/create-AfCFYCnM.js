import{j as C,h as u,Q as b,R as v,S as a,ac as T,q as t,y as i,a8 as f,u as o,ag as h,O as _,ad as B}from"./vendor-qaEqcc9M.js";import{u as S,i as U}from"./useAbortOnUnmount-B_TyPYrd.js";import{x as p,$ as D,T as E,U as N}from"./main-DUODoQpR.js";import{V as j,r as y}from"./VForm-AfrkaUJk.js";import{V as g,a as s}from"./VRow-dBMGxjTF.js";import{V as F}from"./VCard-DEMyauu_.js";import{V as M}from"./VCardText-lEnvPJxp.js";import{V as O}from"./VAlert-DIbLZTVg.js";import{V as Y}from"./VTextField-BgtisBQp.js";import{V as $}from"./VTextarea-BWwjO-LJ.js";import{V as q}from"./VSwitch-C2gHzlAV.js";import"./vuetify-CYvz9UpR.js";import"./VAvatar-DfdxhEHH.js";import"./VSelectionControl-DtdcpgRj.js";const I={class:"d-flex align-center justify-space-between mb-2"},H={class:"d-flex justify-end gap-3"},se=C({__name:"create",setup(L){const{withAbort:x}=S(),w=T(),r=u(!1),d=u(""),m=u({}),l=u({title:"",content:"",is_published:!1}),c=u(null),R=[y()],k=[y()],A=async()=>{if((await c.value?.validate())?.valid){r.value=!0,d.value="",m.value={};try{await x(e=>D("/announcements",{method:"POST",body:l.value,signal:e})),await w.push("/announcements")}catch(e){if(U(e))return;d.value=E(e,"Duyuru olusturulamadi."),m.value=N(e)}finally{r.value=!1}}};return(V,e)=>(b(),v(g,null,{default:a(()=>[t(s,{cols:"12"},{default:a(()=>[i("div",I,[e[4]||(e[4]=i("div",null,[i("h4",{class:"text-h4 mb-1"}," Yeni Duyuru "),i("p",{class:"text-medium-emphasis mb-0"}," Yeni bir duyuru olusturun ")],-1)),t(p,{variant:"outlined",to:"/announcements"},{default:a(()=>[...e[3]||(e[3]=[f(" Listeye Don ",-1)])]),_:1})])]),_:1}),t(s,{cols:"12"},{default:a(()=>[t(F,{loading:o(r)},{default:a(()=>[t(M,null,{default:a(()=>[t(j,{ref_key:"formRef",ref:c,onSubmit:h(A,["prevent"])},{default:a(()=>[t(g,null,{default:a(()=>[o(d)?(b(),v(s,{key:0,cols:"12"},{default:a(()=>[t(O,{type:"error",variant:"tonal"},{default:a(()=>[f(_(o(d)),1)]),_:1})]),_:1})):B("",!0),t(s,{cols:"12"},{default:a(()=>[t(Y,{modelValue:o(l).title,"onUpdate:modelValue":e[0]||(e[0]=n=>o(l).title=n),label:"Baslik",rules:R,"error-messages":o(m).title??[]},null,8,["modelValue","error-messages"])]),_:1}),t(s,{cols:"12"},{default:a(()=>[t($,{modelValue:o(l).content,"onUpdate:modelValue":e[1]||(e[1]=n=>o(l).content=n),label:"Icerik",rows:"6",rules:k,"error-messages":o(m).content??[]},null,8,["modelValue","error-messages"])]),_:1}),t(s,{cols:"12"},{default:a(()=>[t(q,{modelValue:o(l).is_published,"onUpdate:modelValue":e[2]||(e[2]=n=>o(l).is_published=n),label:"Hemen Yayinla",color:"success"},null,8,["modelValue"])]),_:1}),t(s,{cols:"12"},{default:a(()=>[i("div",H,[t(p,{variant:"outlined",to:"/announcements"},{default:a(()=>[...e[5]||(e[5]=[f(" Iptal ",-1)])]),_:1}),t(p,{color:"primary",type:"submit",loading:o(r),disabled:o(r)},{default:a(()=>[f(_(V.$t("common.save")),1)]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}))}});export{se as default};
