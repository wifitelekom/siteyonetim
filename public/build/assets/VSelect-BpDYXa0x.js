import{V as ve,m as Ae}from"./VTextField-BgtisBQp.js";import{w as j,y as T,F as Q,v as H,s as q,a as me,h as J,f as L,o as ke,E as be,t as ae,D as De,q as I,I as Re,x as Be,J as Fe,n as pe,a8 as Ee}from"./vendor-qaEqcc9M.js";import{C as Le,D as _e,ao as Oe,am as Me,E as He,ap as ze,q as he,r as Ne,O as qe}from"./main-DUODoQpR.js";import{e as de,x as Se,u as fe,p as X,j as Pe,a6 as Ke,y as re,at as Ue,ax as $e,D as Ie,k as je,B as We,a9 as Je,r as ne,ah as xe,l as ge,w as Xe,n as ie,ay as ye,a3 as Ve,N as Ye,I as Ge,az as Qe,aA as Ze}from"./vuetify-CYvz9UpR.js";import{u as et,m as tt,V as lt,a as we,c as nt}from"./VList-BpKoOtV6.js";import{V as at}from"./VDivider-CiCMqi-4.js";import{V as ot}from"./VCheckboxBtn-B_mUIJHa.js";import{V as st}from"./VAvatar-DfdxhEHH.js";import{V as ut}from"./VChip-CzUAJTHl.js";const rt=X({renderless:Boolean,...Pe()},"VVirtualScrollItem"),it=de()({name:"VVirtualScrollItem",inheritAttrs:!1,props:rt(),emits:{"update:height":e=>!0},setup(e,u){let{attrs:l,emit:i,slots:n}=u;const{resizeRef:v,contentRect:h}=Se(void 0,"border");j(()=>h.value?.height,a=>{a!=null&&i("update:height",a)}),fe(()=>e.renderless?T(Q,null,[n.default?.({itemRef:v})]):T("div",H({ref:v,class:["v-virtual-scroll__item",e.class],style:e.style},l),[n.default?.()]))}}),ct=-1,dt=1,ce=100,ft=X({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function vt(e,u){const l=Ke(),i=q(0);me(()=>{i.value=parseFloat(e.itemHeight||0)});const n=q(0),v=q(Math.ceil((parseInt(e.height)||l.height.value)/(i.value||16))||1),h=q(0),a=q(0),c=J(),b=J();let s=0;const{resizeRef:C,contentRect:z}=Se();me(()=>{C.value=c.value});const _=L(()=>c.value===document.documentElement?l.height.value:z.value?.height||parseInt(e.height)||0),A=L(()=>!!(c.value&&b.value&&_.value&&i.value));let y=Array.from({length:u.value.length}),V=Array.from({length:u.value.length});const S=q(0);let D=-1;function Y(o){return y[o]||i.value}const N=$e(()=>{const o=performance.now();V[0]=0;const d=u.value.length;for(let k=1;k<=d;k++)V[k]=(V[k-1]||0)+Y(k-1);S.value=Math.max(S.value,performance.now()-o)},S),w=j(A,o=>{o&&(w(),s=b.value.offsetTop,N.immediate(),F(),~D&&be(()=>{Ie&&window.requestAnimationFrame(()=>{le(D),D=-1})}))});ke(()=>{N.clear()});function oe(o,d){const k=y[o],t=i.value;i.value=t?Math.min(i.value,d):d,(k!==d||t!==i.value)&&(y[o]=d,N())}function R(o){o=re(o,0,u.value.length);const d=Math.floor(o),k=o%1,t=d+1,f=V[d]||0,m=V[t]||f;return f+(m-f)*k}function Z(o){return mt(V,o)}let K=0,U=0,B=0;j(_,(o,d)=>{d&&(F(),o<d&&requestAnimationFrame(()=>{U=0,F()}))});let G=-1;function se(){if(!c.value||!b.value)return;const o=c.value.scrollTop,d=performance.now();d-B>500?(U=Math.sign(o-K),s=b.value.offsetTop):U=o-K,K=o,B=d,window.clearTimeout(G),G=window.setTimeout(ee,500),F()}function ee(){!c.value||!b.value||(U=0,B=0,window.clearTimeout(G),F())}let te=-1;function F(){cancelAnimationFrame(te),te=requestAnimationFrame(W)}function W(){if(!c.value||!_.value||!i.value)return;const o=K-s,d=Math.sign(U),k=Math.max(0,o-ce),t=re(Z(k),0,u.value.length),f=o+_.value+ce,m=re(Z(f)+1,t+1,u.value.length);if((d!==ct||t<n.value)&&(d!==dt||m>v.value)){const O=R(n.value)-R(t),E=R(m)-R(v.value);Math.max(O,E)>ce?(n.value=t,v.value=m):(t<=0&&(n.value=t),m>=u.value.length&&(v.value=m))}h.value=R(n.value),a.value=R(u.value.length)-R(v.value)}function le(o){const d=R(o);!c.value||o&&!d?D=o:c.value.scrollTop=d}const ue=L(()=>u.value.slice(n.value,v.value).map((o,d)=>{const k=d+n.value;return{raw:o,index:k,key:Ue(o,e.itemKey,k)}}));return j(u,()=>{y=Array.from({length:u.value.length}),V=Array.from({length:u.value.length}),N.immediate(),F()},{deep:1}),{calculateVisibleItems:F,containerRef:c,markerRef:b,computedItems:ue,paddingTop:h,paddingBottom:a,scrollToIndex:le,handleScroll:se,handleScrollend:ee,handleItemResize:oe}}function mt(e,u){let l=e.length-1,i=0,n=0,v=null,h=-1;if(e[l]<u)return l;for(;i<=l;)if(n=i+l>>1,v=e[n],v>u)l=n-1;else if(v<u)h=n,i=n+1;else return v===u?n:i;return h}const pt=X({items:{type:Array,default:()=>[]},renderless:Boolean,...ft(),...Pe(),..._e()},"VVirtualScroll"),ht=de()({name:"VVirtualScroll",props:pt(),setup(e,u){let{slots:l}=u;const i=je("VVirtualScroll"),{dimensionStyles:n}=Le(e),{calculateVisibleItems:v,containerRef:h,markerRef:a,handleScroll:c,handleScrollend:b,handleItemResize:s,scrollToIndex:C,paddingTop:z,paddingBottom:_,computedItems:A}=vt(e,ae(()=>e.items));return We(()=>e.renderless,()=>{function y(){const S=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";h.value===document.documentElement?(document[S]("scroll",c,{passive:!0}),document[S]("scrollend",b)):(h.value?.[S]("scroll",c,{passive:!0}),h.value?.[S]("scrollend",b))}De(()=>{h.value=Je(i.vnode.el,!0),y(!0)}),ke(y)}),fe(()=>{const y=A.value.map(V=>I(it,{key:V.key,renderless:e.renderless,"onUpdate:height":S=>s(V.index,S)},{default:S=>l.default?.({item:V.raw,index:V.index,...S})}));return e.renderless?T(Q,null,[T("div",{ref:a,class:"v-virtual-scroll__spacer",style:{paddingTop:ne(z.value)}},null),y,T("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:ne(_.value)}},null)]):T("div",{ref:h,class:Be(["v-virtual-scroll",e.class]),onScrollPassive:c,onScrollend:b,style:Re([n.value,e.style])},[T("div",{ref:a,class:"v-virtual-scroll__container",style:{paddingTop:ne(z.value),paddingBottom:ne(_.value)}},[y])])}),{calculateVisibleItems:v,scrollToIndex:C}}});function gt(e,u){const l=q(!1);let i;function n(a){cancelAnimationFrame(i),l.value=!0,i=requestAnimationFrame(()=>{i=requestAnimationFrame(()=>{l.value=!1})})}async function v(){await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>{if(l.value){const c=j(l,()=>{c(),a()})}else a()})}async function h(a){if(a.key==="Tab"&&u.value?.focus(),!["PageDown","PageUp","Home","End"].includes(a.key))return;const c=e.value?.$el;if(!c)return;(a.key==="Home"||a.key==="End")&&c.scrollTo({top:a.key==="Home"?0:c.scrollHeight,behavior:"smooth"}),await v();const b=c.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(a.key==="PageDown"||a.key==="Home"){const s=c.getBoundingClientRect().top;for(const C of b)if(C.getBoundingClientRect().top>=s){C.focus();break}}else{const s=c.getBoundingClientRect().bottom;for(const C of[...b].reverse())if(C.getBoundingClientRect().bottom<=s){C.focus();break}}}return{onScrollPassive:n,onKeydown:h}}const yt=X({closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"}},"autocomplete");function Vt(e,u){const{t:l}=xe(),i=Fe(),n=L(()=>`menu-${i}`),v=ae(()=>pe(u)),h=ae(()=>n.value),a=ae(()=>l(pe(u)?e.closeText:e.openText));return{menuId:n,ariaExpanded:v,ariaControls:h,ariaLabel:a}}const wt=X({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:Ge,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...yt(),...tt({itemChildren:!1})},"Select"),kt=X({...wt(),...Ye(Ae({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...He({transition:{component:ze}})},"VSelect"),Rt=de()({name:"VSelect",props:kt(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,u){let{slots:l}=u;const{t:i}=xe(),n=J(),v=J(),h=J(),{items:a,transformIn:c,transformOut:b}=et(e),s=ge(e,"modelValue",[],t=>c(t===null?[null]:Xe(t)),t=>{const f=b(t);return e.multiple?f:f[0]??null}),C=L(()=>typeof e.counterValue=="function"?e.counterValue(s.value):typeof e.counterValue=="number"?e.counterValue:s.value.length),z=Oe(e),_=L(()=>s.value.map(t=>t.value)),A=q(!1);let y="",V=-1,S;const D=L(()=>e.hideSelected?a.value.filter(t=>!s.value.some(f=>(e.valueComparator||ie)(f,t))):a.value),Y=L(()=>e.hideNoData&&!D.value.length||z.isReadonly.value||z.isDisabled.value),N=ge(e,"menu"),w=L({get:()=>N.value,set:t=>{N.value&&!t&&v.value?.Î¨openChildren.size||t&&Y.value||(N.value=t)}}),{menuId:oe,ariaExpanded:R,ariaControls:Z,ariaLabel:K}=Vt(e,w),U=L(()=>({...e.menuProps,activatorProps:{...e.menuProps?.activatorProps||{},"aria-haspopup":"listbox"}})),B=J(),G=gt(B,n);function se(t){e.openOnClear&&(w.value=!0)}function ee(){Y.value||(w.value=!w.value)}function te(t){ye(t)&&F(t)}function F(t){if(!t.key||z.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"," "].includes(t.key)&&(w.value=!0),["Escape","Tab"].includes(t.key)&&(w.value=!1),t.key==="Home"?B.value?.focus("first"):t.key==="End"&&B.value?.focus("last");const f=1e3;if(!ye(t))return;const m=performance.now();m-S>f&&(y="",V=-1),y+=t.key.toLowerCase(),S=m;const O=D.value;function E(){let g=r();return g||y.at(-1)===y.at(-2)&&(y=y.slice(0,-1),g=r(),g)||(V=-1,g=r(),g)?g:(y=t.key.toLowerCase(),r())}function r(){for(let g=V+1;g<O.length;g++){const M=O[g];if(M.title.toLowerCase().startsWith(y))return[M,g]}}const p=E();if(!p)return;const[P,$]=p;V=$,B.value?.focus($),e.multiple||(s.value=[P])}function W(t){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!t.props.disabled)if(e.multiple){const m=s.value.findIndex(E=>(e.valueComparator||ie)(E.value,t.value)),O=f??!~m;if(~m){const E=O?[...s.value,t]:[...s.value];E.splice(m,1),s.value=E}else O&&(s.value=[...s.value,t])}else{const m=f!==!1;s.value=m?[t]:[],be(()=>{w.value=!1})}}function le(t){B.value?.$el.contains(t.relatedTarget)||(w.value=!1)}function ue(){e.eager&&h.value?.calculateVisibleItems()}function o(){A.value&&n.value?.focus()}function d(t){A.value=!0}function k(t){if(t==null)s.value=[];else if(Ve(n.value,":autofill")||Ve(n.value,":-webkit-autofill")){const f=a.value.find(m=>m.title===t);f&&W(f)}else n.value&&(n.value.value="")}return j(w,()=>{if(!e.hideSelected&&w.value&&s.value.length){const t=D.value.findIndex(f=>s.value.some(m=>(e.valueComparator||ie)(m.value,f.value)));Ie&&!e.noAutoScroll&&window.requestAnimationFrame(()=>{t>=0&&h.value?.scrollToIndex(t)})}}),j(a,(t,f)=>{w.value||A.value&&e.hideNoData&&!f.length&&t.length&&(w.value=!0)}),fe(()=>{const t=!!(e.chips||l.chip),f=!!(!e.hideNoData||D.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),m=s.value.length>0,O=ve.filterProps(e),E=m||!A.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return I(ve,H({ref:n},O,{modelValue:s.value.map(r=>r.props.value).join(", "),"onUpdate:modelValue":k,focused:A.value,"onUpdate:focused":r=>A.value=r,validationValue:s.externalValue,counterValue:C.value,dirty:m,class:["v-select",{"v-select--active-menu":w.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":s.value.length,"v-select--selection-slot":!!l.selection},e.class],style:e.style,inputmode:"none",placeholder:E,"onClick:clear":se,"onMousedown:control":ee,onBlur:le,onKeydown:F,"aria-expanded":R.value,"aria-controls":Z.value,"aria-label":K.value,title:K.value}),{...l,default:()=>T(Q,null,[I(Ne,H({id:oe.value,ref:v,modelValue:w.value,"onUpdate:modelValue":r=>w.value=r,activator:"parent",contentClass:"v-select__content",disabled:Y.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:ue,onAfterLeave:o},U.value),{default:()=>[f&&I(lt,H({ref:B,selected:_.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:r=>r.preventDefault(),onKeydown:te,onFocusin:d,tabindex:"-1",selectable:!0,"aria-live":"polite","aria-label":`${e.label}-list`,color:e.itemColor??e.color},G,e.listProps),{default:()=>[l["prepend-item"]?.(),!D.value.length&&!e.hideNoData&&(l["no-data"]?.()??I(we,{key:"no-data",title:i(e.noDataText)},null)),I(ht,{ref:h,renderless:!0,items:D.value,itemKey:"value"},{default:r=>{let{item:p,index:P,itemRef:$}=r;const g=Qe(p.props),M=H(p.props,{ref:$,key:p.value,onClick:()=>W(p,null)});return p.type==="divider"?l.divider?.({props:p.raw,index:P})??I(at,H(p.props,{key:`divider-${P}`}),null):p.type==="subheader"?l.subheader?.({props:p.raw,index:P})??I(nt,H(p.props,{key:`subheader-${P}`}),null):l.item?.({item:p,index:P,props:M})??I(we,H(M,{role:"option"}),{prepend:x=>{let{isSelected:Te}=x;return T(Q,null,[e.multiple&&!e.hideSelected?I(ot,{key:p.value,modelValue:Te,ripple:!1,tabindex:"-1",onClick:Ce=>Ce.preventDefault()},null):void 0,g.prependAvatar&&I(st,{image:g.prependAvatar},null),g.prependIcon&&I(he,{icon:g.prependIcon},null)])}})}}),l["append-item"]?.()]})]}),s.value.map((r,p)=>{function P(x){x.stopPropagation(),x.preventDefault(),W(r,!1)}const $={"onClick:close":P,onKeydown(x){x.key!=="Enter"&&x.key!==" "||(x.preventDefault(),x.stopPropagation(),P(x))},onMousedown(x){x.preventDefault(),x.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},g=t?!!l.chip:!!l.selection,M=g?Ze(t?l.chip({item:r,index:p,props:$}):l.selection({item:r,index:p})):void 0;if(!(g&&!M))return T("div",{key:r.value,class:"v-select__selection"},[t?l.chip?I(qe,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:r.title}}},{default:()=>[M]}):I(ut,H({key:"chip",closable:e.closableChips,size:"small",text:r.title,disabled:r.props.disabled},$),null):M??T("span",{class:"v-select__selection-text"},[r.title,e.multiple&&p<s.value.length-1&&T("span",{class:"v-select__selection-comma"},[Ee(",")])])])})]),"append-inner":function(){for(var r=arguments.length,p=new Array(r),P=0;P<r;P++)p[P]=arguments[P];return T(Q,null,[l["append-inner"]?.(...p),e.menuIcon?I(he,{class:"v-select__menu-icon",color:n.value?.fieldIconColor,icon:e.menuIcon},null):void 0])}})}),Me({isFocused:A,menu:w,select:W},n)}});export{Rt as V};
