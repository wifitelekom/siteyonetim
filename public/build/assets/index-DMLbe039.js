import{u as j}from"./useAbortOnUnmount-B_TyPYrd.js";import{$ as x,T as w,x as _,q as A}from"./main-DUODoQpR.js";import{a as N,f as R}from"./formatters-BEv4aA23.js";import{m as S}from"./statusHelpers-D3tNe4to.js";import{V as k,a as m}from"./VRow-dBMGxjTF.js";import{V as C}from"./VCard-DEMyauu_.js";import{V as T}from"./VCardText-lEnvPJxp.js";import{V as q}from"./VSelect-BpDYXa0x.js";import{V as g}from"./VTextField-BgtisBQp.js";import{V as O}from"./VAlert-DIbLZTVg.js";import{V as P}from"./VTable-CDiDVqFm.js";import{V as E}from"./VPagination-Dp4qKX6V.js";import{j as L,h as i,D as z,Q as c,R as D,S as o,q as e,y as t,u as a,a8 as y,O as r,ad as F,V as b,F as I,ab as Q}from"./vendor-qaEqcc9M.js";import"./vuetify-CYvz9UpR.js";import"./VAvatar-DfdxhEHH.js";import"./VList-BpKoOtV6.js";import"./VDivider-CiCMqi-4.js";import"./VCheckboxBtn-B_mUIJHa.js";import"./VSelectionControl-DtdcpgRj.js";import"./VChip-CzUAJTHl.js";const G={class:"d-flex gap-3 justify-end"},H={class:"text-right"},J={class:"text-right"},K={class:"text-caption text-medium-emphasis"},W={class:"text-right text-error font-weight-medium"},X={class:"text-right"},Y={key:0},Z={colspan:"5",class:"text-center text-medium-emphasis py-6"},ee={class:"text-sm text-medium-emphasis"},$e=L({__name:"index",setup(te){j();const v=i(!1),h=i(!1),u=i(""),V=i([]),$=i([]),f=i({current_page:1,last_page:1,per_page:15,total:0}),d=i({vendor_id:null,from:"",to:"",search:""}),U=async()=>{h.value=!0;try{const l=await x("/payments/meta");$.value=l.data.vendors}catch(l){u.value=w(l,"Filtre verileri alınamadı.")}finally{h.value=!1}},p=async(l=1)=>{v.value=!0,u.value="";try{const s=await x("/payments",{query:{page:l,vendor_id:d.value.vendor_id||void 0,from:d.value.from||void 0,to:d.value.to||void 0,search:d.value.search||void 0}});V.value=s.data,f.value=s.meta}catch(s){u.value=w(s,"Ödeme listesi alınamadı.")}finally{v.value=!1}},B=async()=>{await p(1)},M=async()=>{d.value={vendor_id:null,from:"",to:"",search:""},await p(1)};return z(async()=>{await Promise.allSettled([U(),p(1)])}),(l,s)=>(c(),D(k,null,{default:o(()=>[e(m,{cols:"12"},{default:o(()=>[...s[4]||(s[4]=[t("div",{class:"d-flex align-center justify-space-between mb-2"},[t("div",null,[t("h4",{class:"text-h4 mb-1"}," Ödemeler "),t("p",{class:"text-medium-emphasis mb-0"}," Tedarikçi ödeme hareketlerini inceleyin ")])],-1)])]),_:1}),e(m,{cols:"12"},{default:o(()=>[e(C,{loading:a(h)},{default:o(()=>[e(T,null,{default:o(()=>[e(k,null,{default:o(()=>[e(m,{cols:"12",md:"3"},{default:o(()=>[e(q,{modelValue:a(d).vendor_id,"onUpdate:modelValue":s[0]||(s[0]=n=>a(d).vendor_id=n),items:a($),"item-title":"label","item-value":"id",label:l.$t("common.vendor"),clearable:""},null,8,["modelValue","items","label"])]),_:1}),e(m,{cols:"12",md:"3"},{default:o(()=>[e(g,{modelValue:a(d).from,"onUpdate:modelValue":s[1]||(s[1]=n=>a(d).from=n),type:"date",label:l.$t("common.startDate")},null,8,["modelValue","label"])]),_:1}),e(m,{cols:"12",md:"3"},{default:o(()=>[e(g,{modelValue:a(d).to,"onUpdate:modelValue":s[2]||(s[2]=n=>a(d).to=n),type:"date",label:l.$t("common.endDate")},null,8,["modelValue","label"])]),_:1}),e(m,{cols:"12",md:"3"},{default:o(()=>[e(g,{modelValue:a(d).search,"onUpdate:modelValue":s[3]||(s[3]=n=>a(d).search=n),label:l.$t("common.search"),placeholder:l.$t("common.searchDescriptionOrVendor")},null,8,["modelValue","label","placeholder"])]),_:1}),e(m,{cols:"12"},{default:o(()=>[t("div",G,[e(_,{variant:"outlined",onClick:M},{default:o(()=>[y(r(l.$t("common.clear")),1)]),_:1}),e(_,{color:"primary",onClick:B},{default:o(()=>[y(r(l.$t("common.filter")),1)]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["loading"])]),_:1}),a(u)?(c(),D(m,{key:0,cols:"12"},{default:o(()=>[e(O,{type:"error",variant:"tonal"},{default:o(()=>[y(r(a(u)),1)]),_:1})]),_:1})):F("",!0),e(m,{cols:"12"},{default:o(()=>[e(C,{loading:a(v)},{default:o(()=>[e(P,{density:"comfortable"},{default:o(()=>[t("thead",null,[t("tr",null,[t("th",null,r(l.$t("common.date")),1),t("th",null,r(l.$t("common.vendor")),1),t("th",null,r(l.$t("common.methodAndCash")),1),t("th",H,r(l.$t("common.amount")),1),t("th",J,r(l.$t("common.actions")),1)])]),t("tbody",null,[(c(!0),b(I,null,Q(a(V),n=>(c(),b("tr",{key:n.id},[t("td",null,r(a(N)(n.paid_at)),1),t("td",null,r(n.vendor?.name??"-"),1),t("td",null,[t("div",null,r(a(S)(n.method)),1),t("div",K,r(n.cash_account?.name??"-"),1)]),t("td",W,r(a(R)(n.total_amount)),1),t("td",X,[e(_,{icon:"",size:"small",variant:"text",to:`/payments/${n.id}`},{default:o(()=>[e(A,{icon:"ri-eye-line"})]),_:1},8,["to"])])]))),128)),a(V).length===0?(c(),b("tr",Y,[t("td",Z,r(l.$t("common.noRecords")),1)])):F("",!0)])]),_:1}),e(T,{class:"d-flex justify-space-between align-center flex-wrap gap-3"},{default:o(()=>[t("span",ee,r(l.$t("common.totalRecords",{count:a(f).total})),1),e(E,{"model-value":a(f).current_page,length:a(f).last_page,"total-visible":7,"onUpdate:modelValue":p},null,8,["model-value","length"])]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}))}});export{$e as default};
