import{e as z,f as B,r as C,q as u,x as I}from"./main-Btr01hqQ.js";import{j as L,ac as M,h as $,f as l,D as A,Q as f,R as g,S as e,q as t,y as n,O as s,u as a,a8 as c,ad as x}from"./vendor-DfCbaU-T.js";import{V}from"./VAvatar-96oJdN2D.js";import{V as D,a as r,b as p}from"./VList-BYpc2SqC.js";import{V as j}from"./VDivider-DEGojtwS.js";import{V as q}from"./VBadge-651L0YVD.js";const O={class:"text-caption font-weight-bold"},R={class:"d-flex gap-x-3 align-center"},T={class:"text-caption font-weight-bold"},U={class:"text-body-2 font-weight-medium text-high-emphasis"},K={class:"text-caption text-medium-emphasis"},P={class:"text-caption text-disabled"},X=L({__name:"UserProfile",setup(Q){const b=M(),o=z(),d=$(!1),{t:m}=B({useScope:"global"}),_=l(()=>o.user.value?.name??m("common.user")),y=l(()=>o.roles.value[0]??m("common.user")),w=l(()=>o.site.value?.name??m("navigation.noSiteAssigned")),S=l(()=>o.roles.value.includes("admin")||o.roles.value.includes("super-admin")),k=l(()=>o.can("sites.manage")),h=l(()=>_.value.trim().split(" ").filter(Boolean).slice(0,2).map(v=>v[0]).join("").toUpperCase()||"K"),N=async()=>{d.value=!0;try{await o.logout(),await b.replace("/login")}finally{d.value=!1}};return A(async()=>{await o.ensureSession()}),(i,v)=>(f(),g(q,{dot:"",bordered:"",location:"bottom right","offset-x":"2","offset-y":"2",color:"success",class:"user-profile-badge"},{default:e(()=>[t(V,{class:"cursor-pointer",size:"38",color:"primary",variant:"tonal"},{default:e(()=>[n("span",O,s(a(h)),1),t(C,{activator:"parent",width:"260",location:"bottom end",offset:"15px"},{default:e(()=>[t(D,null,{default:e(()=>[t(r,{class:"px-4 py-3"},{default:e(()=>[n("div",R,[t(V,{color:"primary",variant:"tonal"},{default:e(()=>[n("span",T,s(a(h)),1)]),_:1}),n("div",null,[n("div",U,s(a(_)),1),n("div",K,s(a(y)),1),n("div",P,s(a(w)),1)])])]),_:1}),t(j,{class:"my-1"}),t(r,{class:"px-4",to:"/"},{prepend:e(()=>[t(u,{icon:"ri-home-4-line",size:"22"})]),default:e(()=>[t(p,null,{default:e(()=>[c(s(i.$t("common.home")),1)]),_:1})]),_:1}),t(r,{class:"px-4",to:"/profile/password"},{prepend:e(()=>[t(u,{icon:"ri-lock-password-line",size:"22"})]),default:e(()=>[t(p,null,{default:e(()=>[c(s(i.$t("navigation.passwordChange")),1)]),_:1})]),_:1}),a(S)?(f(),g(r,{key:0,class:"px-4",to:"/management/site-settings"},{prepend:e(()=>[t(u,{icon:"ri-settings-3-line",size:"22"})]),default:e(()=>[t(p,null,{default:e(()=>[c(s(i.$t("navigation.siteSettings")),1)]),_:1})]),_:1})):x("",!0),a(k)?(f(),g(r,{key:1,class:"px-4",to:"/super/sites"},{prepend:e(()=>[t(u,{icon:"ri-shield-user-line",size:"22"})]),default:e(()=>[t(p,null,{default:e(()=>[c(s(i.$t("navigation.siteManagement")),1)]),_:1})]),_:1})):x("",!0),t(r,{class:"px-4 pt-2 pb-3"},{default:e(()=>[t(I,{block:"",color:"error",size:"small","append-icon":"ri-logout-box-r-line",loading:a(d),disabled:a(d),onClick:N},{default:e(()=>[c(s(i.$t("common.logout")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});export{X as _};
