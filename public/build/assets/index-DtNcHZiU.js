import{u as N}from"./useAbortOnUnmount-D2zdVzb9.js";import{$ as k,T as w,x as h,p as j}from"./main-OjHNd2U9.js";import{a as A,f as S}from"./formatters-BEv4aA23.js";import{m as R}from"./statusHelpers-B7BIhNzn.js";import{V as T,a as i}from"./VRow-Ba58lXtG.js";import{V as C}from"./VCard-9RfFlHpT.js";import{V as M}from"./VCardText-YweTyZzP.js";import{V as $}from"./VSelect-CMe3Xagq.js";import{V as g}from"./VTextField-CMxHKe9w.js";import{V as q}from"./VAlert-DafHPFjN.js";import{V as E}from"./VTable-ByowNMkP.js";import{V as I}from"./VPagination-Laqr3CkN.js";import{j as K,h as d,D as L,Q as p,R as B,S as o,q as t,y as e,u as l,a8 as y,O as n,ad as F,V as x,F as O,ab as P}from"./vendor-DfCbaU-T.js";import"./vuetify-BWJcAN87.js";import"./VAvatar-BcaC_ZEa.js";import"./VList-B1ov9hmg.js";import"./VDivider-CUijZXd4.js";import"./VCheckboxBtn-B6JwM7Rr.js";import"./VSelectionControl-Ck2LTPqY.js";import"./VChip-CnrRRXXG.js";const Q={class:"d-flex gap-3 justify-end"},Y={class:"font-weight-medium"},G={class:"text-caption text-medium-emphasis"},H={class:"text-right text-success font-weight-medium"},J={class:"text-right"},W={key:0},X={class:"text-sm text-medium-emphasis"},yt=K({__name:"index",setup(Z){N();const _=d(!1),V=d(!1),u=d(""),v=d([]),b=d([]),f=d({current_page:1,last_page:1,per_page:15,total:0}),r=d({apartment_id:null,from:"",to:"",search:""}),U=async()=>{V.value=!0;try{const m=await k("/receipts/meta");b.value=m.data.apartments}catch(m){u.value=w(m,"Filtre verileri alinamadi.")}finally{V.value=!1}},c=async(m=1)=>{_.value=!0,u.value="";try{const a=await k("/receipts",{query:{page:m,apartment_id:r.value.apartment_id||void 0,from:r.value.from||void 0,to:r.value.to||void 0,search:r.value.search||void 0}});v.value=a.data,f.value=a.meta}catch(a){u.value=w(a,"Tahsilat listesi alinamadi.")}finally{_.value=!1}},z=async()=>{await c(1)},D=async()=>{r.value={apartment_id:null,from:"",to:"",search:""},await c(1)};return L(async()=>{await Promise.allSettled([U(),c(1)])}),(m,a)=>(p(),B(T,null,{default:o(()=>[t(i,{cols:"12"},{default:o(()=>[...a[4]||(a[4]=[e("div",{class:"d-flex align-center justify-space-between mb-2"},[e("div",null,[e("h4",{class:"text-h4 mb-1"}," Tahsilatlar "),e("p",{class:"text-medium-emphasis mb-0"}," Makbuz ve tahsilat hareketlerini inceleyin ")])],-1)])]),_:1}),t(i,{cols:"12"},{default:o(()=>[t(C,{loading:l(V)},{default:o(()=>[t(M,null,{default:o(()=>[t(T,null,{default:o(()=>[t(i,{cols:"12",md:"3"},{default:o(()=>[t($,{modelValue:l(r).apartment_id,"onUpdate:modelValue":a[0]||(a[0]=s=>l(r).apartment_id=s),items:l(b),"item-title":"label","item-value":"id",label:"Daire",clearable:""},null,8,["modelValue","items"])]),_:1}),t(i,{cols:"12",md:"3"},{default:o(()=>[t(g,{modelValue:l(r).from,"onUpdate:modelValue":a[1]||(a[1]=s=>l(r).from=s),type:"date",label:"Baslangic"},null,8,["modelValue"])]),_:1}),t(i,{cols:"12",md:"3"},{default:o(()=>[t(g,{modelValue:l(r).to,"onUpdate:modelValue":a[2]||(a[2]=s=>l(r).to=s),type:"date",label:"Bitis"},null,8,["modelValue"])]),_:1}),t(i,{cols:"12",md:"3"},{default:o(()=>[t(g,{modelValue:l(r).search,"onUpdate:modelValue":a[3]||(a[3]=s=>l(r).search=s),label:"Arama",placeholder:"Makbuz no veya aciklama"},null,8,["modelValue"])]),_:1}),t(i,{cols:"12"},{default:o(()=>[e("div",Q,[t(h,{variant:"outlined",onClick:D},{default:o(()=>[...a[5]||(a[5]=[y(" Temizle ",-1)])]),_:1}),t(h,{color:"primary",onClick:z},{default:o(()=>[...a[6]||(a[6]=[y(" Filtrele ",-1)])]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["loading"])]),_:1}),l(u)?(p(),B(i,{key:0,cols:"12"},{default:o(()=>[t(q,{type:"error",variant:"tonal"},{default:o(()=>[y(n(l(u)),1)]),_:1})]),_:1})):F("",!0),t(i,{cols:"12"},{default:o(()=>[t(C,{loading:l(_)},{default:o(()=>[t(E,{density:"comfortable"},{default:o(()=>[a[8]||(a[8]=e("thead",null,[e("tr",null,[e("th",null,"Makbuz No"),e("th",null,"Tarih"),e("th",null,"Daire"),e("th",null,"Yontem / Kasa"),e("th",{class:"text-right"}," Tutar "),e("th",{class:"text-right"}," Islemler ")])],-1)),e("tbody",null,[(p(!0),x(O,null,P(l(v),s=>(p(),x("tr",{key:s.id},[e("td",Y," #"+n(s.receipt_no),1),e("td",null,n(l(A)(s.paid_at)),1),e("td",null,n(s.apartment?.label??"-"),1),e("td",null,[e("div",null,n(l(R)(s.method)),1),e("div",G,n(s.cash_account?.name??"-"),1)]),e("td",H,n(l(S)(s.total_amount)),1),e("td",J,[t(h,{icon:"",size:"small",variant:"text",to:`/receipts/${s.id}`},{default:o(()=>[t(j,{icon:"ri-eye-line"})]),_:1},8,["to"])])]))),128)),l(v).length===0?(p(),x("tr",W,[...a[7]||(a[7]=[e("td",{colspan:"6",class:"text-center text-medium-emphasis py-6"}," Kayit bulunamadi. ",-1)])])):F("",!0)])]),_:1}),t(M,{class:"d-flex justify-space-between align-center flex-wrap gap-3"},{default:o(()=>[e("span",X,"Toplam "+n(l(f).total)+" kayit",1),t(I,{"model-value":l(f).current_page,length:l(f).last_page,"total-visible":7,"onUpdate:modelValue":c},null,8,["model-value","length"])]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}))}});export{yt as default};
