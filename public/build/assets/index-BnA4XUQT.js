import{u as N}from"./useAbortOnUnmount-D2zdVzb9.js";import{$ as x,T as k,x as _,q as R}from"./main-Btr01hqQ.js";import{a as j,f as A}from"./formatters-BEv4aA23.js";import{m as S}from"./statusHelpers-DSGXz7Bq.js";import{V as w,a as i}from"./VRow-CRn_xzm0.js";import{V as C}from"./VCard-BmPLTxO3.js";import{V as T}from"./VCardText-H2SttjXr.js";import{V as q}from"./VSelect-DhbvR9Z1.js";import{V as g}from"./VTextField-pVQuWnMO.js";import{V as z}from"./VAlert-R8JWKysv.js";import{V as E}from"./VTable-5XBH4x9y.js";import{V as L}from"./VPagination-9yrd3TeG.js";import{j as O,h as d,D as P,Q as c,R as M,S as l,q as e,y as t,u as a,a8 as y,O as r,ad as F,V as b,F as I,ab as Q}from"./vendor-DfCbaU-T.js";import"./vuetify-DGZOXKNZ.js";import"./VAvatar-96oJdN2D.js";import"./VList-BYpc2SqC.js";import"./VDivider-DEGojtwS.js";import"./VCheckboxBtn-DaQGgEjM.js";import"./VSelectionControl-ClrOpdq3.js";import"./VChip-DOrTqiUh.js";const G={class:"d-flex gap-3 justify-end"},H={class:"font-weight-medium"},J={class:"text-caption text-medium-emphasis"},K={class:"text-right text-success font-weight-medium"},W={class:"text-right"},X={key:0},Y={colspan:"6",class:"text-center text-medium-emphasis py-6"},Z={class:"text-sm text-medium-emphasis"},be=O({__name:"index",setup(ee){N();const h=d(!1),V=d(!1),u=d(""),v=d([]),$=d([]),p=d({current_page:1,last_page:1,per_page:15,total:0}),m=d({apartment_id:null,from:"",to:"",search:""}),U=async()=>{V.value=!0;try{const s=await x("/receipts/meta");$.value=s.data.apartments}catch(s){u.value=k(s,"Filtre verileri alınamadı.")}finally{V.value=!1}},f=async(s=1)=>{h.value=!0,u.value="";try{const o=await x("/receipts",{query:{page:s,apartment_id:m.value.apartment_id||void 0,from:m.value.from||void 0,to:m.value.to||void 0,search:m.value.search||void 0}});v.value=o.data,p.value=o.meta}catch(o){u.value=k(o,"Tahsilat listesi alınamadı.")}finally{h.value=!1}},B=async()=>{await f(1)},D=async()=>{m.value={apartment_id:null,from:"",to:"",search:""},await f(1)};return P(async()=>{await Promise.allSettled([U(),f(1)])}),(s,o)=>(c(),M(w,null,{default:l(()=>[e(i,{cols:"12"},{default:l(()=>[...o[4]||(o[4]=[t("div",{class:"d-flex align-center justify-space-between mb-2"},[t("div",null,[t("h4",{class:"text-h4 mb-1"}," Tahsilatlar "),t("p",{class:"text-medium-emphasis mb-0"}," Makbuz ve tahsilat hareketlerini inceleyin ")])],-1)])]),_:1}),e(i,{cols:"12"},{default:l(()=>[e(C,{loading:a(V)},{default:l(()=>[e(T,null,{default:l(()=>[e(w,null,{default:l(()=>[e(i,{cols:"12",md:"3"},{default:l(()=>[e(q,{modelValue:a(m).apartment_id,"onUpdate:modelValue":o[0]||(o[0]=n=>a(m).apartment_id=n),items:a($),"item-title":"label","item-value":"id",label:s.$t("common.apartment"),clearable:""},null,8,["modelValue","items","label"])]),_:1}),e(i,{cols:"12",md:"3"},{default:l(()=>[e(g,{modelValue:a(m).from,"onUpdate:modelValue":o[1]||(o[1]=n=>a(m).from=n),type:"date",label:s.$t("common.startDate")},null,8,["modelValue","label"])]),_:1}),e(i,{cols:"12",md:"3"},{default:l(()=>[e(g,{modelValue:a(m).to,"onUpdate:modelValue":o[2]||(o[2]=n=>a(m).to=n),type:"date",label:s.$t("common.endDate")},null,8,["modelValue","label"])]),_:1}),e(i,{cols:"12",md:"3"},{default:l(()=>[e(g,{modelValue:a(m).search,"onUpdate:modelValue":o[3]||(o[3]=n=>a(m).search=n),label:s.$t("common.search"),placeholder:"Makbuz no veya açıklama"},null,8,["modelValue","label"])]),_:1}),e(i,{cols:"12"},{default:l(()=>[t("div",G,[e(_,{variant:"outlined",onClick:D},{default:l(()=>[y(r(s.$t("common.clear")),1)]),_:1}),e(_,{color:"primary",onClick:B},{default:l(()=>[y(r(s.$t("common.filter")),1)]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["loading"])]),_:1}),a(u)?(c(),M(i,{key:0,cols:"12"},{default:l(()=>[e(z,{type:"error",variant:"tonal"},{default:l(()=>[y(r(a(u)),1)]),_:1})]),_:1})):F("",!0),e(i,{cols:"12"},{default:l(()=>[e(C,{loading:a(h)},{default:l(()=>[e(E,{density:"comfortable"},{default:l(()=>[t("thead",null,[t("tr",null,[t("th",null,r(s.$t("common.receiptNo")),1),t("th",null,r(s.$t("common.date")),1),t("th",null,r(s.$t("common.apartment")),1),t("th",null,r(s.$t("common.methodAndCash")),1),o[5]||(o[5]=t("th",{class:"text-right"}," Tutar ",-1)),o[6]||(o[6]=t("th",{class:"text-right"}," İşlemler ",-1))])]),t("tbody",null,[(c(!0),b(I,null,Q(a(v),n=>(c(),b("tr",{key:n.id},[t("td",H," #"+r(n.receipt_no),1),t("td",null,r(a(j)(n.paid_at)),1),t("td",null,r(n.apartment?.label??"-"),1),t("td",null,[t("div",null,r(a(S)(n.method)),1),t("div",J,r(n.cash_account?.name??"-"),1)]),t("td",K,r(a(A)(n.total_amount)),1),t("td",W,[e(_,{icon:"",size:"small",variant:"text",to:`/receipts/${n.id}`},{default:l(()=>[e(R,{icon:"ri-eye-line"})]),_:1},8,["to"])])]))),128)),a(v).length===0?(c(),b("tr",X,[t("td",Y,r(s.$t("common.noRecords")),1)])):F("",!0)])]),_:1}),e(T,{class:"d-flex justify-space-between align-center flex-wrap gap-3"},{default:l(()=>[t("span",Z,r(s.$t("common.totalRecords",{count:a(p).total})),1),e(L,{"model-value":a(p).current_page,length:a(p).last_page,"total-visible":7,"onUpdate:modelValue":f},null,8,["model-value","length"])]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}))}});export{be as default};
