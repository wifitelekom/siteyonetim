import{j as B,f as F,h as u,D as M,Q as R,R as h,S as s,Z as S,ac as j,q as l,y as m,a8 as p,u as a,ag as q,O as z,ad as L}from"./vendor-DfCbaU-T.js";import{$ as b,T as x,x as g,U as O}from"./main-OjHNd2U9.js";import{V as G,r as I,e as P}from"./VForm-CtC6ldpE.js";import{u as Q,i as T}from"./useAbortOnUnmount-D2zdVzb9.js";import{V as A,a as n}from"./VRow-Ba58lXtG.js";import{V as Z}from"./VCard-9RfFlHpT.js";import{V as H}from"./VCardText-YweTyZzP.js";import{V as J}from"./VAlert-DafHPFjN.js";import{V}from"./VTextField-CMxHKe9w.js";import{V as K}from"./VTextarea-CHmrCRFp.js";import"./vuetify-BWJcAN87.js";import"./VAvatar-BcaC_ZEa.js";const W={class:"d-flex align-center justify-space-between mb-2"},X={class:"d-flex gap-2"},Y={class:"d-flex justify-end gap-3"},pe=B({__name:"edit",setup(ee){const E=S(),w=j(),c=F(()=>Number(E.params.id)),{withAbort:y}=Q(),_=u(!1),f=u(!1),v=u(!1),d=u(""),i=u({}),r=u({name:"",tax_no:"",phone:"",email:"",address:""}),k=u(null),U=[I()],C=[o=>typeof o!="string"||o.trim().length===0?!0:P()(o)],D=async()=>{_.value=!0,d.value="";try{const o=await y(e=>b(`/vendors/${c.value}`,{signal:e}));r.value={name:o.data.name,tax_no:o.data.tax_no??"",phone:o.data.phone??"",email:o.data.email??"",address:o.data.address??""}}catch(o){if(T(o))return;d.value=x(o,"Tedarikci detayi alinamadi.")}finally{_.value=!1}},N=async()=>{if((await k.value?.validate())?.valid){f.value=!0,d.value="",i.value={};try{await y(e=>b(`/vendors/${c.value}`,{method:"PUT",body:{name:r.value.name,tax_no:r.value.tax_no||null,phone:r.value.phone||null,email:r.value.email||null,address:r.value.address||null},signal:e})),await w.push("/management/vendors")}catch(e){if(T(e))return;d.value=x(e,"Tedarikci guncellenemedi."),i.value=O(e)}finally{f.value=!1}}},$=async()=>{v.value=!0,d.value="";try{await y(o=>b(`/vendors/${c.value}`,{method:"DELETE",signal:o})),await w.push("/management/vendors")}catch(o){if(T(o))return;d.value=x(o,"Tedarikci silinemedi.")}finally{v.value=!1}};return M(D),(o,e)=>(R(),h(A,null,{default:s(()=>[l(n,{cols:"12"},{default:s(()=>[m("div",W,[e[7]||(e[7]=m("div",null,[m("h4",{class:"text-h4 mb-1"}," Tedarikci Duzenle "),m("p",{class:"text-medium-emphasis mb-0"}," Tedarikci kaydini guncelleyin ")],-1)),m("div",X,[l(g,{variant:"outlined",to:"/management/vendors"},{default:s(()=>[...e[5]||(e[5]=[p(" Listeye Don ",-1)])]),_:1}),l(g,{color:"error",variant:"outlined",loading:a(v),disabled:a(v),onClick:$},{default:s(()=>[...e[6]||(e[6]=[p(" Sil ",-1)])]),_:1},8,["loading","disabled"])])])]),_:1}),l(n,{cols:"12"},{default:s(()=>[l(Z,{loading:a(_)||a(f)},{default:s(()=>[l(H,null,{default:s(()=>[l(G,{ref_key:"formRef",ref:k,onSubmit:q(N,["prevent"])},{default:s(()=>[l(A,null,{default:s(()=>[a(d)?(R(),h(n,{key:0,cols:"12"},{default:s(()=>[l(J,{type:"error",variant:"tonal"},{default:s(()=>[p(z(a(d)),1)]),_:1})]),_:1})):L("",!0),l(n,{cols:"12",md:"6"},{default:s(()=>[l(V,{modelValue:a(r).name,"onUpdate:modelValue":e[0]||(e[0]=t=>a(r).name=t),label:"Firma Adi",rules:U,"error-messages":a(i).name??[]},null,8,["modelValue","error-messages"])]),_:1}),l(n,{cols:"12",md:"6"},{default:s(()=>[l(V,{modelValue:a(r).tax_no,"onUpdate:modelValue":e[1]||(e[1]=t=>a(r).tax_no=t),label:"Vergi No","error-messages":a(i).tax_no??[]},null,8,["modelValue","error-messages"])]),_:1}),l(n,{cols:"12",md:"6"},{default:s(()=>[l(V,{modelValue:a(r).phone,"onUpdate:modelValue":e[2]||(e[2]=t=>a(r).phone=t),label:"Telefon","error-messages":a(i).phone??[]},null,8,["modelValue","error-messages"])]),_:1}),l(n,{cols:"12",md:"6"},{default:s(()=>[l(V,{modelValue:a(r).email,"onUpdate:modelValue":e[3]||(e[3]=t=>a(r).email=t),type:"email",label:"E-posta",rules:C,"error-messages":a(i).email??[]},null,8,["modelValue","error-messages"])]),_:1}),l(n,{cols:"12"},{default:s(()=>[l(K,{modelValue:a(r).address,"onUpdate:modelValue":e[4]||(e[4]=t=>a(r).address=t),label:"Adres",rows:"3","error-messages":a(i).address??[]},null,8,["modelValue","error-messages"])]),_:1}),l(n,{cols:"12"},{default:s(()=>[m("div",Y,[l(g,{variant:"outlined",to:"/management/vendors"},{default:s(()=>[...e[8]||(e[8]=[p(" Vazgec ",-1)])]),_:1}),l(g,{color:"primary",type:"submit",loading:a(f),disabled:a(f)},{default:s(()=>[...e[9]||(e[9]=[p(" Guncelle ",-1)])]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}))}});export{pe as default};
