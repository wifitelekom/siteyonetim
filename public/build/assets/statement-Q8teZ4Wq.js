import{u as A}from"./useAbortOnUnmount-D2zdVzb9.js";import{$ as D,T as N,x as k}from"./main-OjHNd2U9.js";import{f,a as x}from"./formatters-BEv4aA23.js";import{j as E,f as S,h as _,D as F,Q as m,R as g,S as a,Z as M,q as s,y as t,O as d,u as e,a8 as V,ad as y,V as h,F as R,ab as U}from"./vendor-DfCbaU-T.js";import{V as v,a as i}from"./VRow-Ba58lXtG.js";import{V as j}from"./VAlert-DafHPFjN.js";import{V as B}from"./VCard-9RfFlHpT.js";import{V as C}from"./VCardText-YweTyZzP.js";import{V as T}from"./VTextField-CMxHKe9w.js";import{V as q}from"./VTable-ByowNMkP.js";import"./vuetify-BWJcAN87.js";import"./VAvatar-BcaC_ZEa.js";const H={class:"d-flex align-center justify-space-between mb-2"},L={class:"text-medium-emphasis mb-0"},O={class:"text-h6"},G={class:"text-h6"},I={class:"font-weight-medium"},K={class:"text-right text-success"},Q={class:"text-right text-error"},Z={class:"text-right font-weight-medium"},z={key:0},rt=E({__name:"statement",setup(J){A();const $=M(),w=S(()=>Number($.params.id)),c=_(!1),p=_(""),r=_(null),n=_({from:"",to:""}),b=async()=>{c.value=!0,p.value="";try{const u=await D(`/cash-accounts/${w.value}/statement`,{query:{from:n.value.from||void 0,to:n.value.to||void 0}});r.value=u.data,n.value.from=u.data.from,n.value.to=u.data.to}catch(u){p.value=N(u,"Ekstre alinamadi.")}finally{c.value=!1}};return F(b),(u,l)=>(m(),g(v,null,{default:a(()=>[s(i,{cols:"12"},{default:a(()=>[t("div",H,[t("div",null,[l[2]||(l[2]=t("h4",{class:"text-h4 mb-1"}," Hesap Ekstresi ",-1)),t("p",L,d(e(r)?.account.name??"-"),1)]),s(k,{variant:"outlined",to:"/cash-accounts"},{default:a(()=>[...l[3]||(l[3]=[V(" Listeye Don ",-1)])]),_:1})])]),_:1}),e(p)?(m(),g(i,{key:0,cols:"12"},{default:a(()=>[s(j,{type:"error",variant:"tonal"},{default:a(()=>[V(d(e(p)),1)]),_:1})]),_:1})):y("",!0),s(i,{cols:"12"},{default:a(()=>[s(B,{loading:e(c)},{default:a(()=>[s(C,null,{default:a(()=>[s(v,null,{default:a(()=>[s(i,{cols:"12",md:"4"},{default:a(()=>[s(T,{modelValue:e(n).from,"onUpdate:modelValue":l[0]||(l[0]=o=>e(n).from=o),type:"date",label:"Baslangic"},null,8,["modelValue"])]),_:1}),s(i,{cols:"12",md:"4"},{default:a(()=>[s(T,{modelValue:e(n).to,"onUpdate:modelValue":l[1]||(l[1]=o=>e(n).to=o),type:"date",label:"Bitis"},null,8,["modelValue"])]),_:1}),s(i,{cols:"12",md:"4",class:"d-flex align-end"},{default:a(()=>[s(k,{color:"primary",block:"",onClick:b},{default:a(()=>[...l[4]||(l[4]=[V(" Sorgula ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["loading"])]),_:1}),s(i,{cols:"12"},{default:a(()=>[s(B,{loading:e(c)},{default:a(()=>[e(r)?(m(),g(C,{key:0},{default:a(()=>[s(v,null,{default:a(()=>[s(i,{cols:"12",md:"4"},{default:a(()=>[l[5]||(l[5]=t("div",{class:"text-caption text-medium-emphasis"}," Acilis Bakiyesi ",-1)),t("div",O,d(e(f)(e(r).opening_balance)),1)]),_:1}),s(i,{cols:"12",md:"4"},{default:a(()=>[l[6]||(l[6]=t("div",{class:"text-caption text-medium-emphasis"}," Kapanis Bakiyesi ",-1)),t("div",G,d(e(f)(e(r).closing_balance)),1)]),_:1}),s(i,{cols:"12",md:"4"},{default:a(()=>[l[7]||(l[7]=t("div",{class:"text-caption text-medium-emphasis"}," Donem ",-1)),t("div",I,d(e(x)(e(r).from))+" - "+d(e(x)(e(r).to)),1)]),_:1})]),_:1})]),_:1})):y("",!0),s(q,{density:"comfortable"},{default:a(()=>[l[9]||(l[9]=t("thead",null,[t("tr",null,[t("th",null,"Tarih"),t("th",null,"Aciklama"),t("th",null,"Belge"),t("th",{class:"text-right"}," Giris "),t("th",{class:"text-right"}," Cikis "),t("th",{class:"text-right"}," Bakiye ")])],-1)),t("tbody",null,[(m(!0),h(R,null,U(e(r)?.transactions??[],o=>(m(),h("tr",{key:`${o.date}-${o.description}-${o.amount}-${o.balance}`},[t("td",null,d(e(x)(o.date)),1),t("td",null,d(o.description),1),t("td",null,d(o.receipt_no??"-"),1),t("td",K,d(o.direction==="in"?e(f)(o.amount):"-"),1),t("td",Q,d(o.direction==="out"?e(f)(o.amount):"-"),1),t("td",Z,d(e(f)(o.balance)),1)]))),128)),(e(r)?.transactions??[]).length===0?(m(),h("tr",z,[...l[8]||(l[8]=[t("td",{colspan:"6",class:"text-center text-medium-emphasis py-6"}," Hareket bulunamadi. ",-1)])])):y("",!0)])]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}))}});export{rt as default};
