import{u as w}from"./useAbortOnUnmount-B_TyPYrd.js";import{$ as N,T as A,x as k}from"./main-DUODoQpR.js";import{f,a as g}from"./formatters-BEv4aA23.js";import{j as E,f as S,h as V,D as F,Q as u,R as _,S as a,Z as M,q as s,y as t,O as d,u as e,a8 as x,ad as y,V as v,F as R,ab as U}from"./vendor-qaEqcc9M.js";import{V as h,a as r}from"./VRow-dBMGxjTF.js";import{V as j}from"./VAlert-DIbLZTVg.js";import{V as $}from"./VCard-DEMyauu_.js";import{V as C}from"./VCardText-lEnvPJxp.js";import{V as B}from"./VTextField-BgtisBQp.js";import{V as q}from"./VTable-CDiDVqFm.js";import"./vuetify-CYvz9UpR.js";import"./VAvatar-DfdxhEHH.js";const L={class:"d-flex align-center justify-space-between mb-2"},O={class:"text-medium-emphasis mb-0"},G={class:"text-h6"},H={class:"text-h6"},I={class:"font-weight-medium"},K={class:"text-right text-success"},Q={class:"text-right text-error"},Z={class:"text-right font-weight-medium"},z={key:0},J={colspan:"6",class:"text-center text-medium-emphasis py-6"},mt=E({__name:"statement",setup(P){w();const D=M(),T=S(()=>Number(D.params.id)),p=V(!1),c=V(""),m=V(null),i=V({from:"",to:""}),b=async()=>{p.value=!0,c.value="";try{const n=await N(`/cash-accounts/${T.value}/statement`,{query:{from:i.value.from||void 0,to:i.value.to||void 0}});m.value=n.data,i.value.from=n.data.from,i.value.to=n.data.to}catch(n){c.value=A(n,"Ekstre alınamadı.")}finally{p.value=!1}};return F(b),(n,o)=>(u(),_(h,null,{default:a(()=>[s(r,{cols:"12"},{default:a(()=>[t("div",L,[t("div",null,[o[2]||(o[2]=t("h4",{class:"text-h4 mb-1"}," Hesap Ekstresi ",-1)),t("p",O,d(e(m)?.account.name??"-"),1)]),s(k,{variant:"outlined",to:"/cash-accounts"},{default:a(()=>[...o[3]||(o[3]=[x(" Listeye Don ",-1)])]),_:1})])]),_:1}),e(c)?(u(),_(r,{key:0,cols:"12"},{default:a(()=>[s(j,{type:"error",variant:"tonal"},{default:a(()=>[x(d(e(c)),1)]),_:1})]),_:1})):y("",!0),s(r,{cols:"12"},{default:a(()=>[s($,{loading:e(p)},{default:a(()=>[s(C,null,{default:a(()=>[s(h,null,{default:a(()=>[s(r,{cols:"12",md:"4"},{default:a(()=>[s(B,{modelValue:e(i).from,"onUpdate:modelValue":o[0]||(o[0]=l=>e(i).from=l),type:"date",label:n.$t("common.startDate")},null,8,["modelValue","label"])]),_:1}),s(r,{cols:"12",md:"4"},{default:a(()=>[s(B,{modelValue:e(i).to,"onUpdate:modelValue":o[1]||(o[1]=l=>e(i).to=l),type:"date",label:n.$t("common.endDate")},null,8,["modelValue","label"])]),_:1}),s(r,{cols:"12",md:"4",class:"d-flex align-end"},{default:a(()=>[s(k,{color:"primary",block:"",onClick:b},{default:a(()=>[...o[4]||(o[4]=[x(" Sorgula ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["loading"])]),_:1}),s(r,{cols:"12"},{default:a(()=>[s($,{loading:e(p)},{default:a(()=>[e(m)?(u(),_(C,{key:0},{default:a(()=>[s(h,null,{default:a(()=>[s(r,{cols:"12",md:"4"},{default:a(()=>[o[5]||(o[5]=t("div",{class:"text-caption text-medium-emphasis"}," Açılış Bakiyesi ",-1)),t("div",G,d(e(f)(e(m).opening_balance)),1)]),_:1}),s(r,{cols:"12",md:"4"},{default:a(()=>[o[6]||(o[6]=t("div",{class:"text-caption text-medium-emphasis"}," Kapanış Bakiyesi ",-1)),t("div",H,d(e(f)(e(m).closing_balance)),1)]),_:1}),s(r,{cols:"12",md:"4"},{default:a(()=>[o[7]||(o[7]=t("div",{class:"text-caption text-medium-emphasis"}," Dönem ",-1)),t("div",I,d(e(g)(e(m).from))+" - "+d(e(g)(e(m).to)),1)]),_:1})]),_:1})]),_:1})):y("",!0),s(q,{density:"comfortable"},{default:a(()=>[t("thead",null,[t("tr",null,[t("th",null,d(n.$t("common.date")),1),t("th",null,d(n.$t("common.description")),1),t("th",null,d(n.$t("common.document")),1),o[8]||(o[8]=t("th",{class:"text-right"}," Giris ",-1)),o[9]||(o[9]=t("th",{class:"text-right"}," Cikis ",-1)),o[10]||(o[10]=t("th",{class:"text-right"}," Bakiye ",-1))])]),t("tbody",null,[(u(!0),v(R,null,U(e(m)?.transactions??[],l=>(u(),v("tr",{key:`${l.date}-${l.description}-${l.amount}-${l.balance}`},[t("td",null,d(e(g)(l.date)),1),t("td",null,d(l.description),1),t("td",null,d(l.receipt_no??"-"),1),t("td",K,d(l.direction==="in"?e(f)(l.amount):"-"),1),t("td",Q,d(l.direction==="out"?e(f)(l.amount):"-"),1),t("td",Z,d(e(f)(l.balance)),1)]))),128)),(e(m)?.transactions??[]).length===0?(u(),v("tr",z,[t("td",J,d(n.$t("common.noTransactions")),1)])):y("",!0)])]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}))}});export{mt as default};
