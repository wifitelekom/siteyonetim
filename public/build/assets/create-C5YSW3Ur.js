import{j as T,h as u,Q as b,R as c,S as a,ac as A,q as t,y as m,a8 as p,u as s,ag as C,O,ad as D}from"./vendor-qaEqcc9M.js";import{u as S,i as U}from"./useAbortOnUnmount-B_TyPYrd.js";import{x as f,$ as B,T as E,U as M}from"./main-DUODoQpR.js";import{V as N,r as v}from"./VForm-AfrkaUJk.js";import{V as g,a as o}from"./VRow-dBMGxjTF.js";import{V as F}from"./VCard-DEMyauu_.js";import{V as Y}from"./VCardText-lEnvPJxp.js";import{V as q}from"./VAlert-DIbLZTVg.js";import{V as $}from"./VTextField-BgtisBQp.js";import{V as h}from"./VSelect-BpDYXa0x.js";import{V as G}from"./VTextarea-BWwjO-LJ.js";import"./vuetify-CYvz9UpR.js";import"./VAvatar-DfdxhEHH.js";import"./VList-BpKoOtV6.js";import"./VDivider-CiCMqi-4.js";import"./VCheckboxBtn-B_mUIJHa.js";import"./VSelectionControl-DtdcpgRj.js";import"./VChip-CzUAJTHl.js";const I={class:"d-flex align-center justify-space-between mb-2"},K={class:"d-flex justify-end gap-3"},de=T({__name:"create",setup(L){const{withAbort:y}=S(),k=A(),r=u(!1),d=u(""),n=u({}),l=u({subject:"",message:"",priority:"medium"}),V=u(null),_=[v()],x=[v()],w=[{value:"low",label:"Dusuk"},{value:"medium",label:"Orta"},{value:"high",label:"Yuksek"}],j=async()=>{if((await V.value?.validate())?.valid){r.value=!0,d.value="",n.value={};try{await y(e=>B("/support-tickets",{method:"POST",body:l.value,signal:e})),await k.push("/support-tickets")}catch(e){if(U(e))return;d.value=E(e,"Destek talebi olusturulamadi."),n.value=M(e)}finally{r.value=!1}}};return(R,e)=>(b(),c(g,null,{default:a(()=>[t(o,{cols:"12"},{default:a(()=>[m("div",I,[e[4]||(e[4]=m("div",null,[m("h4",{class:"text-h4 mb-1"}," Yeni Destek Talebi "),m("p",{class:"text-medium-emphasis mb-0"}," Yeni bir destek talebi olusturun ")],-1)),t(f,{variant:"outlined",to:"/support-tickets"},{default:a(()=>[...e[3]||(e[3]=[p(" Listeye Don ",-1)])]),_:1})])]),_:1}),t(o,{cols:"12"},{default:a(()=>[t(F,{loading:s(r)},{default:a(()=>[t(Y,null,{default:a(()=>[t(N,{ref_key:"formRef",ref:V,onSubmit:C(j,["prevent"])},{default:a(()=>[t(g,null,{default:a(()=>[s(d)?(b(),c(o,{key:0,cols:"12"},{default:a(()=>[t(q,{type:"error",variant:"tonal"},{default:a(()=>[p(O(s(d)),1)]),_:1})]),_:1})):D("",!0),t(o,{cols:"12",md:"8"},{default:a(()=>[t($,{modelValue:s(l).subject,"onUpdate:modelValue":e[0]||(e[0]=i=>s(l).subject=i),label:"Konu",rules:_,"error-messages":s(n).subject??[]},null,8,["modelValue","error-messages"])]),_:1}),t(o,{cols:"12",md:"4"},{default:a(()=>[t(h,{modelValue:s(l).priority,"onUpdate:modelValue":e[1]||(e[1]=i=>s(l).priority=i),items:w,"item-title":"label","item-value":"value",label:"Oncelik"},null,8,["modelValue"])]),_:1}),t(o,{cols:"12"},{default:a(()=>[t(G,{modelValue:s(l).message,"onUpdate:modelValue":e[2]||(e[2]=i=>s(l).message=i),label:"Mesaj",rows:"5",rules:x,"error-messages":s(n).message??[]},null,8,["modelValue","error-messages"])]),_:1}),t(o,{cols:"12"},{default:a(()=>[m("div",K,[t(f,{variant:"outlined",to:"/support-tickets"},{default:a(()=>[...e[5]||(e[5]=[p(" Iptal ",-1)])]),_:1}),t(f,{color:"primary",type:"submit",loading:s(r),disabled:s(r)},{default:a(()=>[...e[6]||(e[6]=[p(" Gonder ",-1)])]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}))}});export{de as default};
